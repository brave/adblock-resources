{
    const $___mock_12502acf1547087c = {};
    (exports => {
        'use strict';
        const xhrUnsent = 0;
        const xhrOpened = 1;
        const xhrHeadersReceived = 2;
        const xhrLoading = 3;
        const xhrDone = 4;
        const xhrDeferredHandleSymbol = Symbol('deferredHandle');
        const xhrOnLoadStartSymbol = Symbol('onloadstart');
        const xhrOnProgressSymbol = Symbol('onprogress');
        const xhrOnAbortSymbol = Symbol('onabort');
        const xhrOnErrorSymbol = Symbol('onerror');
        const xhrOnLoadSymbol = Symbol('onload');
        const xhrOnTimeoutSymbol = Symbol('ontimeout');
        const xhrOnLoadEndSymbol = Symbol('onloadend');
        const xhrOnReadyStateChangeSymbol = Symbol('onreadystatechange');
        const xhrReadyStateSymbol = Symbol('readyState');
        const xhrTimeoutSymbol = Symbol('timeout');
        const xhrWithCredentialsSymbol = Symbol('withCredentials');
        const xhrUploadSymbol = Symbol('upload');
        const xhrResponseTypeSymbol = Symbol('responseType');
        const defineEvent = (obj, symbol) => {
            const type = symbol.description.substring(2);
            Object.defineProperty(obj, symbol, {
                configurable: false,
                enumerable: false,
                value: null,
                writable: true
            });
            obj.addEventListener(type, function (event) {
                const handler = this[symbol];
                if (handler) {
                    handler.call(this, event);
                }
            });
        };
        const changeReadyState = (xhr, readyState) => {
            xhr[xhrReadyStateSymbol] = readyState;
            xhr.dispatchEvent(new Event('readystatechange'));
        };
        let isSealed = true;
        class XMLHttpRequestEventTarget extends EventTarget {
            constructor() {
                super();
                if (!(this instanceof XMLHttpRequest) && !(this instanceof XMLHttpRequestUpload)) {
                    throw new TypeError('Illegal constructor');
                }
                defineEvent(this, xhrOnLoadStartSymbol);
                defineEvent(this, xhrOnProgressSymbol);
                defineEvent(this, xhrOnAbortSymbol);
                defineEvent(this, xhrOnErrorSymbol);
                defineEvent(this, xhrOnLoadSymbol);
                defineEvent(this, xhrOnTimeoutSymbol);
                defineEvent(this, xhrOnLoadEndSymbol);
            }
            get onloadstart() {
                return this[xhrOnLoadStartSymbol];
            }
            set onloadstart(value) {
                this[xhrOnLoadStartSymbol] = value;
            }
            get onprogress() {
                return this[xhrOnProgressSymbol];
            }
            set onprogress(value) {
                this[xhrOnProgressSymbol] = value;
            }
            get onabort() {
                return this[xhrOnAbortSymbol];
            }
            set onabort(value) {
                this[xhrOnAbortSymbol] = value;
            }
            get onerror() {
                return this[xhrOnErrorSymbol];
            }
            set onerror(value) {
                this[xhrOnErrorSymbol] = value;
            }
            get ontimeout() {
                return this[xhrOnTimeoutSymbol];
            }
            set ontimeout(value) {
                this[xhrOnTimeoutSymbol] = value;
            }
            get onloadend() {
                return this[xhrOnLoadEndSymbol];
            }
            set onloadend(value) {
                this[xhrOnLoadEndSymbol] = value;
            }
        }
        exports.XMLHttpRequestEventTarget = {
            configurable: true,
            enumerable: true,
            value: XMLHttpRequestEventTarget,
            writable: true
        };
        class XMLHttpRequestUpload extends XMLHttpRequestEventTarget {
            constructor() {
                if (isSealed) {
                    throw new TypeError('Illegal constructor');
                }
                super();
            }
        }
        exports.XMLHttpRequestUpload = {
            configurable: true,
            enumerable: true,
            value: XMLHttpRequestUpload,
            writable: true
        };
        class XMLHttpRequest extends XMLHttpRequestEventTarget {
            constructor() {
                super();
                isSealed = false;
                const xhrUpload = new XMLHttpRequestUpload();
                isSealed = true;
                Object.defineProperty(this, xhrDeferredHandleSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: null,
                    writable: true
                });
                defineEvent(this, xhrOnReadyStateChangeSymbol);
                Object.defineProperty(this, xhrReadyStateSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: xhrUnsent,
                    writable: true
                });
                Object.defineProperty(this, xhrTimeoutSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: 0,
                    writable: true
                });
                Object.defineProperty(this, xhrWithCredentialsSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: false,
                    writable: true
                });
                Object.defineProperty(this, xhrUploadSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: xhrUpload,
                    writable: false
                });
                Object.defineProperty(this, xhrResponseTypeSymbol, {
                    configurable: false,
                    enumerable: false,
                    value: '',
                    writable: true
                });
            }
            get onreadystatechange() {
                return this[xhrOnReadyStateChangeSymbol];
            }
            set onreadystatechange(value) {
                this[xhrOnReadyStateChangeSymbol] = value;
            }
            get readyState() {
                return this[xhrReadyStateSymbol];
            }
            open(method, url) {
                switch (this[xhrReadyStateSymbol]) {
                case xhrUnsent:
                case xhrDone: {
                        changeReadyState(this, xhrOpened);
                        break;
                    }
                }
            }
            setRequestHeader(name, value) {
            }
            setTrustToken(trustToken) {
            }
            get timeout() {
                return this[xhrTimeoutSymbol];
            }
            set timeout(value) {
                this[xhrTimeoutSymbol] = value;
            }
            get withCredentials() {
                return this[xhrWithCredentialsSymbol];
            }
            set withCredentials(value) {
                switch (this[xhrReadyStateSymbol]) {
                case xhrUnsent:
                case xhrOpened: {
                        break;
                    }
                default: {
                        throw new DOMException('Failed to set the \'withCredentials\' property on \'XMLHttpRequest\': The value may only be set if the object\'s state is UNSENT or OPENED.');
                    }
                }
                this[xhrWithCredentialsSymbol] = !!value;
            }
            get upload() {
                return this[xhrUploadSymbol];
            }
            send() {
                if (this[xhrReadyStateSymbol] === xhrOpened && this[xhrDeferredHandleSymbol] === null) {
                    this[xhrDeferredHandleSymbol] = setTimeout(() => {
                        this[xhrDeferredHandleSymbol] = null;
                        changeReadyState(this, xhrDone);
                        this.dispatchEvent(new ProgressEvent('error'));
                        this.dispatchEvent(new ProgressEvent('loadend'));
                    }, 0);
                } else {
                    throw new DOMException('Failed to execute \'send\' on \'XMLHttpRequest\': The object\'s state must be OPENED.');
                }
            }
            abort() {
                if (this[xhrReadyStateSymbol] === xhrOpened && this[xhrDeferredHandleSymbol] !== null) {
                    clearTimeout(this[xhrDeferredHandleSymbol]);
                    this[xhrDeferredHandleSymbol] = null;
                    changeReadyState(this, xhrUnsent);
                    this.dispatchEvent(new ProgressEvent('abort'));
                    this.dispatchEvent(new ProgressEvent('loadend'));
                }
            }
            get responseURL() {
                return '';
            }
            get status() {
                return 0;
            }
            get statusText() {
                return '';
            }
            getResponseHeader(name) {
                return null;
            }
            overrideMimeType(mime) {
            }
            get responseType() {
                return this[xhrResponseTypeSymbol];
            }
            set responseType(value) {
                switch (this[xhrReadyStateSymbol]) {
                case xhrDone: {
                        throw new DOMException('Failed to set the \'responseType\' property on \'XMLHttpRequest\': The response type cannot be set if the object\'s state is LOADING or DONE.');
                    }
                }
                switch (value) {
                case '':
                case 'arraybuffer':
                case 'blob':
                case 'document':
                case 'json':
                case 'text': {
                        this[xhrResponseTypeSymbol] = value;
                        break;
                    }
                }
            }
            get response() {
                const responseType = this[xhrResponseTypeSymbol];
                return responseType === '' || responseType === 'text' ? '' : null;
            }
            get responseText() {
                const responseType = this[xhrResponseTypeSymbol];
                if (responseType === '' || responseType === 'text') {
                    return '';
                } else {
                    throw new DOMException('Failed to read the \'responseText\' property from \'XMLHttpRequest\': The value is only accessible if the object\'s \'responseType\' is \'\' or \'text\' (was \'arraybuffer\').');
                }
            }
            get responseXML() {
                return null;
            }
        }
        Object.defineProperty(XMLHttpRequest, 'UNSENT', {
            configurable: false,
            enumerable: true,
            value: xhrUnsent
        });
        Object.defineProperty(XMLHttpRequest, 'OPENED', {
            configurable: false,
            enumerable: true,
            value: xhrOpened
        });
        Object.defineProperty(XMLHttpRequest, 'HEADERS_RECEIVED', {
            configurable: false,
            enumerable: true,
            value: xhrHeadersReceived
        });
        Object.defineProperty(XMLHttpRequest, 'LOADING', {
            configurable: false,
            enumerable: true,
            value: xhrLoading
        });
        Object.defineProperty(XMLHttpRequest, 'DONE', {
            configurable: false,
            enumerable: true,
            value: xhrDone
        });
        exports.XMLHttpRequest = {
            configurable: true,
            enumerable: true,
            value: XMLHttpRequest,
            writable: true
        };
    })($___mock_12502acf1547087c);
    const $___mock_97444407c94f687d = {};
    (exports => {
        'use strict';
        let isSealed = false;
        class Storage {
            constructor() {
                if (isSealed) {
                    throw new TypeError('Illegal constructor');
                }
            }
            get length() {
                return Object.keys(this).length;
            }
            key(index) {
                const keys = Object.keys(this);
                if (index < 0 || index >= keys.length) {
                    return null;
                }
                return keys[index];
            }
            getItem(key) {
                return Object.prototype.hasOwnProperty.call(this, key) ? this[key] : null;
            }
            setItem(key, value) {
                this[key] = String(value);
            }
            removeItem(key) {
                delete this[key];
            }
            clear() {
                const keys = Object.keys(this);
                for (const key of keys) {
                    delete this[key];
                }
            }
        }
        exports.Storage = {
            configurable: true,
            enumerable: true,
            value: Storage,
            writable: true
        };
        const localStorage = new Storage();
        exports.localStorage = {
            configurable: true,
            enumerable: true,
            get() {
                return localStorage;
            }
        };
        const sessionStorage = new Storage();
        exports.sessionStorage = {
            configurable: true,
            enumerable: true,
            get() {
                return sessionStorage;
            }
        };
        isSealed = true;
    })($___mock_97444407c94f687d);
    (function () {
        (function (h, sa) {
            return sa(h);
        }('undefined' !== typeof window ? window : this, function (h, sa) {
            function M() {
                var a = '0123456789abcdef'.split(''), b = [], c = Math.random, d;
                b[8] = b[13] = b[18] = b[23] = '-';
                b[14] = '4';
                for (var f = 0; 36 > f; f++)
                    b[f] || (d = 0 | 16 * c(), b[f] = a[19 == f ? d & 3 | 8 : d & 15]);
                return b.join('');
            }
            function R(a) {
                return e.rum.key + '-' + a;
            }
            function ta() {
                for (var a = e.rum.key ? e.rum.key : l.getCookie('yo-rum-key'), b = 0, c = 0, d = 0, f = 0; f < e.delayed.length; f++) {
                    var m = e.delayed[f];
                    'none' != m.orgDelayType && (W = 'active', m.newNode && m.newNode.nodeName ? 'img' == m.newNode.nodeName.toLowerCase() ? c++ : 'script' == m.newNode.nodeName.toLowerCase() && 'attributesrc' != m.type && b++ : m.me && m.me.nodeName && 'script' == m.me.nodeName.toLowerCase() && d++);
                }
                var f = null != a ? a : h.location.hostname, a = ca, m = Na, u = Oa, k = document.location.href, p = navigator.userAgent, da = document.title, S = l.def(h.performance) && l.def(h.performance.timing) && l.def(h.performance.timing.toJSON), A = l.def(h.performance) && l.def(h.performance.getEntries), v = l.def(h.performance) && l.def(h.performance.getEntries), n = l.metaDataValue('X-Yottaa-Optimizations'), y = new Date().getTime(), w;
                if (!1 == l.def(h.performance) || !1 == l.def(h.performance.getEntriesByType))
                    w = {};
                else {
                    w = h.performance.getEntriesByType('resource');
                    for (var t = w.length, z = {}, q = 0; q < t; q++) {
                        var r = w[q], C = z[r.initiatorType];
                        C ? (C.count++, C.size += r.decodedBodySize) : z[r.initiatorType] = {
                            count: 1,
                            size: r.decodedBodySize
                        };
                    }
                    w = z;
                }
                b = {
                    siteKey: f,
                    uuid: a,
                    formatVersion: m,
                    releaseDate: u,
                    requestType: 'navigation',
                    fullPageURL: k,
                    pageCategory: '',
                    userAgent: p,
                    pageTitle: da,
                    isNavigationSupported: S,
                    isResourceTimingSupported: A,
                    isPaintTimingSupported: v,
                    yOptimizations: n,
                    eventTimestamp: y,
                    entryMap: w,
                    sequencing: {
                        numScriptsSequenced: b,
                        numImagesSequenced: c,
                        numBlocksSequenced: d,
                        numDelayedObjects: e.delayed.length
                    },
                    commonDimensions: {}
                };
                e.rum.pageCategory && (b.pageCategory = e.rum.pageCategory, b.fullPageURL = e.rum.pageCategory);
                B.geo && (b.geo = B.geo);
                c = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                b.connection = {};
                !0 == g.def(c) && (b.connection.effectiveType = c.effectiveType, b.connection.rtt = c.rtt);
                for (var x in N)
                    b.commonDimensions[x] = N[x];
                b.commonDimensions.optState || (b.commonDimensions.optState = W);
                try {
                    if (h.localStorage && localStorage.getItem) {
                        var F = localStorage.getItem(R(ua));
                        if (null != F) {
                            var F = JSON.parse(F), D = new Date().getTime() > F.visitorTimestamp + va;
                            b.visitor = {
                                visitorTimestamp: new Date().getTime(),
                                numVisitorPageViews: F.numVisitorPageViews + 1,
                                numSessionPageViews: D ? 1 : F.numSessionPageViews + 1,
                                visitorId: F.visitorId ? F.visitorId : M(),
                                numSessions: D ? F.numSessions + 1 : F.numSessions,
                                sessionId: D ? M() : F.sessionId,
                                bandwidth: ''
                            };
                        } else
                            b.visitor = {
                                visitorTimestamp: new Date().getTime(),
                                numVisitorPageViews: 1,
                                numSessionPageViews: 1,
                                numSessions: 1,
                                visitorId: M(),
                                sessionId: M(),
                                bandwidth: ''
                            };
                        localStorage.setItem(R(ua), JSON.stringify(b.visitor));
                        var E = localStorage.getItem(R(ea));
                        null != E && (b.qoe = JSON.parse(E));
                    }
                } catch (G) {
                    l.log('localStorage was not available');
                }
                !0 == b.isNavigationSupported && !0 !== e.rum.spa && (b.navigationTiming = h.performance.timing.toJSON(), wa(b));
                b.isPaintTimingSupported = !1;
                b.paintTiming = {};
                b.userTiming = {};
                b.measureTiming = {};
                if (h.performance && h.performance.getEntriesByType) {
                    x = h.performance.getEntriesByType('paint');
                    if (null != x && 0 < x.length)
                        for (b.isPaintTimingSupported = !0, f = 0; f < x.length; f++)
                            b.paintTiming[x[f].name] = x[f].startTime;
                    x = h.performance.getEntriesByType('mark');
                    if (null != x && 0 < x.length)
                        for (f = 0; f < x.length; f++)
                            b.userTiming[x[f].name] = x[f].startTime;
                    x = h.performance.getEntriesByType('measure');
                    if (null != x && 0 < x.length)
                        for (f = 0; f < x.length; f++)
                            b.measureTiming[x[f].name] = x[f].duration;
                }
                B.rum = b;
            }
            function xa(a) {
                for (var b = 0; b < e.delayed.length; b++) {
                    var c = e.delayed[b];
                    if (c.src == a || c.srcAttr == a)
                        return c;
                }
                return null;
            }
            function T(a, b, c, d) {
                a = {
                    lastByteTime: c.duration,
                    implementationType: 'dom',
                    type: a,
                    zone: b,
                    resourceName: c.name,
                    resourceSizeBytes: c.decodedBodySize
                };
                c = xa(c.name);
                null != c && (a.delayedType = c.orgDelayType, a.delayedValue = c.delayValue);
                g.def(d) && (a.stack = d);
                return a;
            }
            function ya(a) {
                if (!1 != l.def(h.performance) && !1 != l.def(h.performance.getEntries)) {
                    try {
                        if (!h.localStorage || !h.localStorage.getItem)
                            return;
                    } catch (b) {
                        l.log('localStorage was not available');
                        return;
                    }
                    var c = B.rum, d = [], f = h.performance.timing, m = 0, u = 0, k = f.domInteractive - f.navigationStart, Pa = f.domContentLoadedEventEnd - f.navigationStart, da = f.domComplete - f.navigationStart, S = f.loadEventEnd - f.navigationStart, A = h.performance.getEntries(), f = A.length, v;
                    a: {
                        if (document.querySelector && (v = document.querySelector('img[class*=hero]'), null != v)) {
                            v = v.currentSrc || v.src;
                            break a;
                        }
                        for (var n = document.getElementsByTagName('img'), r = null, w = 0, t = document.documentElement.scrollTop || document.body.scrollTop, z = 0; z < n.length; z++) {
                            v = n[z];
                            var q = v.getBoundingClientRect();
                            if (q.top - t < h.innerHeight)
                                q.width * q.height > w && (r = v.currentSrc || v.src, w = q.width * q.height);
                            else
                                break;
                        }
                        v = r;
                    }
                    for (n = 0; n < f; n++)
                        t = A[n], r = t.startTime, z = 0, 'resource' == t.entryType && (r <= k ? (u += e.rum.advanced.domInteractiveCoef, z = 1) : r <= Pa ? (u += e.rum.advanced.domContentLoadedEventCoef, z = 2) : r <= da ? (u += e.rum.advanced.domCompleteCoef, z = 3) : r <= S || a && n < a ? (u += e.rum.advanced.loadEventCoef, z = 4) : 0 < t.duration && (m += t.duration), w = fa[t.name], 0 != z && t.duration > e.rum.advanced.blockingTime ? G.push(T(4, z, t, w)) : 0 == z && t.duration > e.rum.advanced.performanceTime ? G.push(T(0, z, t, w)) : t.decodedBodySize > e.rum.advanced.violationSize && G.push(T(1, z, t, w)), !0 == t.name.toLowerCase().startsWith('https:') && !0 == t.name.toLowerCase().startsWith('http:') && G.push(T(3, z, t, w)), v == t.name && (p.setExperienceMetric('hero_image_display', t.startTime + t.duration), p.setExperienceMetric('hero_image', v)), t.toJSON && (t = t.toJSON(), t.implementationType = 'dom', g.def(w) && (t.stack = w), w = xa(t.name), null != w && (t.delayedType = w.orgDelayType, t.delayedValue = w.delayValue), t.onLoadStartTime = r - S, d.push(t)));
                    1 < f && p._calculateTti(A, f, S);
                    h.performance.getEntriesByName && !0 !== e.rum.spaTransition && (a = document.getElementsByTagName('script'), ha(a, 'src'), a = document.getElementsByTagName('link'), ha(a, 'href'), a = document.getElementsByTagName('img'), ha(a, 'currentSrc'));
                    a = localStorage.getItem(R(ea));
                    null == a ? a = {
                        sessionTimeSaved: m,
                        journeyTime: m
                    } : (a = JSON.parse(a), a = {
                        sessionTimeSaved: new Date().getTime() > a.collectionTimestamp + va ? m : a.sessionTimeSaved + m,
                        journeyTime: a.journeyTime + m
                    });
                    a.entries = f;
                    a.timeSaved = m;
                    a.score = u;
                    a.pageMeasured = c ? c.fullPageURL : h.location.href;
                    a.pageMeasuredCategory = c ? c.pageCategory : '';
                    a.violations = G;
                    !0 === e.rum.requests && (a.resourceTiming = d);
                    a.jsErrors = za;
                    a.pageMeasuredUuid = ca;
                    a.collectionTimestamp = new Date().getTime();
                    a.commonDimensions = {};
                    for (var y in N)
                        a.commonDimensions[y] = N[y];
                    wa(a);
                    a.commonDimensions.optState || (a.commonDimensions.optState = W);
                    localStorage.setItem(R(ea), JSON.stringify(a));
                }
            }
            function wa(a) {
                a.experienceMetrics = {};
                for (var b in X)
                    a.experienceMetrics[b] = X[b];
            }
            function Qa(a, b, c, d) {
                if (e.sequenceWrites && 'script' == a.nodeName.toLowerCase()) {
                    for (var f in y)
                        if (0 < y[f].length && d.writeLocation != y[f][0].getWriteSelector())
                            return g.def(d.writeLocation) && (a.yo_writeSelector = d.writeLocation), y[f][0].addScript(a), !1;
                    f = null;
                    e && (f = g.select(d.writeLocation));
                    if (null != f) {
                        a.write_context = new C(f, a, d.writeLocation);
                        var m = y[d.writeLocation];
                        g.undef(m) && (m = y[d.writeLocation] = []);
                        m.push(a.write_context);
                        Y = function () {
                            var a = Array.prototype.slice.call(arguments, 0, -1).join('');
                            0 < m.length && m[m.length - 1].collectDocumentWrite(a);
                        };
                        a.original_onload = a.onload;
                        a.original_onreadystatechange = a.onreadystatechange;
                        a.onload = a.onreadystatechange = null;
                        var h = !1;
                        a.onerror = a.onload = function () {
                            h || this.readyState && 'loaded' !== this.readyState && 'complete' !== this.readyState || (g.log('loading ', this, this.write_context.getId()), h = !0, this.original_onload ? this.original_onload.call(arguments) : k.publish({
                                topic: 'sequence/afterloaded/' + a.src,
                                message: a
                            }), this.write_context.finalizeWriteOverride(), this.original_onload = this.write_context = this.onload = this.onreadystatechange = null);
                        };
                        a.onreadystatechange = function () {
                            h || this.readyState && 'loaded' !== this.readyState && 'complete' !== this.readyState || (g.log('loading ', this, this.write_context.getId()), h = !0, this.original_onload || k.publish({
                                topic: 'sequence/afterloaded/' + a.src,
                                message: a
                            }), this.write_context.finalizeWriteOverride(), this.original_onload = this.write_context = this.onload = this.onreadystatechange = null);
                            this.original_onreadystatechange && this.original_onreadystatechange.call(arguments);
                        };
                    }
                }
                return !0;
            }
            function Ra(a, b, c, d) {
                if (e.sequenceWrites && 'function' !== typeof d.writeLocation) {
                    for (var f in y)
                        if (0 < y[f].length && d.writeLocation != y[f][0].getWriteSelector())
                            return g.def(d.writeLocation) && (d.yo_writeSelector = d.writeLocation), y[f][0].addScript(a), !1;
                    f = null;
                    e && (f = g.select(d.writeLocation));
                    if (null != f) {
                        d.write_context = new C(f, { src: a }, d.writeLocation);
                        var m = y[d.writeLocation];
                        g.undef(m) && (m = y[d.writeLocation] = []);
                        m.push(d.write_context);
                        Y = function () {
                            var a = Array.prototype.slice.call(arguments, 0, -1).join('');
                            0 < m.length && m[m.length - 1].collectDocumentWrite(a);
                        };
                    }
                }
                return !0;
            }
            function Sa(a, b) {
                for (; a.firstChild;)
                    a.removeChild(a.firstChild);
                g.writeHTML(a, b);
            }
            function Ta() {
                if (!1 != e.afterShockLoaded) {
                    for (var a = 0; a < e.delayed.length; a++)
                        if ('none' != e.delayed[a].delayType)
                            return;
                    null != e.intervalID && (clearInterval(e.intervalID), e.intervalID = null, g.log('Turning off response timer all objects are loaded.'));
                }
            }
            function Aa(a) {
                e.sequenceWrites && g.undef(a.yo_write) && (a.yo_write = a.write, Y = Ua, a.writeln = a.write = function () {
                    var b = Array.prototype.slice.call(arguments).join('');
                    Y(b, a);
                });
            }
            function Ua(a, b) {
                for (var c = !1, d = 0; d < e.write.length; d++) {
                    var f = e.write[d];
                    if (a.match(f.start) || 1 == f.state) {
                        var d = { document: b }, m;
                        for (m in f)
                            d[m] = f[m];
                        c = !0;
                        f.string && !1 == ia ? f.string += a : (f.state = 1, f.string = a);
                        if (g.undef(f.end) || a.match(f.end)) {
                            if (g.undef(d.delayType) || 'none' == d.delayType) {
                                f.config = d;
                                if (g.def(d.onBefore))
                                    d.onBefore(f, b);
                                g.undef(d.selector) || null == d.selector ? d.selector = b : d.selector = g.select(d.selector);
                                d.selector.yo_write ? (ia = !0, -1 != f.string.indexOf('m_js_controller.js') && (ia = !0), d.selector.yo_write(f.string)) : g.writeHTML(d.selector, f.string, d.how);
                                if (g.def(d.onAfter))
                                    d.onAfter(f, b);
                            } else
                                g.undef(d.selector) ? (d.selector = 'yo_write_' + Math.floor(1000000000 * Math.random()), g.undef(d.how) && (d.how = 'append'), g.undef(d.delayValue) && (d.delayValue = d.selector), document.yo_write('<di' + 'v id=' + d.selector + ' style=width:0px;height:0px></di' + 'v>'), d.selector = g.select(d.selector).parentNode) : d.selector = g.select(d.selector), m = Yo.sequence.resource(''), g.def(d.onBefore) && m.beforeLoading(d.onBefore), g.def(d.onLoad) && m.afterLoaded(d.onLoad), m.type = 'inner', m.how = f.how, m.newNode = a, m.before = d.selector, m.me = d.selector, e.delayed.push(m), domCompleteTriggered && m.execute();
                            f.state = 2;
                            f.string = '';
                        }
                        break;
                    }
                }
                !1 == c && b.yo_write(a);
                g.log('write hander = ' + a);
            }
            function Ba(a) {
                return function (b, c, d) {
                    var f = Z[(a ? 'on' : '') + b];
                    if (f)
                        f.triggered ? U(function () {
                            c(f.event);
                        }, 0) : f.listeners.push(c);
                    else
                        return a ? this.yo_addEventListener(b, c, d) : this.yo_attachEvent(b, c, d);
                };
            }
            function Va(a, b, c) {
                function d(a) {
                    g.log('Loading ' + c.before.src + ' via event handler ' + c.delayValue);
                    c.afterShock();
                    var e = null;
                    g.def(a.currentTarget) ? e = a.currentTarget : g.def(a.srcElement) && (e = a.srcElement);
                    g.removeEvent(e, b[0], d);
                }
                g.log('Adding event ', b[0], b[1]);
                g.addEvent(a, b[0], d);
            }
            function Ca(a, b) {
                return a.top > b.top - a.height && a.bottom < b.bottom + e.offset + 2 * a.height && a.left > b.left - a.width && a.right < b.right + e.offset + 2 * a.width;
            }
            function Wa(a, b) {
                return Da(this, a, b, 'insert');
            }
            function Xa(a) {
                return Da(this, a, a, 'append');
            }
            function Da(a, b, c, d) {
                k.publish({
                    topic: 'sequence/captured',
                    message: {
                        parentNode: a,
                        newNode: b,
                        before: c,
                        captureType: d
                    }
                });
                if (!1 == Ea(b, a, function (a, g) {
                        var h = a.clone();
                        h.type = d;
                        h.newNode = b;
                        h.src = b ? b.src : '';
                        h.before = c;
                        h.me = g;
                        e.delayed.push(h);
                    }))
                    return O.safeWriteInsert(b, c, a, V(b), 'append' == d);
                a = e.delayed[e.delayed.length - 1];
                if (domCompleteTriggered || 'none' == a.delayType)
                    return a.execute();
            }
            function Ea(a, b, c) {
                var d = null, f = null, e = !1;
                a && a.nodeName && (d = a.nodeName.toLowerCase());
                if ('script' == d || 'iframe' == d) {
                    f = V(a);
                    c(f, b);
                    var e = !0, h = !1;
                    a.onreadystatechange && (a.onreadystatechangeOriginal = a.onreadystatechange, a.onreadystatechange = null);
                    a.onreadystatechange = function () {
                        h || this.readyState && 'loaded' !== this.readyState && 'complete' !== this.readyState || (k.publish({
                            persistent: !0,
                            topic: 'sequence/afterloaded/' + f.key,
                            message: f
                        }), h = !0);
                        this.onreadystatechangeOriginal && this.onreadystatechangeOriginal.apply(this, arguments);
                    };
                    a.onload && (a.onloadOriginal = a.onload, a.onload = null);
                    a.onload = function () {
                        !1 == h && (k.publish({
                            persistent: !0,
                            topic: 'sequence/afterloaded/' + f.key,
                            message: f
                        }), h = !0);
                        this.onloadOriginal && this.onloadOriginal.apply(this, arguments);
                    };
                } else if (f = V(b), null == f || 'none' != f.delayType)
                    c(f, b), f.before = b, e = !0;
                g.log(a.nodeName + ' ' + a.src + ' is' + (e ? ' ' : ' NOT ') + 'sequenced.');
                !1 == e && k.publish({
                    topic: 'sequence/beforeloading/' + f.key,
                    message: f
                });
                return e;
            }
            function V(a) {
                var b = a.src;
                !0 == g.def(a.yo_src) && (b = a.yo_src);
                if (null == b || 0 == b.length) {
                    var c = new (_delayed())();
                    c.delayType = 'none';
                    return c;
                }
                for (c = 0; c < e.resources.length; c++) {
                    var d = e.resources[c];
                    if (!0 == d.match && !0 == g.matchUrl(d.url, b) && ((g.undef(a.nodeName) || 'xhr' !== a.nodeName) && !0 !== d.xhr || 'xhr' === a.nodeName && !0 === d.xhr))
                        return g.log('Found configuration for ' + b + ' delayType ' + d.delayType), 'empty' == d.delayType && (a.src = null == d.delaySrc ? 'data:text/javascript;plain,//' : d.delaySrc, d.delayType = 'none'), d;
                }
                g.log('Did NOT find configuration for ' + b + ' checking local configuration. ');
                c = new (_delayed())();
                c.key = c.src = b;
                if (null != a.delayType)
                    'empty' == a.delayType && (a.src = null == a.delaySrc ? 'data:text/javascript;plain,//' : a.delaySrc, a.delayType = 'none'), c[a.delayType](a.delayValue);
                else
                    c[e.defaultType](e.defaultDelay);
                c.before = a;
                return c;
            }
            function Fa() {
                for (var a = 0; a < e.resources.length; a++) {
                    var b = e.resources[a];
                    if (!b.isConfig) {
                        var c = new (_delayed())();
                        c.key = c.url = b.url;
                        c.match = !0;
                        c.local = !0;
                        c[b.delayType](b.delayValue);
                        e.resources[a] = c;
                    }
                }
            }
            var H = {}, U = h.setTimeout, Ya = h.setInterval, e = {
                    defaultDelay: 5000,
                    defaultType: 'none',
                    log: !1,
                    throttle: 20,
                    sequenceXHR: !1,
                    sequenceWrites: !1,
                    sendTimingData: !1,
                    timingDataURL: '',
                    offset: 100,
                    loadOnDOM: !1,
                    scan: [
                        'script',
                        'img',
                        'source',
                        'picture'
                    ],
                    resources: [],
                    abTesting: [],
                    write: [],
                    intervalID: null,
                    lazyCheckSize: !0,
                    pre: 'data-yo-',
                    srcAttrs: [
                        'data-yo-src',
                        'data-yo-srcset'
                    ],
                    afterShockLoaded: !1,
                    optimizeIE: !0,
                    logPrefix: 'Yo.utils.log: ',
                    delayed: [],
                    maxMessageSize: 2048000,
                    scriptAttrs: [
                        'async',
                        'nomodule',
                        'defer'
                    ]
                }, l = {
                    log: function () {
                        if (e.log && ('undefined' !== typeof h && l.def(h.console) && l.def(h.console.log) || 'undefined' !== typeof self && l.def(self.console) && l.def(self.console.log))) {
                            var a = Array.prototype.slice.call(arguments);
                            a.unshift(e.logPrefix);
                            console.log.apply(console, a);
                        }
                    },
                    def: function (a) {
                        return 'undefined' != typeof a;
                    },
                    undef: function (a) {
                        return !l.def(a);
                    },
                    isFunction: function (a) {
                        return !!(a && a.constructor && a.call && a.apply);
                    },
                    decodeSafeString: function (a) {
                        return decodeURIComponent(a);
                    },
                    getCookie: function (a) {
                        for (var b = document.cookie.split(';'), c = 0; c < b.length; c++) {
                            var d = b[c];
                            if (-1 != d.indexOf(a)) {
                                for (; ' ' == d.charAt(0);)
                                    d = d.substring(1, d.length);
                                return d.substring(a.length + 1, d.length);
                            }
                        }
                        return null;
                    },
                    setCookie: function (a, b, c) {
                        var d = '';
                        c && (d = new Date(), d = new Date(d.getTime() + 1000 * c), d = '; expires=' + d.toGMTString());
                        document.cookie = a + '=' + b + d + '; path=/';
                        return !0;
                    },
                    addEvent: function (a, b, c) {
                        a.attachEvent ? a.attachEvent('on' + b, c) : a.addEventListener && a.addEventListener(b, c, !1);
                    },
                    removeEvent: function (a, b, c) {
                        a.detachEvent ? a.detachEvent('on' + b, c) : a.removeEventListener(b, c, !1);
                    },
                    metaDataValue: function (a, b) {
                        var c = document.getElementsByName(a);
                        return null != c && 1 == c.length ? 1 == arguments.length ? c[0].getAttribute('content') : c[0].setAttribute('content', b) : null;
                    },
                    matchUrl: function (a, b) {
                        if (null == a || null == b)
                            return !1;
                        l.log('Match src', b, 'and url', a);
                        return 'string' === typeof a && -1 != b.indexOf(a) || null != b.match(a);
                    },
                    sendData: function (a, b) {
                        if (!0 == l.isIE('8'))
                            return l.log('IE 8 detected we will not send data back for this browser currently.'), !1;
                        var c = JSON.stringify(a);
                        if (navigator.sendBeacon && c.length < e.maxMessageSize && 30000 > c.length)
                            H.pubsub.publish({
                                topic: 'sequence/beforeloading/' + b,
                                message: a
                            }), navigator.sendBeacon(b, c), H.pubsub.publish({
                                topic: 'sequence/afterloaded/' + b,
                                message: a
                            });
                        else if (c.length < e.maxMessageSize) {
                            var d = new XMLHttpRequest();
                            d.onreadystatechange = function () {
                                4 == this.readyState && l.log('Rum data response received', this.status);
                            };
                            d.open('POST', b, !0);
                            d.setRequestHeader('Content-type', 'application/json');
                            d.send(c);
                        } else
                            l.log('Message is larger than max message length for qoe calles message size: ', c.length, e.maxMessageSize);
                    }
                }, k = {}, K = {}, Za = 1, Ga = {}, ja = [], $a = function (a, b) {
                    U(function () {
                        a.callback.call(a.context, b.message, b.topic);
                    }, 0);
                };
            k.subscribe = function (a) {
                a.id = ++Za;
                l.undef(a.priority) && (a.priority = 0);
                l.undef(a.priority) && (a.priority = 0);
                'string' === typeof a.topic && -1 != a.topic.indexOf('*') && (a.topic = new RegExp(a.topic.replace(/\*/g, '.*')));
                if ('string' === typeof a.topic) {
                    a.topic = a.topic.toLowerCase();
                    !0 == l.undef(K[a.topic]) && (K[a.topic] = []);
                    K[a.topic].push(a);
                    K[a.topic].sort(function (a, b) {
                        return b.priority - a.priority;
                    });
                    var b = Ga[a.topic];
                    l.def(b) && a.callback.call(b.context, b.message, b.topic);
                } else
                    ja.push(a);
                l.log('_pubsub.subscribe', a.topic, a.id);
                return a.id;
            };
            k.publish = function (a) {
                a.topic = a.topic.toLowerCase();
                for (var b = K[a.topic], c = b = !0 == l.undef(b) ? [] : b.slice(0), d = 0; d < ja.length; d++) {
                    var f = ja[d];
                    null != a.topic.match(f.topic) && c.push(f);
                }
                a.persistent && (Ga[a.topic] = a);
                if (!0 == l.def(b)) {
                    c = [];
                    for (d = 0; d < b.length; d++) {
                        var f = b[d], e = !0;
                        !0 == a.async ? $a(f, a) : (e = f.callback.call(f.context, a.message, a.topic), c.push(e));
                        l.log('_pubsub.publish', f.topic, f.id);
                        if (!1 == e && !0 === a.cancellable)
                            break;
                    }
                    return c;
                }
                l.log('_pubsub.publish', a.topic, 'no callbacks');
                return 0;
            };
            k.unsubscribe = function (a) {
                for (var b in K)
                    for (var c = K[b], d = 0; d < c.length; d++)
                        if (c[d].id == a)
                            return c.splice(d, 1), l.log('_pubsub.unsubscribe', 'found'), !0;
                l.log('_pubsub.unsubscribe', 'not found');
                return !1;
            };
            var B = {
                    releaseDate: '2020-08-05-CTRL',
                    errors: { has: !1 },
                    config: e
                }, ka = function () {
                    return B;
                };
            k.subscribe({
                topic: 'core/configure',
                callback: function (a) {
                    ka.config = e;
                }
            });
            k.subscribe({
                topic: 'core/start',
                callback: function () {
                    ka.config = e;
                }
            });
            l.addEvent(h, 'error', function (a) {
                var b = a.message, c = a.lineno, d = a.filename;
                3 == arguments.length && (b = arguments[0], d = arguments[1], c = arguments[2]);
                l.log('errorCapture', b, c, d);
                var f = '';
                try {
                    f = a && a.error && a.error.stack ? a.error.stack : Error().stack;
                } catch (e) {
                }
                k.publish({
                    topic: 'core/js/error',
                    persistent: !0,
                    message: {
                        message: b,
                        implementationType: 'dom',
                        resourceName: d,
                        lineNumber: c,
                        stack: f,
                        collectionTimestamp: new Date().getTime()
                    }
                });
                B.errors = { has: !0 };
            });
            var p = {}, Na = '3', Oa = '2020-08-05-CTRL', za = [], ea = 'rapid-js-qoe-5', ua = 'rapid-js-visitor-3', G = [], W = 'unknown', N = { optState: W }, va = 1800000, ca = M(), fa = {}, Ha = 0, Ia = 0, X = {};
            p.initialize = function (a, b, c, d, f) {
                e.rum = {
                    beaconUrl: a,
                    requests: b,
                    key: c,
                    post: !0,
                    advanced: {
                        performanceTime: 1500,
                        blockingTime: 750,
                        violationSize: 1024000,
                        domInteractiveCoef: 200,
                        domContentLoadedEventCoef: 150,
                        domCompleteCoef: 100,
                        loadEventCoef: 50
                    }
                };
                l.def(f) && (f.performanceTime && (e.rum.advanced.performanceTime = f.performanceTime), f.blockingTime && (e.rum.advanced.blockingTime = f.blockingTime), f.violationSize && (e.rum.advanced.violationSize = f.violationSize), f.maxMessageSize && (e.maxMessageSize = f.maxMessageSize));
                h.performance && h.performance.setResourceTimingBufferSize && h.performance.setResourceTimingBufferSize(500);
            };
            p.addViolation = function (a, b) {
                G.push({
                    lastByteTime: 0,
                    implementationType: 'dom',
                    type: a,
                    zone: 0,
                    duration: 0,
                    startTime: -1,
                    resourceName: b,
                    resourceSizeBytes: 0
                });
            };
            var ha = function (a, b) {
                for (var c = 0; c < a.length; c++)
                    if ('href' != b || 'stylesheet' == a[c].rel) {
                        var d = a[c][b];
                        if (null != d && '' != d && (0 == d.indexOf('//') && (d = h.location.protocol + d), !0 == d.startsWith('http'))) {
                            var f = h.performance.getEntriesByName(d);
                            null != f && 0 != f.length || G.push(T(2, 0, {
                                name: d,
                                duration: 0,
                                decodedBodySize: 0
                            }, fa[d]));
                        }
                    }
            };
            _initializeWebVitals = function () {
                var a = 0;
                new PerformanceObserver(function (b) {
                    b = b.getEntries();
                    for (var c = 0; c < b.length; c++) {
                        var d = b[c];
                        d.hadRecentInput || (a += d.value, p.setExperienceMetric('cumulative_layout_shift', a));
                    }
                }).observe({
                    type: 'layout-shift',
                    buffered: !0
                });
                new PerformanceObserver(function (a) {
                    a = a.getEntries();
                    for (var c = 0; c < a.length; c++) {
                        var d = a[c];
                        p.setExperienceMetric('first_input_delay', d.processingEnd - d.startTime);
                        p.setExperienceMetric('first_input_name', d.name);
                        p.setExperienceMetric('first_input_start_time', d.startTime);
                    }
                }).observe({ type: 'first-input' });
                new PerformanceObserver(function (a) {
                    a = a.getEntries();
                    for (var c = 0; c < a.length; c++)
                        p.setExperienceMetric('largest_contentful_paint', a[c].startTime);
                }).observe({
                    type: 'largest-contentful-paint',
                    buffered: !0
                });
            };
            p._calculateTti = function (a, b, c) {
                for (var d = [], f = 0, e = a[0], g = e.startTime, h = g + e.duration, k = [
                            g,
                            h + 2000
                        ], l = 1; l < b; l++)
                    if (e = a[l], g = e.startTime, h = g + e.duration, 'resource' == e.entryType)
                        if (!0 == (g >= k[0] && g <= k[1] || h >= k[0] && h <= k[1]))
                            d.push(e), 2 < d.length && (k = [
                                g,
                                h + 2000
                            ], Ja(d, k), 2 < d.length && (f = k[1] - 2000));
                        else if (g > k[1] - 2000) {
                            if (h > c)
                                break;
                            k = [
                                g,
                                h + 2000
                            ];
                            Ja(d, k);
                        }
                f <= c && (f = -2);
                p.setExperienceMetric('time_to_interactive', f);
                return f;
            };
            var Ja = function (a, b) {
                for (var c = 0; c < a.length; c++) {
                    var d = a[c], f = d.startTime, d = f + d.duration;
                    !1 == (f >= b[0] && f <= b[1] || d >= b[0] && d <= b[1]) && (a.splice(c, 1), c--);
                }
            };
            p.captureStack = function () {
                try {
                    return Error().stack;
                } catch (a) {
                    return '';
                }
            };
            p.set = function (a, b) {
                N[a] = b;
            };
            p.spa = function () {
                e.rum && (e.rum.spa = !0);
            };
            p.get = function () {
                return N;
            };
            p.now = function () {
                return h.performance && h.performance.now ? Math.floor(h.performance.now()) : Math.floor(new Date().getTime());
            };
            p.setExperienceMetric = function (a, b) {
                X[a] = b;
            };
            p.getExperienceMetric = function (a) {
                return X[a];
            };
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    l.def(e.rum) && l.def(e.rum.beaconUrl) && (e.rum.onLoadTime = p.now(), !0 !== e.rum.spa && U(function () {
                        k.publish({
                            topic: 'rum/send',
                            message: B.rum
                        });
                    }, 100), l.addEvent(h, 'unload', function () {
                        l.log('unload window event triggered');
                        ya();
                    }));
                }
            });
            k.subscribe({
                topic: 'sequence/captured',
                callback: function (a, b) {
                    var c = '';
                    a.open_args ? c = a.open_args[1] : a.newNode && a.newNode.src ? c = a.newNode.src : a.delayed && a.delayed.newNode && a.delayed.newNode.src ? c = a.delayed.newNode.src : a.src && (c = a.src);
                    fa[c] = p.captureStack();
                }
            });
            k.subscribe({
                topic: 'core/js/error',
                callback: function (a, b) {
                    za.push(a);
                }
            });
            k.subscribe({
                topic: 'rum/spa/transition/start',
                callback: function (a, b) {
                    if (0 != Ha) {
                        var c = p.now(), d = B.rum;
                        e.rum.spaTransition = !0;
                        if (l.undef(d) || l.undef(d.navigationTiming))
                            l.undef(d) && (d = {}), h.performance && h.performance.timing && (d.navigationTiming = h.performance.timing.toJSON());
                        for (var f in d.navigationTiming)
                            d.navigationTiming[f] = c;
                        ca = M();
                        G = [];
                        ya(Ia);
                        h.performance && p.clearResourceTimings.call(h.performance);
                    }
                }
            });
            k.subscribe({
                topic: 'rum/spa/rendered',
                callback: function (a, b) {
                    var c = B.rum, d = p.now(), f = c ? c.navigationTiming : null;
                    ta();
                    c = B.rum;
                    !0 == g.undef(c.navigationTiming) && (c.navigationTiming = f ? f : h.performance && h.performance.timing ? h.performance.timing.toJSON() : {});
                    a.pageType && a.viewType && (c.pageCategory = a.pageType + '-' + a.viewType, c.fullPageURL = c.pageCategory + '-' + h.location.toString());
                    if (!0 === e.rum.spaTransition)
                        c.navigationTiming.loadEventEnd = d;
                    else if (e.rum.onLoadTime)
                        c.navigationTiming.loadEventEnd = c.navigationTiming.navigationStart + (c.navigationTiming.loadEventEnd - c.navigationTiming.navigationStart) + (d - e.rum.onLoadTime);
                    else
                        return e.rum.spa = !1;
                    e.rum.spaTransition = !1;
                    h.performance && h.performance.getEntries && (Ia = h.performance.getEntries().length);
                    Ha++;
                    c = k.publish({
                        topic: 'rum/beforeSend',
                        async: !1,
                        message: B.rum
                    });
                    0 != c.length && !1 === c[0] || l.sendData(B.rum, e.rum.beaconUrl);
                    H.configure({
                        scan: [
                            'img',
                            'source',
                            'script'
                        ]
                    });
                    H.sequence.displayNow();
                }
            });
            k.subscribe({
                topic: 'rum/send',
                callback: function (a, b) {
                    ta();
                    var c = k.publish({
                        topic: 'rum/beforeSend',
                        async: !1,
                        message: B.rum
                    });
                    0 != c.length && !1 === c[0] || l.sendData(B.rum, e.rum.beaconUrl);
                }
            });
            h.performance && h.performance.clearResourceTimings && (p.clearResourceTimings = h.performance.clearResourceTimings, h.performance.clearResourceTimings = function () {
            });
            try {
                'undefined' !== typeof h.LayoutShift && _initializeWebVitals();
            } catch (ab) {
                l.log('WebVital initialize error', ab.message);
            }
            var P = document;
            _loadCookieConfig = function () {
                var a = l.getCookie('yo-aftershock-config');
                if (null != a && 0 < a.length)
                    try {
                        a = eval(a), Yo.configure(a);
                    } catch (b) {
                    }
            };
            _domready = function () {
                function a(a) {
                    b(a);
                }
                function b(a) {
                    ('poll' === a || 'readystatechange' === a.type) && 'complete' !== P.readyState || d || (d = !0, e.afterShockLoaded = !0, k.publish({
                        topic: 'core/load',
                        async: !0,
                        message: H,
                        persistent: !0
                    }));
                }
                function c() {
                    try {
                        P.documentElement.doScroll('left');
                    } catch (a) {
                        U(c, 50);
                        return;
                    }
                    b('poll');
                }
                var d = !1, f = !0;
                if ('complete' === P.readyState)
                    e.afterShockLoaded = !0, k.publish({
                        topic: 'core/load',
                        async: !0,
                        message: Yo,
                        persistent: !0
                    });
                else {
                    if (P.createEventObject && P.documentElement.doScroll) {
                        try {
                            f = !h.frameElement;
                        } catch (g) {
                        }
                        f && c();
                    }
                    !0 == e.loadOnDOM && (l.addEvent(document, 'DOMContentLoaded', b), l.addEvent(document, 'readystatechange', b));
                    l.addEvent(h, 'load', a);
                }
            };
            k.subscribe({
                topic: 'core/start',
                callback: function () {
                    _loadCookieConfig();
                    _domready();
                }
            });
            var g = l;
            String.prototype.startsWith || (String.prototype.startsWith = function (a, b) {
                return this.substr(b || 0, a.length) === a;
            });
            String.prototype.endsWith || (String.prototype.endsWith = function (a) {
                return -1 !== this.indexOf(a, this.length - a.length);
            });
            g.rewrite = function (a) {
                var b = g.metaDataValue('resource.version'), c = g.metaDataValue('cdn.hostname'), d = g.metaDataValue('profile.id');
                return location.protocol + c + '/' + d + '/' + location.hostname + '/' + b + (0 != a.indexOf('/') ? '/' : '') + a;
            };
            g.rewriteImageAPI = function (a) {
                var b = g.metaDataValue('resource.version'), c = g.metaDataValue('cdn.hostname'), d = g.metaDataValue('profile.id'), f = 'o~', e = g.browser();
                e && 'chrome' === e.name ? f += 'f_webp' : e && 'safari' === e.name && 13 <= e.version && (f += 'f_jp2');
                !0 == a.startsWith('/') && !1 == a.startsWith('//') && (a = h.location.protocol + '//' + h.location.hostname + a);
                return location.protocol + c + '/' + d + '/' + f + '/' + b + '/' + a;
            };
            g.rewriteSrcSet = function (a, b) {
                for (var c = a.split(','), d = '', f = 0; f < c.length; f++) {
                    var e = c[f].trim(), g = e.lastIndexOf(' '), h = '';
                    -1 != g && (h = ' ' + e.substring(g).trim(), e = e.substring(0, g).trim());
                    e = b(e, h);
                    d += e + h;
                    f < c.length - 1 && (d += ', ');
                }
                return d;
            };
            g.select = function (a) {
                var b = -1;
                if (null == a || 1 == a.length)
                    return null;
                if ('document' == a)
                    return document;
                if ('window' == a)
                    return h;
                if (g.def(a.nodeName))
                    return a;
                if ('.' == a[0])
                    return a = document.getElementsByClassName(a.substring(1)), 0 < a.length ? a[0] : null;
                if (-1 != (b = a.indexOf('['))) {
                    var c = a.substring(0, b), d = a.substring(b + 1), f = d.indexOf(']'), e = d.indexOf('['), d = d.substring(0, f), u = 0, f = -1, k = [], l = null;
                    if (-1 != (u = d.indexOf('~')))
                        f = 2;
                    else if (-1 != (u = d.indexOf('*')))
                        f = 1;
                    else if (-1 != (u = d.indexOf('=')))
                        f = 0;
                    else
                        return null;
                    if (-1 != e) {
                        e = a.substring(b + 1 + e + 1);
                        b = e.indexOf(']');
                        try {
                            e = parseInt(e.substring(0, b));
                        } catch (n) {
                        }
                    }
                    var p = d.substring(0, u), u = d.substring(u + 1);
                    2 == f && (l = new RegExp(u));
                    c = document.getElementsByTagName(c);
                    for (b = 0; b < c.length; b++) {
                        var A = 0 < p.length ? c[b].getAttribute(p) : c[b].innerHTML;
                        0 == f && A == u ? k.push(c[b]) : 1 == f && null != A && -1 != A.indexOf(u) ? k.push(c[b]) : 2 == f && null != A && -1 != A.search(l) && k.push(c[b]);
                    }
                    g.log(a, d, p, u, 0 == k.length ? k.length : k[0]);
                    return -1 != e ? e < k.length ? k[e] : null : k[0];
                }
                '#' == a[0] && (a = a.substring(1));
                return document.getElementById(a);
            };
            g.writeHTML = function (a, b, c) {
                var d = document.createElement('div');
                d.innerHTML = 'string' === typeof b ? b : b.innerHTML;
                for (b = d.childNodes; 0 < b.length;)
                    if ('script' == b[0].nodeName.toLowerCase())
                        if (b[0].src)
                            Yo.sequence.script(d.removeChild(b[0]).src).load();
                        else
                            try {
                                eval(d.removeChild(b[0]).innerHTML);
                            } catch (f) {
                                g.log(f);
                            }
                    else
                        'insert' == c ? a.parentNode.insertBefore(d.removeChild(b[0]), a) : a.appendChild(d.removeChild(b[0]));
            };
            g.contains = document.documentElement.compareDocumentPosition ? function (a, b) {
                return !!(a.compareDocumentPosition(b) & 16);
            } : document.documentElement.contains ? function (a, b) {
                return a !== b && (a.contains ? a.contains(b) : !1);
            } : function (a, b) {
                for (; b = b.parentNode;)
                    if (b === a)
                        return !0;
                return !1;
            };
            g.updateHeadItemAttributes = function (a, b, c) {
                0 > a && (document.cookie = 'yo-disable-instanton=true;Max-Age=2', h.location.reload(!0));
                a = document.documentElement.getElementsByTagName('head')[0].children[a];
                for (var d = 0; d < b.length; d++)
                    a.removeAttribute(b[d]);
                for (var f in c)
                    a.setAttribute(f, c[f]);
            };
            g.replaceHeadItemContent = function (a, b) {
                0 > a && (document.cookie = 'yo-disable-instanton=true;Max-Age=2', h.location.reload(!0));
                document.documentElement.getElementsByTagName('head')[0].children[a].textContent = b;
            };
            g.isIE = function (a) {
                var b = navigator.userAgent;
                return b && a && 11 == parseInt(a) && -1 != b.indexOf('rv:11') ? !0 : b && a && -1 != b.indexOf('MSIE ' + a) ? !0 : b && (-1 != b.indexOf('MSIE') || -1 != b.indexOf('rv:11'));
            };
            g.browser = function () {
                var a = navigator.userAgent, b, c = a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
                if (/trident/i.test(c[1]))
                    return b = /\brv[ :]+(\d+)/g.exec(a) || [], {
                        name: 'IE',
                        version: b[1] || ''
                    };
                if ('Chrome' === c[1] && (b = a.match(/\bOPR|Edge\/(\d+)/), null != b))
                    return {
                        name: 'Opera',
                        version: b[1]
                    };
                c = c[2] ? [
                    c[1],
                    c[2]
                ] : [
                    navigator.appName,
                    navigator.appVersion,
                    '-?'
                ];
                null != (b = a.match(/version\/(\d+)/i)) && c.splice(1, 1, b[1]);
                return {
                    name: c[0].toLowerCase(),
                    version: parseInt(c[1])
                };
            };
            g.inArray = function (a, b, c) {
                var d;
                if (b) {
                    if (Array.prototype.indexOf)
                        return Array.prototype.indexOf.call(b, a, c);
                    d = b.length;
                    for (c = c ? 0 > c ? Math.max(0, d + c) : c : 0; c < d; c++)
                        if (c in b && b[c] === a)
                            return c;
                }
                return -1;
            };
            var la = function (a) {
                    k.subscribe({
                        topic: 'sequence/beforeloading/' + this.key,
                        callback: a,
                        context: this
                    });
                    return this;
                }, ma = function (a) {
                    k.subscribe({
                        topic: 'sequence/afterloaded/' + this.key,
                        callback: a,
                        context: this
                    });
                    return this;
                }, O = {}, y = {}, C = function (a, b, c) {
                    this.writeContent = '';
                    this.writeLocation = a;
                    this.writeSelector = c;
                    this.offScreenDom = null;
                    this.node = b;
                    this.scripts = [];
                    this.id = 'yo_write_' + Math.floor(1000000000 * Math.random());
                    g.log('creating WriteContext', this.id, this.node.src);
                    C.prototype.getId = function (a) {
                        return this.id;
                    };
                    C.prototype.collectDocumentWrite = function (a) {
                        this.writeContent += a;
                        g.log('write override', this.getId(), this.node.src, a);
                    };
                    C.prototype.addScript = function (a) {
                        this.scripts.push(a);
                    };
                    C.prototype.getWriteSelector = function (a) {
                        return this.writeSelector;
                    };
                    C.prototype.executeDeferredScripts = function () {
                        for (var a = 0; a < this.scripts.length; a++) {
                            var b = this.scripts[a].getAttribute('src');
                            g.def(this.scripts[a].yo_src) && (b = this.scripts[a].yo_src);
                            Yo.sequence.script(b).none().writeLocation(this.scripts[a].yo_writeSelector).load();
                        }
                    };
                    C.prototype.finalizeWriteOverride = function () {
                        null == this.writeLocation ? g.log('write location is null, content ignored', this.getId(), this.node.src) : 0 < this.writeContent.length ? (g.log('creating off screen DOM', this.getId(), this.node.src), this.offScreenDom = P.createElement('div'), this.offScreenDom.innerHTML = this.writeContent) : g.log('no content, just continue', this.getId(), this.node.src);
                        this.continueWrite();
                    };
                    C.prototype.insertContent = function () {
                        for (; 0 < this.offScreenDom.childNodes.length;) {
                            var a = this.offScreenDom.childNodes[0], b = a.nodeName.toLowerCase();
                            if ('script' == b) {
                                b = a.getAttribute('language');
                                if (null == b || 'vbscript' != b.toLowerCase()) {
                                    y[this.writeSelector].push(this);
                                    try {
                                        this.offScreenDom.removeChild(a);
                                    } catch (c) {
                                    }
                                    Yo.sequence.script(a.getAttribute('src')).none().writeLocation(this.writeSelector).load();
                                    return !1;
                                }
                                try {
                                    eval(a.innerHTML), this.offScreenDom.removeChild(a);
                                } catch (e) {
                                }
                                this.writeLocation.parentNode.insertBefore(a, this.writeLocation);
                            } else if ('link' == b && 'stylesheet' == a.getAttribute('rel').toLowerCase()) {
                                document.getElementsByTagName('head')[0].appendChild(a);
                                try {
                                    this.offScreenDom.removeChild(a);
                                } catch (g) {
                                }
                            } else
                                this.writeLocation.parentNode.insertBefore(a, this.writeLocation);
                        }
                        this.offScreenDom.innerHTML = '';
                        return !0;
                    };
                    C.prototype.continueWrite = function () {
                        for (var a = y[this.writeSelector], b = a.pop(); b;) {
                            g.log('Continue writing ', b.getId());
                            if (b.offScreenDom && !1 == b.insertContent())
                                break;
                            0 == a.length && b.executeDeferredScripts();
                            b = a.pop();
                        }
                    };
                };
            O.safeWriteInsert = function (a, b, c, d, f) {
                if (!0 == Qa(a, b, c, d)) {
                    var e;
                    a: {
                        try {
                            !0 == g.def(a.yo_src) && (!0 == g.isIE() ? a.setAttribute('src', a.yo_src) : a.src = a.yo_src);
                            e = !0 == f || c.contains && !1 == c.contains(b) ? c.yo_ac(a) : c.yo_ib(a, b);
                            break a;
                        } catch (h) {
                            g.log('ERROR adding node into dom', a, h);
                        }
                        e = void 0;
                    }
                    return e;
                }
            };
            O.safeWriteEval = function (a, b, c, d, f) {
                if (!0 == Ra(a, b, c, d))
                    try {
                        a = a.replace('<scri' + 'ipt>', '').replace('</scri' + 'ipt>', ''), 'gpt' == f && (a = 'googletag.cmd.push(function() { googletag.pubads().enableSyncRendering = function(){}; ' + a + '});'), h.eval(a), e.sequenceWrites && d.write_context.finalizeWriteOverride();
                    } catch (m) {
                        g.log('Error eval', m);
                    }
            };
            e.delayed = [];
            e.targets = [];
            var D = function () {
                this.executed = !1;
                this.cont = !0;
            };
            D.prototype.afterLoaded = ma;
            D.prototype.beforeLoading = la;
            D.prototype.execute = function () {
                return this.afterShock();
            };
            D.prototype.clone = function () {
                var a = new D(), b;
                for (b in this)
                    a[b] = this[b];
                return a;
            };
            D.prototype.preventDefault = function () {
                this.cont = !1;
            };
            D.prototype.key = null;
            D.prototype.isConfig = function (a) {
                return this.delayType == a;
            };
            D.prototype.afterShock = function () {
                var a = null;
                if (!0 != this.loaded && (this.delayType = 'none', this.loaded = !0, g.log('Injecting ', this.newNode, ', by ', this.type, ' into the DOM now.'), 'attributesrc' != this.type && k.publish({
                        topic: 'sequence/beforeloading/' + this.key,
                        message: this
                    }), !1 != this.cont)) {
                    var b = this.newNode, c = this.type, d = this.before;
                    if ('insert' == c)
                        a = O.safeWriteInsert(b, d, this.me, this, !1);
                    else if ('append' == c)
                        a = O.safeWriteInsert(b, null, this.me, this, !0);
                    else if ('replace' == c)
                        this.me.replaceChild(b, d), k.publish({
                            topic: 'sequence/afterloaded/' + this.key,
                            message: this
                        });
                    else if ('attributesrc' == c)
                        d.setAttribute('src', b.yo_src);
                    else if ('src' == c)
                        g.def(this.animator) && null != this.animator ? animator(d, this.animator) : g.def(e.animator) && animator(d, e.animator), b = d.getAttribute(e.pre + 'srcset'), null != b && d.setAttribute('srcset', b), d.src = this.srcAttr;
                    else if ('style' == c)
                        b.setAttribute('style', b.getAttribute(e.pre + 'style'));
                    else if ('inner' == c)
                        g.log(this.how + ' -> ' + b), 'replace' == this.how ? Sa(d, b) : 'eval' == this.how || 'gpt' == this.how ? a = O.safeWriteEval(b, d, this.me, this, this.how) : g.writeHTML(d, b, this.how), k.publish({
                            persistent: !0,
                            topic: 'sequence/afterloaded/' + this.key,
                            message: this
                        });
                    else if ('function' == c)
                        g.log(this.how + ' -> ' + b), d = this.key.apply(this.funcThis, this.funcParameters), k.publish({
                            topic: 'sequence/afterloaded/' + this.key,
                            message: {
                                delayed: this,
                                retVal: d
                            }
                        });
                    else if ('xhr' == c) {
                        this.xhr.onreadystatechange && (this.xhr.original_oonreadystatechange = this.xhr.onreadystatechange);
                        var f = this;
                        this.xhr.onreadystatechange = function (a) {
                            4 == f.xhr.readyState && k.publish({
                                topic: 'sequence/afterloaded/' + f.key,
                                message: [
                                    a,
                                    this
                                ]
                            });
                            f.xhr.original_oonreadystatechange && f.xhr.original_oonreadystatechange.apply(this);
                        };
                        this.xhr.xhr_send.apply(this.xhr, this.xhr._yo.send_args);
                    } else
                        'image' == c && this.loadImage(this);
                    Ta();
                    return a;
                }
            };
            _delayed = function () {
                return D;
            };
            var $ = function (a) {
                    var b = new (_delayed())();
                    'string' === typeof a && 0 == a.indexOf('/') && a.lastIndexOf('/') == a.length - 1 && (a = new RegExp(a));
                    b.key = b.url = a;
                    b.match = !0;
                    g.undef(e.resources) && (e.resources = []);
                    for (var c = -1, d = 0; d < e.resources.length; d++) {
                        var f = e.resources[d].url;
                        if ('string' === typeof a && 'string' === typeof f && -1 != a.indexOf(f) || 'string' !== typeof f && 'string' === typeof a && null != a.match(f)) {
                            c = d;
                            break;
                        }
                    }
                    b.writeLocation = function (a) {
                        this.writeLocation = a;
                        return this;
                    };
                    -1 == c ? e.resources.push(b) : e.resources.splice(c, 0, b);
                    return b;
                }, Y = null, ia = !1;
            k.subscribe({
                topic: 'core/configure',
                callback: function () {
                    Aa(document);
                }
            });
            var I = {}, bb = function (a, b, c, d, f) {
                    this._yo = {
                        open_args: arguments,
                        async: !1 === c ? !1 : !0
                    };
                    g.log('xhr open = ' + b + ', async ' + c);
                    k.publish({
                        topic: 'sequence/captured',
                        message: this._yo
                    });
                    return this.xhr_open.apply(this, arguments);
                }, cb = function (a) {
                    if (g.undef(this._yo) || !0 !== this._yo.async)
                        return this.xhr_send.apply(this, arguments);
                    var b = this, c = {
                            src: this._yo.open_args[1],
                            nodeName: 'xhr'
                        };
                    if (!1 == Ea(c, c, function (a, c) {
                            var g = a.clone();
                            g.type = 'xhr';
                            g.xhr = b;
                            g.src = c.src;
                            g.newNode = c;
                            e.delayed.push(g);
                            !0 == e.afterShockLoaded && g.execute();
                        }))
                        return g.log('xhr send is NOT defered, ' + c.src), this.xhr_send.apply(this, arguments);
                    this._yo.send_args = arguments;
                    g.log('xhr send is defered, ' + c.src + ', ' + e.delayed[e.delayed.length - 1].delayType);
                    return this;
                }, db = function () {
                    if (g.undef(this._yo) || g.undef(this._yo.send_args) || !0 !== this._yo.async)
                        return this.xhr_abort.apply(this, arguments);
                    g.log('Abort to the xhr object is called', ' async true');
                };
            I.create = function (a) {
                a = $(a);
                a.xhr = !0;
                a.rewrite = function (a) {
                    this.afterLoaded(function (c) {
                        g.log('Begging to rewrite data for ajax call.');
                        try {
                            if (!(2 > c.length)) {
                                var d = c[1], f = d.responseText, f = a.call(this, f);
                                Object.defineProperty && (Object.defineProperty(d, 'responseText', {
                                    get: function () {
                                        return f;
                                    }
                                }), Object.defineProperty(d, 'response', {
                                    get: function () {
                                        return f;
                                    }
                                }));
                            }
                        } catch (e) {
                            g.log('Error in rewrite handling', e);
                        }
                    });
                };
                return a;
            };
            I.captureMethods = function (a) {
                const $___old_4a730daf4ff16cc1 = {}.constructor.getOwnPropertyDescriptor(window, 'XMLHttpRequest');
                try {
                    if ($___old_4a730daf4ff16cc1)
                        ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___mock_12502acf1547087c.XMLHttpRequest));
                    return function () {
                        !0 == g.undef(a.XMLHttpRequest.prototype.xhr_open) && (a.XMLHttpRequest.prototype.xhr_open = a.XMLHttpRequest.prototype.open, a.XMLHttpRequest.prototype.xhr_send = a.XMLHttpRequest.prototype.send, a.XMLHttpRequest.prototype.xhr_abort = a.XMLHttpRequest.prototype.abort);
                    }.apply(this, arguments);
                } finally {
                    if ($___old_4a730daf4ff16cc1)
                        ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___old_4a730daf4ff16cc1));
                }
            };
            I.overrideMethods = function (a) {
                a.XMLHttpRequest.prototype.open = bb;
                a.XMLHttpRequest.prototype.send = cb;
                a.XMLHttpRequest.prototype.abort = db;
            };
            I.captureMethods(h);
            k.subscribe({
                topic: 'core/configure',
                callback: function () {
                    !0 == e.sequenceXHR && !0 == g.def(XMLHttpRequest) && I.overrideMethods(h);
                }
            });
            _findTags = function (a, b) {
                var c = document.getElementsByTagName(a), d;
                g.log('Find all ' + a + ' tags in the document.');
                for (var f = 0, h = c.length; f < h; f += 1) {
                    d = c[f];
                    if (!0 === b) {
                        var k = d.getAttribute(e.pre + 'delayType');
                        null == k || 'defer' != k && 'lazy' != k || (d.setAttribute(e.pre + 'delayType', 'none'), d.setAttribute(e.pre + 'delayValue', ''));
                        k = d.getAttribute('type');
                        null != k && (-1 < k.indexOf('yo/sequence/defer') || -1 < k.indexOf('yo/sequence/lazy')) && d.setAttribute('type', 'yo/sequence/none/');
                    }
                    if ('true' !== d.getAttribute(e.pre + 'loaded')) {
                        var k = _srcAttr(d), l = d.getAttribute(e.pre + 'style');
                        k ? (g.log('Found src ', a, ', src = ' + k + ' tag to handle with AfterShocK.'), Yo.sequence.content(d).load()) : 'script' == a ? (k = d.getAttribute('type'), d.getAttribute(e.pre + 'src'), k && -1 < k.indexOf('yo/sequence') ? (g.log('Found a ' + a + ', yo/sequence tag to handle with AfterShocK.'), Yo.sequence.content(d).load()) : 'yo/abtest' == k && _abTestScript(d)) : l && (g.log('Found style ', a, ', src = ' + k + ' tag to handle with AfterShocK.'), d = Yo.sequence.content(d), d.type = 'style', d.before = d.newNode, d.load());
                    }
                }
            };
            _srcAttr = function (a) {
                for (var b = 0; b < e.srcAttrs.length; b++) {
                    var c = a.getAttribute(e.srcAttrs[b]);
                    if (null != c)
                        return c;
                }
                return (c = a.getAttribute('src')) && 'data:image/cloaked;plain,' == c.slice(0, 25) ? c.substring(25) : null;
            };
            _loadFromDOM = function (a) {
                a = 'string' === typeof a ? g.select(a) : a;
                var b = content = g.select(a.getAttribute(e.pre + 'location')), c = a.getAttribute(e.pre + 'how'), d = new (_delayed())(), f = a.nodeName.toLowerCase(), m = a;
                'eval' == c || 'gpt' == c ? (content = a.innerHTML, d = Yo.sequence.script(content)) : null == c && (c = 'replace');
                var k = a.getAttribute(e.pre + 'key');
                null != k && (d.key = k);
                var l = a.getAttribute(e.pre + 'delayType'), p = a.getAttribute(e.pre + 'delayValue'), n = a.getAttribute('src'), r = _srcAttr(a), A = r && 0 < r.length ? 'src' : 'inner', n = a.getAttribute(e.pre + 'animator'), v = a.getAttribute(e.pre + 'onbefore');
                null != v && g.isFunction(h[v]) && d.beforeLoading(h[v]);
                var q = a.getAttribute(e.pre + 'onLoad');
                null != q && g.isFunction(h[q]) && d.afterLoaded(h[q]);
                null == content && (content = a, c = 'insert');
                a.setAttribute(e.pre + 'loaded', 'true');
                if (-1 === g.inArray(a, e.targets)) {
                    d.animator = n;
                    if ('img' == f || 'source' == f || 'picture' == f)
                        null == l && (l = 'lazy'), null == b && (b = a);
                    else if ('script' == f) {
                        n = a.getAttribute('type');
                        null != n && (n = n.split('/'), 2 < n.length && (l = n[2], p = n[3]));
                        n = a.getAttribute(e.pre + 'writeLocation');
                        d.writeLocation = null != n ? n : a;
                        n = a.getAttribute(e.pre + 'src');
                        if (null != n) {
                            null == l && (l = 'none');
                            b = {};
                            for (c = 0; c < e.scriptAttrs.length; c++)
                                d = e.scriptAttrs[c], b[d] = a.getAttribute(d);
                            d = Yo.sequence.script(n, b)[l](p);
                            null != k && (d.key = k);
                            null != v && g.isFunction(h[v]) && d.beforeLoading(h[v]);
                            null != q && g.isFunction(h[q]) && d.afterLoaded(h[q]);
                            d.src = n;
                            d.me = a;
                            d.load();
                            return d;
                        }
                        null == b && (b = a);
                    }
                    null == l && (l = 'none');
                    !0 == g.contains(document.documentElement, a) && a.setAttribute(e.pre + 'loaded', 'true');
                    d[l](p);
                    d.before = b;
                    d.me = m;
                    d.type = A;
                    d.srcAttr = r;
                    d.how = c;
                    d.match = !1;
                    d.newNode = 'eval' == c || 'gpt' == c ? content : a;
                    d.key || (d.key = d.srcAttr);
                    return d;
                }
            };
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    Yo.sequence.scanTags(!1);
                }
            });
            var r = {}, Z = {}, aa = function (a, b, c) {
                    g.def(Z[b]) || (Z['on' + b] = {
                        object: a,
                        name: b,
                        triggered: !1,
                        event: null,
                        listeners: []
                    }, g.addEvent(a, b, function (a) {
                        var c = Z['on' + b], e = c.listeners;
                        c.event = a;
                        navigator.userAgent.match(/MSIE /) && (c.event = { type: a.type });
                        for (var g = 0; g < e.length; g++)
                            e[g].call(c.object, a);
                        c.triggered = !0;
                    }), !a.yo_addEventListener && a.addEventListener && c && (a.yo_addEventListener = a.addEventListener, a.addEventListener = Ba(!0)), !a.yo_attachEvent && a.attachEvent && c && (a.yo_attachEvent = a.attachEvent, a.attachEvent = Ba(!1)));
                };
            r.loadEvents = function () {
                aa(h, 'load', !0);
                aa(document, 'readystatechange', !1);
                aa(document, 'DOMContentLoaded', !1);
                aa(document, 'DOMFrameContentLoaded', !0);
            };
            var ba = null, Ka = function (a) {
                    a.tempImage = new ba();
                    var b = a.image.onload;
                    a.image.onload = null;
                    a.tempImage.onload = function (c) {
                        b && b.call(a.image, c);
                        k.publish({
                            topic: 'sequence/afterloaded/' + a.key,
                            message: arguments
                        });
                    };
                    var c = a.image.onerror;
                    a.image.onerror = null;
                    a.tempImage.onerror = function (b) {
                        c && c.call(a.image, b);
                        k.publish({
                            topic: 'sequence/afterloaded/' + a.key,
                            message: arguments
                        });
                    };
                    k.publish({
                        topic: 'sequence/beforeloading/' + a.key,
                        message: arguments
                    });
                    a.tempImage.src = a.src;
                    a.image.setAttribute('src', a.src);
                }, eb = function () {
                    null == ba && (ba = Image, Image = function () {
                        var a = new ba();
                        try {
                            Object.defineProperty(a, 'src', {
                                set: function (b) {
                                    this.yo_src = b;
                                    Yo.utils.log('Overloaded image src being set', b);
                                    b = {
                                        src: b,
                                        key: b.toLowerCase()
                                    };
                                    k.publish({
                                        topic: 'sequence/captured',
                                        message: b
                                    });
                                    var d = {
                                        src: b.src,
                                        key: b.key,
                                        nodeName: 'image'
                                    };
                                    nodeConfig = V(d);
                                    var f = nodeConfig.clone();
                                    f.type = 'image';
                                    f.src = d.src;
                                    f.image = this;
                                    f.newNode = d;
                                    e.delayed.push(f);
                                    f.loadImage = Ka;
                                    !0 == e.afterShockLoaded && f.execute();
                                    b.image = a;
                                    'none' == nodeConfig.delayType && Ka(b);
                                },
                                get: function () {
                                    return this.yo_src ? this.yo_src : '';
                                }
                            });
                        } catch (b) {
                            g.log(b);
                        }
                        return a;
                    });
                };
            k.subscribe({
                topic: 'core/configure',
                callback: function () {
                    !0 == e.sequenceImage && eb();
                }
            });
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                }
            });
            _delayed().prototype.defer = function (a) {
                this.orgDelayType = this.delayType = 'defer';
                this.delayValue = a;
                if (!0 == g.isIE() && !1 == e.optimizeIE)
                    return g.log('Override defer on IE', this.url), this.none();
                this.execute = function () {
                    if (!1 != e.afterShockLoaded && !0 != this.executed) {
                        this.executed = !0;
                        g.log('Loading ', this.newNode, ' via timer event. It will load in ', this.delayValue);
                        var a = this;
                        U(function () {
                            a.afterShock();
                        }, 1 * this.delayValue);
                        return this;
                    }
                };
                return this;
            };
            _delayed().prototype.event = function (a) {
                this.orgDelayType = this.delayType = 'event';
                this.delayValue = a;
                this.execute = function () {
                    if (!1 != e.afterShockLoaded && !0 != this.executed) {
                        this.executed = !0;
                        g.log('Event handling ' + this.before.src + ' ' + this.delayValue);
                        var a = this.delayValue.split(' '), c = a[0].toLowerCase(), d = this;
                        if ('beforeloading' == c || 'afterloaded' == c) {
                            a = a[1];
                            if ('#adjacent' == a)
                                return this.defer(0);
                            k.subscribe({
                                topic: 'sequence/' + c + '/' + a,
                                context: this,
                                callback: function (a) {
                                    g.log('Loading ' + (this.before ? this.before.src : 'no object') + ' via event handler ' + this.delayValue);
                                    d.afterShock();
                                }
                            });
                        } else
                            'pubsub' == c ? (a = a[1], k.subscribe({
                                topic: a,
                                context: this,
                                callback: function (a) {
                                    g.log('Loading ' + (this.before ? this.before.src : 'no object') + ' via pubsub handler ' + this.delayValue);
                                    d.afterShock();
                                }
                            })) : Va(g.select(a[1]), a, this);
                        return this;
                    }
                };
                return this;
            };
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                }
            });
            var L = {}, J = {
                    top: 0 - e.offset,
                    left: 0 - e.offset,
                    height: 0,
                    width: 0,
                    right: 0,
                    bottom: 0
                }, La = function (a) {
                    a = a.getBoundingClientRect();
                    g.undef(a.width) && (a = {
                        top: a.top,
                        left: a.left,
                        right: a.right,
                        bottom: a.bottom,
                        width: a.right - a.left,
                        height: a.bottom - a.top
                    });
                    return a;
                }, q, Ma;
            document.defaultView && document.defaultView.getComputedStyle && (q = function (a, b) {
                var c, d;
                if (d = a.ownerDocument.defaultView) {
                    if (d = d.getComputedStyle(a, null))
                        c = d.getPropertyValue(b), '' !== c || g.contains(a.ownerDocument.documentElement, a) || (c = a.style[b]);
                    return c;
                }
            });
            document.documentElement.currentStyle && (Ma = function (a, b) {
                var c = a.currentStyle && a.currentStyle[b];
                return '' === c ? 'auto' : c;
            });
            var na = q || Ma;
            document.getElementsByClassName || (document.getElementsByClassName = function (a) {
                return this.querySelectorAll('.' + a);
            });
            L.scrollHandler = function (a) {
                J.height = h.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                J.bottom = J.height;
                J.width = h.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
                J.right = J.width;
                if (g.undef(document.documentElement.getBoundingClientRect))
                    return !0;
                for (var b = a = 0; b < e.delayed.length; b++)
                    if (e.delayed[b].isConfig('lazy')) {
                        var c = b, d = e.delayed[c], f = d.delayValue;
                        if ('string' === typeof f)
                            f = g.select(f);
                        else if (null == f || g.def(f))
                            f = d.before;
                        if (null != f && !0 == g.contains(document.documentElement, f))
                            if (d = La(f), !1 == (null != e.intervalID && g.def(f.getBoundingClientRect)) && d.top < J.height + e.offset)
                                g.log('showIfVisible is visible ', c, ', ', f), e.delayed[c].afterShock();
                            else {
                                var m;
                                if (m = !0 == (null != e.intervalID && g.def(f.getBoundingClientRect)))
                                    if (m = !e.lazyCheckSize || 0 < d.width && 0 < d.height)
                                        if (m = !0 == Ca(d, J)) {
                                            b: {
                                                m = f;
                                                for (var k = m.parentNode; null != k && 1 == k.nodeType;) {
                                                    var l = na(k, 'overflow');
                                                    if (l && 'hidden' == l.toLowerCase())
                                                        m.yo_clipped = k;
                                                    else if (0 == na(k, 'opacity') || 'none' == na(k, 'display')) {
                                                        d = !1;
                                                        break b;
                                                    }
                                                    k = k.parentNode;
                                                }
                                                !0 == g.undef(m.yo_clipped) && (m.yo_clipped = !1);
                                                d = !1 != m.yo_clipped ? Ca(d, La(m.yo_clipped)) : !0;
                                            }
                                            m = !0 == d;
                                        }
                                m && (g.log('showIfVisible is visible ', c, ', ', f), e.delayed[c].afterShock());
                            }
                        a++;
                    }
            };
            L.delayed = function (a) {
                this.orgDelayType = this.delayType = 'lazy';
                this.delayValue = a;
                this.execute = function (a) {
                    return this;
                };
                return this;
            };
            q = function (a, b) {
                var c = 0;
                return function () {
                    var d = +new Date();
                    d - c < b || (c = d, a.apply(this, arguments));
                };
            }(L.scrollHandler, 20);
            g.addEvent(h, 'scroll', q);
            g.addEvent(h, 'resize', q);
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    L.scrollHandler();
                }
            });
            _delayed().prototype.lazy = L.delayed;
            k.subscribe({
                topic: 'core/configure',
                callback: function (a) {
                    0 < a.lazyTimer && null == e.intervalID && (e.intervalID = Ya(L.scrollHandler, a.lazyTimer));
                }
            });
            _delayed().prototype.none = function () {
                this.orgDelayType = this.delayType = 'none';
                this.execute = function () {
                    return this.afterShock();
                };
                return this;
            };
            _delayed().prototype.remove = function (a, b, c) {
                var d = !1, f = 'yostore' + g.metaDataValue('resource.version') + this.key;
                g.undef(a) || 'always' == a ? d = !0 : 'session' == a ? sessionStorage && 'true' == sessionStorage.getItem(f) ? d = !0 : sessionStorage && sessionStorage.setItem(f, 'true') : 'visitor' == a && (localStorage && 'true' == localStorage.getItem(f) ? d = !0 : localStorage && localStorage.setItem(f, 'true'));
                if (!0 == d)
                    this.orgDelayType = this.delayType = 'remove', this.execute = function () {
                        return this;
                    };
                else
                    this[b](c);
                return this;
            };
            var oa = null, fb = function (a, b) {
                    var c = g.select(b);
                    oa = new MutationObserver(function (c) {
                        for (var f = !1, e = 0; e < c.length; e++) {
                            var h = c[e];
                            if ('attributes' == h.type && 'observe.attributes' == a.delayType || 'observe.all' == a.delayType)
                                if (g.log('The ' + h.attributeName + ' attribute was modified for ', b), 'all' == a.delayValue) {
                                    f = !0;
                                    break;
                                } else {
                                    if (h.attributeName == a.delayValue) {
                                        f = !0;
                                        break;
                                    }
                                }
                            else if ('childList' == h.type && 'observe.children' == a.delayType || 'observe.all' == a.delayType)
                                if (g.log('A child node has been added or removed for', b), 'all' == a.delayValue) {
                                    f = !0;
                                    break;
                                } else if (0 < h.addedNodes.length && 'added' == a.delayValue) {
                                    f = !0;
                                    break;
                                } else if (0 < h.removedNodes.length && 'removed' == a.delayValue) {
                                    f = !0;
                                    break;
                                }
                        }
                        !0 == f && (a.afterShock(), oa.disconnect());
                    });
                    oa.observe(c, {
                        attributes: !0,
                        childList: !0
                    });
                };
            _delayed().prototype.observe = function (a, b, c) {
                this.orgDelayType = this.delayType = 'observe.' + b;
                this.delayValue = c ? c : 'all';
                if ('undefined' === typeof MutationObserver)
                    return g.log('Override defer on IE', this.url), this.none();
                this.execute = function () {
                    if (!1 != e.afterShockLoaded && !0 != this.executed)
                        return this.executed = !0, g.log('Loading ', this.newNode, ' via observer. It will loaded when ', a, 'changes', b), fb(this, a), this;
                };
                return this;
            };
            var n = {};
            domCompleteTriggered = !1;
            n.node = function (a) {
                if (a = g.select(a))
                    a.yo_ac = g.def(a.yo_ac) ? a.yo_ac : a.appendChild, a.yo_ib = g.def(a.yo_ib) ? a.yo_ib : a.insertBefore, a.appendChild = Xa, a.insertBefore = Wa;
            };
            n.clearNode = function (a) {
                g.def(a.yo_ib) && (a.insertBefore = a.yo_ib);
                g.def(a.yo_ac) && (a.appendChild = a.yo_ac);
            };
            n.addScanner = function (a) {
                e.scan || (e.scan = []);
                -1 === g.inArray(a, e.scan) && e.scan.push(a);
            };
            n.displayNow = function (a) {
                !0 === a && 'active' == Yo.rum.get().optState && (a = !1);
                g.log('Handle the display of all visible tags up to now.');
                n.scanTags(!0, a);
                L.scrollHandler({});
            };
            n.createTimer = function (a, b) {
                Yo.configure({ lazyTimer: a });
                b && Yo.configure({ lazyCheckSize: b });
            };
            n.createElement = function (a) {
                a.yo_createElement || (a.yo_createElement = a.createElement, a.createElement = function (b) {
                    var c = a.yo_createElement(b), d = b.toLowerCase();
                    g.log('_sequencing.createElement', c, b);
                    if (('iframe' == d || 'script' == d) && !0 == g.undef(c.yo_src_override)) {
                        c.yo_src_override = !0;
                        try {
                            Object.defineProperty(c, 'src', {
                                set: function (a) {
                                    if (this.yo_src = a)
                                        if (g.log('Object.src', a), nodeConfig = V(this), null != nodeConfig && 'none' != nodeConfig.delayType) {
                                            if (a = nodeConfig.clone(), a.type = 'attributesrc', a.newNode = this, a.before = this, a.me = this, e.delayed.push(a), domCompleteTriggered)
                                                return a.execute();
                                        } else
                                            this.setAttribute('src', a);
                                },
                                get: function () {
                                    return this.yo_src ? this.yo_src : '';
                                }
                            });
                        } catch (f) {
                            g.log(f);
                        }
                    }
                    return c;
                });
            };
            n.resource = $;
            n.script = function (a, b) {
                var c = $(a);
                c.src = a;
                c.newNode = a;
                !0 == g.undef(b) && (b = {});
                c.before = {
                    src: a,
                    attributes: b
                };
                c.load = function (a) {
                    var c = document.createElement('script');
                    c.type = 'text/javascript';
                    b.async = !0;
                    for (var e in b)
                        null != b[e] && c.setAttribute(e, b[e]);
                    c.yo_src = this.url;
                    (a || document.getElementsByTagName('script')[0].parentNode).appendChild(c);
                    return this;
                };
                c.eval = function () {
                    e.delayed.push(this);
                    this.how = 'eval';
                    this.type = 'inner';
                    this.execute();
                    return this;
                };
                c.apply = function (a, b) {
                    e.delayed.push(this);
                    this.how = 'apply';
                    this.type = 'function';
                    this.funcThis = a;
                    this.funcParameters = b;
                    this.execute();
                    return this;
                };
                c.writeLocation = function (a) {
                    this.writeLocation = a;
                    return this;
                };
                return c;
            };
            n.xhr = I.create;
            n.content = function (a) {
                var b = _loadFromDOM(a);
                k.publish({
                    topic: 'sequence/captured',
                    message: {
                        delayed: b,
                        location: a
                    }
                });
                b.load = function () {
                    g.log('Sequence a script = ' + a.id + ', type ' + this.type);
                    null == this.delayType || 'none' == this.delayType ? g.log('Content found that needs to be loaded immediately') : g.log('Content found that needs to be sequenced', this.delayType, this.delayValue);
                    this.execute(e.delayed.length - 1);
                    e.delayed.push(this);
                };
                return b;
            };
            n.event = r;
            n.image = function (a) {
                return $(a);
            };
            n.scanTags = function (a, b) {
                if (e.scan) {
                    for (var c = 0, d = e.scan.length; c < d; c++)
                        _findTags(e.scan[c], b);
                    !0 !== a && (e.scan = []);
                }
            };
            n.cloakImages = function (a, b) {
                if (!0 != g.undef(h.btoa))
                    for (var c = 0, d = a.length; c < d; c += 1) {
                        var f = a[c], e = document.getElementsByTagName(f);
                        g.log('Cloak ' + f);
                        for (var k = 0, l = e.length; k < l; k += 1)
                            for (var n = e[k], p = 0, r = b.length; p < r; p += 1) {
                                var A = b[p], q = n.getAttribute(A);
                                null != q && (g.log('Cloak ' + f, A, q), n.setAttribute(A, 'data:image/cloaked;base64,' + btoa(q)));
                            }
                    }
            };
            n.document = Aa;
            n.captureMethods = I.captureMethods;
            n.overrideMethods = I.overrideMethods;
            r = document.getElementsByTagName('script');
            0 < r.length && n.node(r[0].parentNode);
            n.node(document.getElementsByTagName('head')[0]);
            !0 == g.isIE() && !0 == e.optimizeIE && n.createElement(document);
            k.subscribe({
                topic: 'core/start',
                callback: function () {
                    Fa();
                }
            });
            k.subscribe({
                topic: 'core/configure',
                callback: function () {
                    Fa();
                }
            });
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    domCompleteTriggered = !0;
                    for (var a = 0; a < e.delayed.length; a++)
                        e.delayed[a].execute();
                }
            });
            var E = {}, r = {};
            _abTest = function (a, b, c, d, f, e, k, l) {
                return Yo.sequence.resource(d).none().beforeLoading(function () {
                    g.log('adding the google segmentation using a custom (dimension' + a + ', ' + b + ', ' + c + ')', f, e);
                    Yo.stats().errors.has && (c += '_error');
                    if ('universal' == f) {
                        var d = !1;
                        h.ga = function () {
                            if (g.def(a) && 2 < arguments.length && 0 <= arguments[0].indexOf('set') && arguments[1] != 'dimension' + a) {
                                if ((h.ga.q = h.ga.q || []).push(arguments), ga(arguments[0], 'dimension' + a, c), d = !0, !0 == g.def(k)) {
                                    for (var b = [], f = 0; f < h.ga.q.length; f++)
                                        if (3 != h.ga.q[f].length || h.ga.q[f][1] != 'dimension' + k)
                                            b[b.length] = h.ga.q[f];
                                    h.ga.q = b;
                                }
                            } else
                                (h.ga.q = h.ga.q || []).push(arguments), !0 == g.undef(k) && !1 == d && ((h.ga.q = h.ga.q || []).push([
                                    'set',
                                    'dimension' + a,
                                    c
                                ]), d = !0);
                            _abTestAnalyticsUniversal(arguments);
                        };
                    } else if (g.def(_gaq)) {
                        for (var n = 1, p = [], q = 0; q < _gaq.length; q++)
                            g.def(_gaq[q]) && 2 < _gaq[q].length && -1 != _gaq[q][0].indexOf('_setCustomVar') ? (!0 != g.undef(a) && _gaq[q][1] == a || !0 != g.undef(k) && _gaq[q][1] == k || (p[p.length] = _gaq[q]), n = q) : p[p.length] = _gaq[q];
                        _gaq = p;
                        g.def(a) && (p = '_setCustomVar', 0 < _gaq.length && 0 < _gaq[0].length && (q = _gaq[0][0].indexOf('.'), -1 != q && (p = _gaq[0][0].substring(0, q + 1) + p)), g.def(l) && (a = l), _gaq.splice(n, 0, [
                            p,
                            a,
                            b,
                            c,
                            g.undef(e) ? 2 : e
                        ]));
                        g.log('abTestAnalyticsClassic()');
                        _abTestAnalyticsClassic();
                    } else
                        g.log('Error creating ga information, no selected version', f);
                });
            };
            _getCookieVariant = function (a) {
                return l.getCookie('yo_abtesting_' + a.name + 'v' + a.version);
            };
            _setCookieVariant = function (a, b, c) {
                g.setCookie('yo_abtesting_' + a.name + 'v' + a.version, b, c);
            };
            _configureAbTestAnalytics = function () {
                var a = config.abTestingAnalytics;
                g.def(a) && g.undef(a.loaded) && (_abTest(void 0, void 0, void 0, a.url, a.gaVersion), g.log('Registering analytics', a.url, a.gaVersion), a.loaded = !0);
            };
            _executeAllAbTest = function () {
                g.undef(e.abTestingAnalytics) ? g.log('Analytics for ab testing not properly defined') : 'classic' == e.abTestingAnalytics.gaVersion ? _executeAllAbTestClassic() : _executeAllAbTestUniversal();
            };
            _executeAllAbTestUniversal = function () {
                for (var a in e.abTesting) {
                    var b = e.abTesting[a];
                    _executeAbTest(b);
                    ga('set', 'dimension' + b.analytics.index, b.valuePrefix + b.name + '_v' + b.version + '_' + b.chosenVariant);
                }
                !0 == E.delayedTrack && ga('send', 'pageview');
            };
            _executeAllAbTestClassic = function () {
                var a = null;
                if (g.def(h._gat) && g.def(E.uaCode))
                    for (var b = h._gat._getTrackers(), c = 0; c < b.length; c++)
                        b[c]._getAccount() == E.uaCode && (a = b[c]);
                for (var d in e.abTesting)
                    b = e.abTesting[d], _executeAbTest(b), c = 2, 'hit' == b.analytics.stickiness ? c = 3 : 'visitor' == b.analytics.stickiness && (c = 1), null != a ? a._setCustomVar(b.analytics.index, b.analytics.name, b.valuePrefix + b.name + '_v' + b.version + '_' + b.chosenVariant, c) : g.def(h._gaq) && h._gaq.push([
                        '_setCustomVar',
                        b.analytics.index,
                        b.analytics.name,
                        b.valuePrefix + b.name + '_v' + b.version + '_' + b.chosenVariant,
                        c
                    ]);
                !0 == E.delayedTrack && (null != a ? (a._trackPageview(), g.log('pageTracker._trackPageview()')) : g.def(h._gaq) ? (h._gaq.push(['_trackPageview']), g.log('window._gaq.push([\'_trackPageview\'])')) : g.log('Did not find the UA code so we can not track'));
            };
            _executeAbTest = function (a) {
                var b = _getCookieVariant(a);
                null == b && (b = _chooseVariant(a));
                'hit' != a.stickiness && _setCookieVariant(a, b, 'visitor' == a.stickiness ? 86400000 : 60 * (g.undef(a.sessionTime) ? 30 : a.sessionTime));
                g.log('Variant', b, 'was chooen for test', a.name);
                a.chosenVariant = b;
                a = a.variants[b];
                if (g.undef(a))
                    'original' != b && g.log('Using original content as the variant', b, 'was not found');
                else
                    for (b = 0; b < a.targets.length; b++) {
                        var c = a.targets[b];
                        'function' == typeof c ? c() : Yo.sequence.content(c).load();
                    }
            };
            _abTestScript = function (a) {
                var b = a.getAttribute(e.pre + 'abtestname'), c = e.abTesting[b];
                if (g.undef(c))
                    g.log('Found variant script for test', b, 'but doesn\'t exist');
                else if (b = a.getAttribute(e.pre + 'variant'), g.def(c.variants[b]))
                    g.log('Variant script with existing name', b, 'already exists. This variant will be excluded');
                else {
                    var b = a.getAttribute(e.pre + 'variantname'), d = a.getAttribute(e.pre + 'splitcondition');
                    g.undef(c.variants[b]) ? c.variants[b] = {
                        splitCondition: d,
                        targets: [a]
                    } : c.variants[b].targets.push(a);
                    g.log('Found script variant', b, 'with splitCondition', d);
                }
            };
            _chooseVariant = function (a) {
                var b = a.variants;
                if ('percentage' == a.splitBy) {
                    var c = 0, d;
                    for (d in b) {
                        a = b[d];
                        var f = c;
                        a.splitCondition *= 1;
                        c += a.splitCondition;
                        a.splitCondition += f;
                    }
                    100 < b[b.length - 1] && g.log('Total percentage of variants is greater than 100, test will always leave out some variants');
                    c = 100 * Math.random();
                    for (d in b)
                        if (a = b[d], c < a.splitCondition)
                            return d;
                    return 'original';
                }
                g.log('Unsupported splitType', a.splitBy, 'for test', a.name);
            };
            _abTestAnalyticsUniversal = function (a) {
                'send' == a[0] && g.def(E.delayedTrack) && (h.ga.q.pop(), E.delayedTrack = !0);
            };
            _abTestAnalyticsClassic = function (a) {
                if (g.def(E.delayedTrack)) {
                    a = [];
                    for (var b = 0; b < _gaq.length; b++)
                        g.undef(_gaq[b]) || 1 > _gaq[b].length || '_trackPageview' != _gaq[b][0] ? ('_setAccount' == _gaq[b][0] && (E.uaCode = _gaq[b][1]), a[a.length] = _gaq[b]) : E.delayedTrack = !0;
                    _gaq = a;
                }
            };
            r.universal = function (a, b, c, d) {
                return _abTest(a, void 0, b, c, 'universal', void 0, d);
            };
            r.classic = function (a, b, c, d, f, e) {
                return _abTest(a, b, c, d, 'classic', f, e);
            };
            r.omniture = function (a, b, c, d) {
                var f = s.t;
                s.t = function () {
                    c && (s[c] = d + s[c]);
                    s['eVar' + a] = b;
                    return f.apply(this, arguments);
                };
            };
            r.abTesting = function (a) {
                g.undef(a.variants) && (a.variants = {});
                g.undef(a.splitBy) && (a.splitBy = 'percentage');
                g.undef(a.stickiness) && (a.stickiness = 'session');
                g.undef(a.version) && (a.version = '0');
                g.undef(a.analytics) && (a.analytics = {});
                g.undef(a.analytics.valuePrefix) && (a.analytics.valuePrefix = 'yo_abtesting_');
                g.undef(a.analytics.name) && (a.analytics.name = 'yottaa_abtest');
                g.undef(a.valuePrefix) && (a.valuePrefix = '');
                e.abTesting[a.name] = a;
            };
            r.abVariant = function (a, b) {
                var c = e.abTesting[name];
                g.undef(c) && g.log('Test', name, 'was not defined');
                c.variants.push(b);
            };
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    _executeAllAbTest();
                }
            });
            e.services = [];
            var Q = {
                add: function (a) {
                    a = {
                        afterLoaded: ma,
                        beforeLoading: la,
                        host: a.host,
                        key: '*' + a.host + '*',
                        properties: a,
                        name: a.name,
                        budget: a.budget
                    };
                    e.services.push(a);
                    k.publish({
                        topic: 'services/add',
                        message: a
                    });
                    return a;
                },
                findByHost: function (a) {
                    for (var b = Q.list(), c = 0; c < b.length; c++) {
                        var d = b[c];
                        if (!0 == g.matchUrl(d.host, a))
                            return g.log('Found service configuration for ' + a + ' service ', d), d;
                    }
                    g.log('Did NOT find service configuration for ' + a + ' checking local configuration. ');
                    return null;
                },
                findByName: function (a) {
                    for (var b = Q.list(), c = 0; c < b.length; c++) {
                        var d = b[c];
                        if (d.name == a)
                            return g.log('Found service configuration for ' + a + ' service ', d), d;
                    }
                    g.log('Did NOT find service configuration for ' + a + ' checking local configuration. ');
                    return null;
                },
                list: function () {
                    return e.services;
                }
            };
            q = {};
            e.scheduling = {
                onLoadTime: null,
                lastScheduleTime: 6000,
                last: 100,
                step: 100,
                scheduled: !1,
                hosts: [],
                priorities: {
                    low: {
                        last: 3000,
                        step: 100
                    },
                    medium: {
                        last: 1000,
                        step: 100
                    },
                    high: {
                        last: 100,
                        step: 100
                    },
                    critical: { last: -1 }
                },
                prioritiesToKeep: [],
                serviceToKeep: [],
                budgetTime: !1,
                servicesToBudget: [],
                loadTime: new Date().getTime()
            };
            q.resource = function (a) {
                return {
                    afterLoaded: ma,
                    beforeLoading: la,
                    src: a,
                    key: '*' + a + '*'
                };
            };
            q.bestFit = function () {
                e.scheduling.type = 'bestfit';
                e.scheduling.scheduled = !0;
            };
            q.priority = function (a) {
                e.scheduling.type = 'priority';
                e.scheduling.scheduled = !0;
                if (a && a.services)
                    for (var b = 0; b < a.services.length; b++)
                        Yo.services.add(a.services[b]);
            };
            q.spread = function (a) {
                e.scheduling.type = 'spread';
                g.def(a) && (e.scheduling.step = a);
                e.scheduling.scheduled = !0;
            };
            q.configure = function (a) {
                for (var b in a)
                    e.scheduling[b] = a[b];
                k.publish({
                    topic: 'schedule/configure',
                    message: e
                });
                return e.scheduling;
            };
            q.budget = function (a) {
                if (a) {
                    a.budgetTime && (e.scheduling.budgetTime = a.budgetTime);
                    a.prioritiesToKeep && (e.scheduling.prioritiesToKeep = a.prioritiesToKeep);
                    if (a.servicesToBudget) {
                        e.scheduling.servicesToBudget = a.servicesToBudget;
                        for (var b = 0; b < a.servicesToBudget.length; b++) {
                            var c = a.servicesToBudget[b];
                            c.budget = !0;
                            Yo.services.add(c);
                        }
                    }
                    e.scheduling.budgeter = a.budgeter ? a.budgeter : gb;
                }
            };
            k.subscribe({
                topic: 'core/start',
                callback: function () {
                }
            });
            k.subscribe({
                topic: 'sequence/captured',
                callback: function (a, b) {
                    null != e.scheduling.onLoadTime && new Date().getTime() > e.scheduling.onLoadTime + e.scheduling.lastScheduleTime ? g.log('Scheduling has expired', e.scheduling.lastScheduleTime) : !0 == e.scheduling.scheduled && ('spread' == e.scheduling.type ? pa(a, b) : 'bestfit' != e.scheduling.type && 'priority' == e.scheduling.type && hb(a, b));
                }
            });
            var hb = function (a, b) {
                    if (a.newNode) {
                        var c = a.newNode.src;
                        if (c && 0 < c.length) {
                            var d = qa(c), f = Q.findByHost(d);
                            if (null != d && -1 == e.scheduling.hosts.indexOf(d)) {
                                if (null == f)
                                    return pa(a, b);
                                var h = e.scheduling.priorities[f.properties.priority];
                                g.log('Service found ', f.properties.name, f.properties.priority);
                                if (!0 == g.undef(h))
                                    return pa(a, b);
                                0 <= h.last && (h.last += h.step, k.subscribe({
                                    topic: 'sequence/beforeloading/*' + d + '*',
                                    callback: function () {
                                        -1 == e.scheduling.hosts.indexOf(d) && e.scheduling.hosts.push(d);
                                    }
                                }), c = null != e.scheduling.budgeter ? e.scheduling.budgeter(f, c, a, e.scheduling) : !1, g.log('Scheduling resource ', a.newNode.src, d, 'defer', h.last, ', isBudgeted = ', c), !0 == c ? a.newNode.delayType = 'remove' : (a.newNode.delayType = 'defer', a.newNode.delayValue = h.last));
                            }
                        }
                    }
                }, pa = function (a, b) {
                    if (a.newNode) {
                        var c = a.newNode.src;
                        if (c && 0 < c.length) {
                            var d = qa(c), f = Q.findByHost(c);
                            null != d && -1 == e.scheduling.hosts.indexOf(d) && (e.scheduling.last += e.scheduling.step, k.subscribe({
                                topic: 'sequence/beforeloading/*' + d + '*',
                                callback: function () {
                                    -1 == e.scheduling.hosts.indexOf(d) && e.scheduling.hosts.push(d);
                                }
                            }), c = null != e.scheduling.budgeter ? e.scheduling.budgeter(f, c, a, e.scheduling) : !1, g.log('Scheduling resource ', a.newNode.src, d, 'defer', e.scheduling.last, ', isBudgeted = ', c), !0 == c ? a.newNode.delayType = 'remove' : (a.newNode.delayType = 'defer', a.newNode.delayValue = e.scheduling.last));
                        }
                    }
                }, gb = function (a, b, c, d) {
                    c = d.budgetTime;
                    var f = qa(b);
                    if (!1 !== c) {
                        if (new Date().getTime() - e.scheduling.loadTime >= c) {
                            if (-1 != d.hosts.indexOf(f))
                                return !1;
                            if (d.servicesToBudget && 0 < d.servicesToBudget.length)
                                return (a = Q.findByHost(b)) && !0 === a.budget ? (p.addViolation(5, b), !0) : !1;
                            if (-1 != d.prioritiesToKeep.indexOf(a.properties.priority) || null != a && !1 == a.budget)
                                return !1;
                            p.addViolation(5, b);
                            return !0;
                        }
                        null != a && (a.budget = !1);
                    }
                    return !1;
                }, qa = function (a) {
                    return (a = a.split('/')[2]) ? a = a.split('.').slice(-2).join('.') : null;
                };
            k.subscribe({
                topic: 'core/load',
                callback: function () {
                    e.scheduling.onLoadTime = new Date().getTime();
                }
            });
            var ra = {
                create: function (a) {
                    var b = e;
                    -1 == b.srcAttrs.indexOf('data-src') && b.srcAttrs.push('data-src');
                    -1 == b.srcAttrs.indexOf('data-srcset') && b.srcAttrs.push('data-srcset');
                    b.imagePipeline = a;
                    k.subscribe({
                        topic: 'sequence/beforeloading/*',
                        callback: function (b, d) {
                            g.log('Yo.imagePipeline.beforeLoading - ', b);
                            var f = b.before, e = a.optimizer || ra.optimizer;
                            e && f && f.nodeName && 'img' == f.nodeName.toLowerCase() && (f = e(f, b.srcAttr)) && (g.log('Yo.imagePipeline updating image src - ', f), b.srcAttr = f);
                        }
                    });
                },
                rewrite: function (a, b) {
                    if (-1 == b.indexOf('.yottaa.net')) {
                        var c = Yo.stats().config.imagePipeline;
                        g.log('Yo.imagePipeline.rewrite', c, a, b);
                        return location.protocol + c.cdn + '/' + c.profileId + '/' + a + '/' + c.version + '/' + b;
                    }
                },
                optimizer: function (a, b, c) {
                    g.log('Yo.imagePipeline default image optimized', a, b);
                    c = c || [];
                    (a = g.browser()) && 'chrome' === a.name ? c.push('f_webp') : a && 'safari' === a.name && 13 <= a.version && c.push('f_jp2');
                    return ra.rewrite('o~' + c.join(','), b);
                }
            };
            h.Yo || (h.Yo = {});
            H = {
                utils: g,
                pubsub: k,
                configure: function (a, b) {
                    const $___old_57a15dc02178935d = {}.constructor.getOwnPropertyDescriptor(window, 'sessionStorage'), $___old_fb63db45e4ba4a34 = {}.constructor.getOwnPropertyDescriptor(window, 'XMLHttpRequest'), $___old_9522f70b3b6440c5 = {}.constructor.getOwnPropertyDescriptor(window, 'XMLHttpRequest');
                    try {
                        if ($___old_57a15dc02178935d)
                            ({}.constructor.defineProperty(window, 'sessionStorage', $___mock_97444407c94f687d.sessionStorage));
                        if ($___old_fb63db45e4ba4a34)
                            ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___mock_12502acf1547087c.XMLHttpRequest));
                        if ($___old_9522f70b3b6440c5)
                            ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___mock_12502acf1547087c.XMLHttpRequest));
                        return function () {
                            if ('string' === typeof a) {
                                var c = 'ul= dl= dt= sd= sr= vp= ct= rtt='.split(' ');
                                c[0] += navigator.language;
                                c[1] += encodeURIComponent(h.location.href.substring(0, 1000));
                                c[2] += encodeURIComponent(document.title);
                                c[3] += h.screen.colorDepth;
                                c[4] += h.screen.width + ',' + h.screen.height;
                                c[5] += h.screen.availWidth + ',' + h.screen.availHeight;
                                if (b)
                                    for (var d in b)
                                        c.push(d + '=' + encodeURIComponent(b[d]));
                                d = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                                c[6] += d ? d.effectiveType : 'unknown';
                                c[7] += d ? d.rtt : 'unknown';
                                try {
                                    if (h.sessionStorage && sessionStorage.getItem) {
                                        var f = sessionStorage.getItem('rapid.testVariations');
                                        if (f && 'undefined' != f) {
                                            var g = JSON.parse(f);
                                            for (d = 0; d < g.length; d++)
                                                !0 == g[d].sticky && c.push('testVariation=' + g[d].testId + '-' + g[d].variationName);
                                        }
                                        if (-1 != (iPos = h.location.hash.indexOf('yoQoeConfig=')))
                                            var n = h.location.hash.substring(iPos + 12).split('&'), c = c.concat(n);
                                    }
                                } catch (q) {
                                    l.log('sessionStorage was not available');
                                }
                                g = null;
                                g = h.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
                                g.open('GET', a + '&' + c.join('&'), !1);
                                g.send('');
                                c = document.createElement('script');
                                c.type = 'text/javascript';
                                c.text = g.responseText;
                                document.getElementsByTagName('head')[0].appendChild(c);
                                try {
                                    h.sessionStorage && sessionStorage.setItem && (f = p.get().testVariations) && sessionStorage.setItem('rapid.testVariations', JSON.stringify(f));
                                } catch (r) {
                                    l.log('sessionStorage was not available');
                                }
                            } else
                                for (d in a)
                                    'resources' == d ? e.resources = e.resources.concat(a.resources) : e[d] = a[d];
                            k.publish({
                                topic: 'core/configure',
                                message: e
                            });
                        }.apply(this, arguments);
                    } finally {
                        if ($___old_57a15dc02178935d)
                            ({}.constructor.defineProperty(window, 'sessionStorage', $___old_57a15dc02178935d));
                        if ($___old_fb63db45e4ba4a34)
                            ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___old_fb63db45e4ba4a34));
                        if ($___old_9522f70b3b6440c5)
                            ({}.constructor.defineProperty(window, 'XMLHttpRequest', $___old_9522f70b3b6440c5));
                    }
                },
                sequence: n,
                rum: p,
                abTesting: r,
                insert: {
                    HEAD_START: 'head_start',
                    HEAD_END: 'head_end',
                    BODY_START: 'body_start',
                    BODY_END: 'body_end',
                    location: function (a) {
                        null != document.body ? document.write('<di\'+\'v id=\'yo_tag_' + a + '\'></di\'+\'v>') : document.write('<script id=\'yo_tag_' + a + '\'></script>');
                        k.publish({
                            topic: 'tag/location/' + a,
                            persistent: !0
                        });
                    },
                    resource: function (a, b, c, d) {
                        var f = Yo.sequence.script(a);
                        f.loaded = !0;
                        k.subscribe({
                            topic: 'tag/location/' + b,
                            callback: function () {
                                var a = g.select('#yo_tag_' + b);
                                Yo.sequence.node(a);
                                c && '' != c || (c = 'none');
                                f[c](d);
                                f.loaded = !1;
                                f.load(a);
                            }
                        });
                        return f;
                    },
                    script: function (a, b, c, d) {
                        var f = Yo.sequence.script(a);
                        f.loaded = !0;
                        k.subscribe({
                            topic: 'tag/location/' + b,
                            callback: function () {
                                c && '' != c || (c = 'none');
                                f[c](d);
                                f.loaded = !1;
                                f.eval();
                            }
                        });
                        return f;
                    },
                    content: function (a, b, c, d) {
                        var f = document.createElement('script');
                        c && '' != c || (c = 'none');
                        f.setAttribute('type', 'yo/sequencing/' + c + '/' + d);
                        var e = Yo.sequence.content(f);
                        e.loaded = !0;
                        0 == b.indexOf('css:') ? k.subscribe({
                            topic: 'core/load',
                            callback: function () {
                                g.def(a.nodeName) ? f.appendChild(a) : f.innerHTML = a;
                                var c = b.split(':');
                                e.before = g.select(c[1]);
                                3 == c.length && ('after' == c[2] ? null == e.before.nextSibling ? (e.before = e.before.parentNode, e.how = 'append') : e.before = e.before.nextSibling : 'prepend' == c[2] ? 0 < e.before.childNodes.length ? e.before = e.before.childNodes[0] : e.how = 'append' : 'append' == c[2] && (e.how = 'append'));
                                e.loaded = !1;
                                e.load();
                            }
                        }) : k.subscribe({
                            topic: 'tag/location/' + b,
                            callback: function () {
                                g.def(a.nodeName) ? f.appendChild(a) : f.innerHTML = a;
                                e.loaded = !1;
                                e.before = g.select('#yo_tag_' + b);
                                e.load();
                            }
                        });
                        return e;
                    }
                },
                stats: ka,
                geo: function () {
                    if (0 === arguments.length)
                        return B.geo;
                    1 === arguments.length && (B.geo = arguments[0], k.publish({
                        topic: 'core/geo',
                        message: arguments[0]
                    }));
                },
                services: Q,
                schedule: q,
                imagePipeline: ra
            };
            h.Yo = H;
            k.publish({
                topic: 'core/start',
                message: H
            });
            h.yo_addScaner = Yo.sequence.addScanner;
            h.yo_createTimer = Yo.sequence.createTimer;
            h.yo_displayNow = Yo.sequence.displayNow;
            h.yo_configureAfterShock = Yo.configure;
            h.yo_afterShockStats = Yo.stats;
            h.yo_nodeWatch = Yo.sequence.node;
            h.yo_addResource = function (a, b, c, d, e, g) {
                a = Yo.sequence.resource(a);
                a[b](c);
                d && a.beforeLoading(d);
                e && a.afterLoaded(e);
                g && a.writeLocation(g);
            };
            h.yo_scriptLoader = function (a, b, c, d, e, g) {
                a = Yo.sequence.script(a);
                a[b](c);
                d && a.beforeLoading(d);
                e && a.afterLoaded(e);
                g && a.writeLocation(g);
                a.load();
            };
            h.yo_deferLoadResource = function (a, b, c, d, e) {
                yo_addResource(a, 'defer', b, c, d, e);
            };
            h.yo_lazyLoadResource = function (a, b, c, d, e) {
                yo_addResource(a, 'lazy', b, c, d, e);
            };
            return h.Yo;
        }));
    }())
}