var safelyCollectKeyweeEvent,trackMethod;{const $___mock_dd2c7e7e2c9ba860={};(exports=>{"use strict";const xhrUnsent=0;const xhrOpened=1;const xhrHeadersReceived=2;const xhrLoading=3;const xhrDone=4;const xhrDeferredHandleSymbol=Symbol("deferredHandle");const xhrOnLoadStartSymbol=Symbol("onloadstart");const xhrOnProgressSymbol=Symbol("onprogress");const xhrOnAbortSymbol=Symbol("onabort");const xhrOnErrorSymbol=Symbol("onerror");const xhrOnLoadSymbol=Symbol("onload");const xhrOnTimeoutSymbol=Symbol("ontimeout");const xhrOnLoadEndSymbol=Symbol("onloadend");const xhrOnReadyStateChangeSymbol=Symbol("onreadystatechange");const xhrReadyStateSymbol=Symbol("readyState");const xhrTimeoutSymbol=Symbol("timeout");const xhrWithCredentialsSymbol=Symbol("withCredentials");const xhrUploadSymbol=Symbol("upload");const xhrResponseTypeSymbol=Symbol("responseType");const defineEvent=(obj,symbol)=>{const type=symbol.description.substring(2);Object.defineProperty(obj,symbol,{configurable:false,enumerable:false,value:null,writable:true});obj.addEventListener(type,function(event){const handler=this[symbol];if(handler){handler.call(this,event)}})};const changeReadyState=(xhr,readyState)=>{xhr[xhrReadyStateSymbol]=readyState;xhr.dispatchEvent(new Event("readystatechange"))};let isSealed=true;class XMLHttpRequestEventTarget extends EventTarget{constructor(){super();if(!(this instanceof XMLHttpRequest)&&!(this instanceof XMLHttpRequestUpload)){throw new TypeError("Illegal constructor")}defineEvent(this,xhrOnLoadStartSymbol);defineEvent(this,xhrOnProgressSymbol);defineEvent(this,xhrOnAbortSymbol);defineEvent(this,xhrOnErrorSymbol);defineEvent(this,xhrOnLoadSymbol);defineEvent(this,xhrOnTimeoutSymbol);defineEvent(this,xhrOnLoadEndSymbol)}get onloadstart(){return this[xhrOnLoadStartSymbol]}set onloadstart(value){this[xhrOnLoadStartSymbol]=value}get onprogress(){return this[xhrOnProgressSymbol]}set onprogress(value){this[xhrOnProgressSymbol]=value}get onabort(){return this[xhrOnAbortSymbol]}set onabort(value){this[xhrOnAbortSymbol]=value}get onerror(){return this[xhrOnErrorSymbol]}set onerror(value){this[xhrOnErrorSymbol]=value}get ontimeout(){return this[xhrOnTimeoutSymbol]}set ontimeout(value){this[xhrOnTimeoutSymbol]=value}get onloadend(){return this[xhrOnLoadEndSymbol]}set onloadend(value){this[xhrOnLoadEndSymbol]=value}}exports.XMLHttpRequestEventTarget={configurable:true,enumerable:true,value:XMLHttpRequestEventTarget,writable:true};class XMLHttpRequestUpload extends XMLHttpRequestEventTarget{constructor(){if(isSealed){throw new TypeError("Illegal constructor")}super()}}exports.XMLHttpRequestUpload={configurable:true,enumerable:true,value:XMLHttpRequestUpload,writable:true};class XMLHttpRequest extends XMLHttpRequestEventTarget{constructor(){super();isSealed=false;const xhrUpload=new XMLHttpRequestUpload;isSealed=true;Object.defineProperty(this,xhrDeferredHandleSymbol,{configurable:false,enumerable:false,value:null,writable:true});defineEvent(this,xhrOnReadyStateChangeSymbol);Object.defineProperty(this,xhrReadyStateSymbol,{configurable:false,enumerable:false,value:xhrUnsent,writable:true});Object.defineProperty(this,xhrTimeoutSymbol,{configurable:false,enumerable:false,value:0,writable:true});Object.defineProperty(this,xhrWithCredentialsSymbol,{configurable:false,enumerable:false,value:false,writable:true});Object.defineProperty(this,xhrUploadSymbol,{configurable:false,enumerable:false,value:xhrUpload,writable:false});Object.defineProperty(this,xhrResponseTypeSymbol,{configurable:false,enumerable:false,value:"",writable:true})}get onreadystatechange(){return this[xhrOnReadyStateChangeSymbol]}set onreadystatechange(value){this[xhrOnReadyStateChangeSymbol]=value}get readyState(){return this[xhrReadyStateSymbol]}open(method,url){switch(this[xhrReadyStateSymbol]){case xhrUnsent:case xhrDone:{changeReadyState(this,xhrOpened);break}}}setRequestHeader(name,value){}setTrustToken(trustToken){}get timeout(){return this[xhrTimeoutSymbol]}set timeout(value){this[xhrTimeoutSymbol]=value}get withCredentials(){return this[xhrWithCredentialsSymbol]}set withCredentials(value){switch(this[xhrReadyStateSymbol]){case xhrUnsent:case xhrOpened:{break}default:{throw new DOMException("Failed to set the 'withCredentials' property on 'XMLHttpRequest': The value may only be set if the object's state is UNSENT or OPENED.")}}this[xhrWithCredentialsSymbol]=!!value}get upload(){return this[xhrUploadSymbol]}send(){if(this[xhrReadyStateSymbol]===xhrOpened&&this[xhrDeferredHandleSymbol]===null){this[xhrDeferredHandleSymbol]=setTimeout(()=>{this[xhrDeferredHandleSymbol]=null;changeReadyState(this,xhrDone);this.dispatchEvent(new ProgressEvent("error"));this.dispatchEvent(new ProgressEvent("loadend"))},0)}else{throw new DOMException("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.")}}abort(){if(this[xhrReadyStateSymbol]===xhrOpened&&this[xhrDeferredHandleSymbol]!==null){clearTimeout(this[xhrDeferredHandleSymbol]);this[xhrDeferredHandleSymbol]=null;changeReadyState(this,xhrUnsent);this.dispatchEvent(new ProgressEvent("abort"));this.dispatchEvent(new ProgressEvent("loadend"))}}get responseURL(){return""}get status(){return 0}get statusText(){return""}getResponseHeader(name){return null}overrideMimeType(mime){}get responseType(){return this[xhrResponseTypeSymbol]}set responseType(value){switch(this[xhrReadyStateSymbol]){case xhrDone:{throw new DOMException("Failed to set the 'responseType' property on 'XMLHttpRequest': The response type cannot be set if the object's state is LOADING or DONE.")}}switch(value){case"":case"arraybuffer":case"blob":case"document":case"json":case"text":{this[xhrResponseTypeSymbol]=value;break}}}get response(){const responseType=this[xhrResponseTypeSymbol];return responseType===""||responseType==="text"?"":null}get responseText(){const responseType=this[xhrResponseTypeSymbol];if(responseType===""||responseType==="text"){return""}else{throw new DOMException("Failed to read the 'responseText' property from 'XMLHttpRequest': The value is only accessible if the object's 'responseType' is '' or 'text' (was 'arraybuffer').")}}get responseXML(){return null}}Object.defineProperty(XMLHttpRequest,"UNSENT",{configurable:false,enumerable:true,value:xhrUnsent});Object.defineProperty(XMLHttpRequest,"OPENED",{configurable:false,enumerable:true,value:xhrOpened});Object.defineProperty(XMLHttpRequest,"HEADERS_RECEIVED",{configurable:false,enumerable:true,value:xhrHeadersReceived});Object.defineProperty(XMLHttpRequest,"LOADING",{configurable:false,enumerable:true,value:xhrLoading});Object.defineProperty(XMLHttpRequest,"DONE",{configurable:false,enumerable:true,value:xhrDone});exports.XMLHttpRequest={configurable:true,enumerable:true,value:XMLHttpRequest,writable:true}})($___mock_dd2c7e7e2c9ba860);(function(){safelyCollectKeyweeEvent=$___var_7091d150067bf7ba;({}).constructor.defineProperty(safelyCollectKeyweeEvent,"name",{configurable:true,enumerable:false,value:"safelyCollectKeyweeEvent",writable:false});trackMethod=$___var_637e838065ed5b16;({}).constructor.defineProperty(trackMethod,"name",{configurable:true,enumerable:false,value:"trackMethod",writable:false});function $___var_7091d150067bf7ba(){if(!window.Keywee||!Keywee.getEventToSend)return{};var a={};try{a=Keywee.getEventToSend()}catch(b){a={}}return TAGX.Utils.isObject(a)?a:{}}function $___var_637e838065ed5b16(a){var b="PageView-ViewContent-Search-AddToCart-AddToWishlist-InitiateCheckout-AddPaymentInfo-Purchase-Lead-CompleteRegistration";return b.indexOf(a)>-1?"track":"trackCustom"}window.TAGX={setTaggerReady:function(){this.taggerReady=!0,this.EventProxy.tagsLoaded()}},TAGX.$=$,TAGX.$.domReady=TAGX.$(document).ready,!function(a,b){"use strict";"function"==typeof define&&define.amd?(b(a.ns_=a.ns_||{}),define("nyt_comscore_streaming",[],function(){return a.ns_})):"object"==typeof module&&module.exports?module.exports=b({}):b(a.ns_=a.ns_||{})}(this,function(a){"use strict";a.ns_=a;var b=b||{};b.indexOf=function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},b.forEach=function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}};var b=b||{};b.parseBoolean=function(a,b){return b=b||!1,a?"0"!=a:b},b.parseInteger=function(a,b){return null==a||isNaN(a)?b||0:parseInt(a)},b.parseLong=function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},b.toString=function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if(a instanceof Array)return a.join(",");var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b||a.toString()};var b=b||{};b.filter=function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},b.extend=function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a};var b=b||{};b.cloneObject=function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document||"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(){},populate:function(){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)};var b=b||{};b.getNamespace=function(){return a.ns_||a},b.uid=function(){var a=1;return function(){return+new Date+"_"+a++}}(),b.isEmpty=function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},b.isNotEmpty=function(a){return!this.isEmpty(a)},b.safeGet=function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},b.isTrue=function(a){return"undefined"!=typeof a&&("string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a)},b.regionMatches=function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},b.exists=function(a){return"undefined"!=typeof a&&null!=a},!function(){var a=[],c=!1,d=!0,e=1e3;b.onSystemClockJump=function(b,f){a.push(b),c||(c=!0,e=f||e,d=+new Date,setInterval(function(){var b=d+e,c=+new Date;d=c;var f=c-b;if(Math.abs(f)>e)for(var g=0;g<a.length;++g)a[g](f>0)},e))}}();var b=b||{};b.hasPageVisibilityAPISupport=function(){if("undefined"==typeof document)return!1;var a=!1;return"undefined"!=typeof document.hidden?a=!0:"undefined"!=typeof document.mozHidden?a=!0:"undefined"!=typeof document.msHidden?a=!0:"undefined"!=typeof document.webkitHidden&&(a=!0),function(){return a}}(),b.getPageVisibilityAPI=function(){if("undefined"==typeof document)return null;var a,b,c;"undefined"!=typeof document.hidden?(a="hidden",b="visibilitychange",c="visibilityState"):"undefined"!=typeof document.mozHidden?(a="mozHidden",b="mozvisibilitychange",c="mozVisibilityState"):"undefined"!=typeof document.msHidden?(a="msHidden",b="msvisibilitychange",c="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(a="webkitHidden",b="webkitvisibilitychange",c="webkitVisibilityState");var d={hidden:a,visibilityChange:b,state:c};return function(){return d}}(),b.isTabInBackground=function(){if("undefined"==typeof document)return null;var a=b.getPageVisibilityAPI();return function(){return document[a.hidden]}}(),b.getBrowserName=function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},b.getBrowserFullVersion=function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},b.browserAcceptsLargeURLs=function(){return"undefined"==typeof window||(null!==window.ActiveXObject,!0)},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.isWebSecure=function(){return"undefined"!=typeof document&&null!=document&&"s"===document.location.href.charAt(4)};var c=function(){var a=1e4;return function(b,c){function d(a){a=a||[];var c=[h,+new Date];return b&&c.push(b),a=Array.prototype.slice.call(a),c=c.concat(a)}function e(a){var b,d,e;if("boolean"==typeof c||!c)return!!c;if(e=a.join(" "),c instanceof Array&&c.length>0){for(b=0;b<c.length;++b)if(d=c[b],d instanceof RegExp&&d.test(e))return!0;return!1}if("object"==typeof c){var f=!1;if(c.hide instanceof Array)for(b=0;b<c.hide.length;++b)if(d=c.hide[b],d instanceof RegExp&&d.test(e)){f=!0;break}if(c.show instanceof Array)for(b=0;b<c.show.length;++b)if(d=c.show[b],d instanceof RegExp&&d.test(e))return!0;return!f&&!c.show}return!0}function f(b){var d=i.length;(d>a||c&&c.max&&d>c.max)&&(i=i.slice(-Math.floor(c.max/2)),i.push("Previous logs: "+d)),i.push(b)}var g=this,h="comScore",i=[];g.log=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.log&&e(a)&&console.log.apply(console,a)},g.warn=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.warn&&e(a)&&console.warn.apply(console,a)},g.error=function(){var a=d(arguments);f(a),"undefined"!=typeof console&&"function"==typeof console.error&&e(a)&&console.error.apply(console,a)},g.apiCall=function(a){for(var b=["API call to:",a],c=1;c<arguments.length;++c)b.push("arg"+c+":",arguments[c]);this.log.apply(this,b)},g.infoLog=function(){var a=["Trace log:"];a.push.apply(a,Array.prototype.slice.call(arguments)),this.log.apply(this,a)},g.deprecation=function(a,b){var c=["Deprecated API:",a,"is deprecated and will be eventually removed."];b&&c.push("Use",b,"instead."),this.warn.apply(this,c)},g.getLogHistory=function(){return i}}}();return a.StreamingAnalytics=a.StreamingAnalytics||function(){var a=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"==typeof Image)return void("function"==typeof setTimeout?b&&setTimeout(b,0):b&&b());var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a},e=function(a,b,c){"function"==typeof setTimeout?c&&setTimeout(function(){c(200)},0):c&&c(200)},f=function(){return{dir:function(){return null},append:function(){},write:function(){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:a,IO:f,onDataFetch:function(a){a()},getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getDisplayResolution:function(){return h.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return h.UNKNOWN_RESOLUTION},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnectionSecure:function(){return!1},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];b[c]=null===d||void 0===d?d:a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=b+"",b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)},b.stateToString=function(a){var b=H.InternalStates;for(var c in b)if(b.hasOwnProperty(c)&&b[c]==a)return c};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMINGANALYTICS_VERSION:"6.1.0.170130",MODEL_VERSION:"5.8",LOG_NAMESPACE:"STA",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:1e3,SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL:500,DEFAULT_ASSET_PLAYBACK_RATE:100,STANDARD_METADATA_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_st_ie","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},m=function(){function a(){function a(){f={},f.ns_st_cl="0",f.ns_st_pn="1",f.ns_st_tp="0",f.ns_st_cn="1",f.ns_st_skd="0",f.ns_st_ci="0",f.c3="*null",f.c4="*null",f.c6="*null",f.ns_st_st="*null",f.ns_st_pu="*null",f.ns_st_pr="*null",f.ns_st_ep="*null",f.ns_st_sn="*null",f.ns_st_en="*null",f.ns_st_ct="*null",g={},e=!1,d=!1,c=h.UNKNOWN_VALUE,i=!0,j=0,k=0/0,p=0,n=0,m=0/0,q=0,r=0/0,t=0,s=0,o=0,w=0/0,u=[],v=[],x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0/0,F=0,G=0,H=0,I=!1,J=0/0,N=!1,M=0,Q=0,K=0,L=0,O=0,P=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=!1,_=l.DEFAULT_ASSET_PLAYBACK_RATE}var c,d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab=this,bb=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return c},setHash:function(a){c=a},setPlaybackIntervalMergeTolerance:function(a){bb=a},getPlaybackIntervalMergeTolerance:function(){return bb},setInternalLabel:function(a,b){f[a]=b},getInternalLabel:function(a){return f[a]},hasInternalLabel:function(a){return null!=f[a]},setLabels:function(a){a&&b.extend(g,a)},getLabels:function(){return g},setLabel:function(a,b){g[a]=b},getLabel:function(a){return g[a]},hasLabel:function(a){return a in g},getClipNumber:function(){return parseInt(ab.getInternalLabel("ns_st_cn"))},setClipNumber:function(a){ab.setInternalLabel("ns_st_cn",a+"")},getPartNumber:function(){return parseInt(ab.hasLabel("ns_st_pn")?ab.getLabel("ns_st_pn"):ab.getInternalLabel("ns_st_pn"))},createLabels:function(a,c){var d=a||{},h=b.isEmpty(d.ns_st_pt)?ab.getPlaybackTime():parseInt(d.ns_st_pt);d.ns_st_pt=h+(isNaN(k)?0:c-k)+"",d.ns_st_dpt=h+(isNaN(k)?0:c-k)-n+"",d.ns_st_ipt=h+(isNaN(k)?0:c-k)-o+"";var i=b.isEmpty(d.ns_st_et)?ab.getElapsedTime():parseInt(d.ns_st_et);d.ns_st_et=i+(isNaN(r)?0:c-r)+"",d.ns_st_det=i+(isNaN(r)?0:c-r)-s+"";var j=b.isEmpty(d.ns_st_bt)?ab.getBufferingTime():parseInt(d.ns_st_bt);d.ns_st_bt=j+"",d.ns_st_dbt=j+(isNaN(E)?0:c-E)-F+"";for(var l,m=parseInt(d.ns_st_po),p=b.addNewPlaybackInterval(b.cloneObject(ab.getSegmentPlaybackIntervals()),0>_?m:w,0>_?w:m,bb),q=b.addNewPlaybackInterval(b.cloneObject(ab.getAssetPlaybackIntervals()),0>_?m:w,0>_?w:m,bb),t=0,u=0,v=0;v<p.length;v++)l=Math.abs(p[v].end-p[v].start),t+=l,l>u&&(u=l);var D=0,G=0;for(v=0,l;v<q.length;v++)l=Math.abs(q[v].end-q[v].start),D+=l,l>G&&(G=l);d.ns_st_upc=t+"",d.ns_st_dupc=t-x+"",d.ns_st_iupc=t-y+"",d.ns_st_iupc=t>y?t-y+"":"0",d.ns_st_lpc=u+"",d.ns_st_dlpc=u-z+"",d.ns_st_upa=D+"",d.ns_st_dupa=D-A+"",d.ns_st_iupa=D>B?D-B+"":"0",d.ns_st_lpa=G+"",d.ns_st_dlpa=G-C+"";var I=b.isEmpty(d.ns_st_pc)?ab.getPauses():parseInt(d.ns_st_pc);d.ns_st_pc=I+"",d.ns_st_dpc=I-S+"";var J=b.isEmpty(d.ns_st_skc)?ab.getSeeks():parseInt(d.ns_st_skc);d.ns_st_skc=J+"",d.ns_st_dskc=J-U+"";var K=b.isEmpty(d.ns_st_bc)?ab.getBuffers():parseInt(d.ns_st_bc);d.ns_st_bc=K+"",d.ns_st_dbc=K-H+"";var M=b.isEmpty(d.ns_st_skt)?ab.getSeekingTime():parseInt(d.ns_st_skt);d.ns_st_skt=M+"",d.ns_st_dskt=M-L+"";var N=b.isEmpty(d.ns_st_ska)?ab.getSeekingAmount():parseInt(d.ns_st_ska);return d.ns_st_ska=N+"",d.ns_st_dska=N-P+"",e&&(d.ns_st_spc=V+"",d.ns_st_apc=W+"",d.ns_st_sq=X+"",d.ns_st_asq=Y+""),d.ns_st_sc=e||0!=Z?Z+"":"1",d.ns_st_rt=_+"",b.extend(d,f,g),d},updateDeltaLabels:function(a){n=parseInt(a.ns_st_pt),s=parseInt(a.ns_st_et),F=parseInt(a.ns_st_bt),x=parseInt(a.ns_st_upc),z=parseInt(a.ns_st_lpc),A=parseInt(a.ns_st_upa),C=parseInt(a.ns_st_lpa),S=parseInt(a.ns_st_pc),U=parseInt(a.ns_st_skc),H=parseInt(a.ns_st_bc),L=parseInt(a.ns_st_skt),P=parseInt(a.ns_st_ska),ab.setSeekingDirection(0)},updateIndependentLabels:function(a){o=parseInt(a.ns_st_pt),y=parseInt(a.ns_st_upc),B=parseInt(a.ns_st_upa)},getVideoTrack:function(){return ab.getInternalLabel("ns_st_vt")},setVideoTrack:function(a){ab.setInternalLabel("ns_st_vt",a+"")},getAudioTrack:function(){return ab.getInternalLabel("ns_st_at")},setAudioTrack:function(a){ab.setInternalLabel("ns_st_at",a+"")},getSubtitleTrack:function(){return ab.getInternalLabel("ns_st_tt")},setSubtitleTrack:function(a){ab.setInternalLabel("ns_st_tt",a+"")},getCDN:function(){return ab.getInternalLabel("ns_st_cdn")},setCDN:function(a){ab.setInternalLabel("ns_st_cdn",a+"")},getSegmentPlaybackIntervals:function(){return u},setAssetPlaybackIntervals:function(a){u=a},getAssetPlaybackIntervals:function(){return v},incrementPauses:function(){R++},incrementSeeks:function(){T++},incrementPlayCounter:function(){X++},getPlayCounter:function(){return X},getBufferingTime:function(){return D},setBufferingTime:function(a){D=a},addBufferingTime:function(a){if(!isNaN(E)){var b=ab.getBufferingTime();b+=a-E,ab.setBufferingTime(b),E=0/0}},setPlaybackStartPosition:function(a){w=parseInt(a)},getPlaybackStartPosition:function(){return w},addInterval:function(a){isNaN(w)||isNaN(a)||(u=b.addNewPlaybackInterval(u,0>_?a:w,0>_?w:a,bb),v=b.addNewPlaybackInterval(v,0>_?a:w,0>_?w:a,bb),w=0/0)},getElapsedTime:function(){return q},setElapsedTime:function(a){q=a},addElapsedTime:function(a){if(!isNaN(r)){var b=ab.getElapsedTime();b+=a-r,ab.setElapsedTime(b),r=0/0}},getElapsedTimestamp:function(){return r},setElapsedTimestamp:function(a){r=a},addPlaybackTime:function(a){if(!isNaN(k)){var b=ab.getPlaybackTime();b+=a-k,ab.setPlaybackTime(b),k=0/0}},getPlaybackTime:function(){return j},getExpectedPlaybackPosition:function(a){return isNaN(k)?p:p+Math.floor((a-k)*_/100)},setPlaybackTimeOffset:function(a){p=a},getPlaybackTimeOffset:function(){return p},setPlaybackTime:function(a){j=a},getPlaybackTimestamp:function(){return k},setPlaybackTimestamp:function(a){k=a},setPreviousPlaybackTime:function(a){n=a},setPreviousPlaybackTimestamp:function(a){m=a},getBufferingTimestamp:function(){return E},setBufferingTimestamp:function(a){E=a},getPauses:function(){return R},setPauses:function(a){R=a},getSeeks:function(){return T},setSeeks:function(a){T=a},setSeeking:function(a){I=a},isSeeking:function(){return I},setCollectingSeekingTime:function(a){N=a},isCollectingSeekingTime:function(){return N},setAssetStarted:function(a){d=a},isAssetStarted:function(){return d},setPlaybackStarted:function(a){e=a},isPlaybackStarted:function(){return e},setSeekingTimestamp:function(a){J=a},getSeekingTimestamp:function(){return J},addSeekingTime:function(a){if(!isNaN(J)){var b=ab.getSeekingTime();b+=a-J,ab.setSeekingTime(b),J=0/0}},getSeekingTime:function(){return K},setSeekingTime:function(a){K=a},setSeekingTimeBeforeEnd:function(a){Q=a},getSeekingTimeBeforeEnd:function(){return Q},setSeekStartPosition:function(a){M=a},getSeekStartPosition:function(){return M},setSeekingAmount:function(a){O=a},getSeekingAmount:function(){return O},addSeekingAmount:function(a){var b=ab.getSeekingAmount();b+=Math.abs(a-M),ab.setSeekingAmount(b);var c;M==a?c=0:M>a?c=-1:a>M&&(c=1),ab.setSeekingDirection(c),M=0},getSeekingDirection:function(){return parseInt(ab.getInternalLabel("ns_st_skd"))},setSeekingDirection:function(a){ab.setInternalLabel("ns_st_skd",a+"")},resetAssetLifecycleLabels:function(){j=0,n=0,o=0,D=0,F=0,G=0,H=0,R=0,S=0,X=0,v=[],A=0,B=0,C=0,q=0,s=0,K=0,L=0,O=0,P=0,T=0,U=0},incrementSegmentPlaybackCounter:function(){V++},incrementAssetLoadCounter:function(){Z++},incrementAssetPlaybackCounter:function(){W++},getPreviousUniquePlaybackInterval:function(){return x},setPreviousUniquePlaybackInterval:function(a){x=a},getPreviousEventIndependentUniquePlaybackInterval:function(){return y},setPreviousEventIndependentUniquePlaybackInterval:function(a){y=a},setPreviousLongestPlaybackInterval:function(a){z=a},getPreviousLongestPlaybackInterval:function(){return z},resetAssetPlaybackIntervals:function(){v=[],A=0,B=0,C=0},setSegmentPlaybackCounter:function(a){V=a},setAssetLoadCounter:function(a){Z=a},setAssetPlaybackCounter:function(a){W=a},setLowestPartNumberPlayed:function(a){t=a},getSegmentPlaybackCounter:function(){return V},getAssetLoadCounter:function(){return Z},getAssetPlaybackCounter:function(){return W},getLowestPartNumberPlayed:function(){return t},getBuffers:function(){return G},incrementBufferCount:function(){G++},getPreviousBufferingTime:function(){return F},setPlaySequenceCounter:function(a){Y=a},incrementPlaySequenceCounter:function(){Y++},getPlaySequenceCounter:function(){return Y},isPlaybackSessionLooping:function(){return $},setPlaybackSessionLooping:function(a){$=a},enableAutoCalculatePositions:function(a){i=!!a},isAutoCalculatePositionsEnabled:function(){return i},getPlaybackRate:function(){return _},setPlaybackRate:function(a){_=a}}),a()}return a.resetAsset=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(a){function c(){d=new m,h={},h.ns_st_id=+new Date+"",k={},e=0/0,f=0,g=0/0,o={},p=0,n=!1,q=!1,r=0,t=0,s=0,u=1,v=0,w=[]}var d,e,f,g,h,k,n,o,p,q,r,s,t,u,v,w,x=this;b.extend(this,{resetAsset:function(){var a=d;d=new m,m.resetAsset(a,d)},hashExists:function(a){return null!=o[a]},storeHash:function(a){o[a]={}},removeHash:function(a){delete o[a]},storeAssetPlaybackCounters:function(){for(var a in o)if(o.hasOwnProperty(a)&&o[a].clipNumber===d.getClipNumber()){b.extend(o[a],{segmentPlaybackCounter:d.getSegmentPlaybackCounter(),assetLoadCounter:d.getAssetLoadCounter(),assetPlaybackCounter:d.getAssetPlaybackCounter(),lowestPartNumberPlayed:d.getLowestPartNumberPlayed(),seeking:d.isSeeking(),seekingTimeBeforeEnd:d.getSeekingTimeBeforeEnd(),seekingStartPosition:d.getSeekStartPosition(),segmentPlaybackIntervals:d.getSegmentPlaybackIntervals(),videoTrack:d.getVideoTrack(),audioTrack:d.getAudioTrack(),subtitleTrack:d.getSubtitleTrack(),cdn:d.getCDN(),playSequenceCounter:d.getPlaySequenceCounter(),previousUniquePlaybackInterval:d.getPreviousUniquePlaybackInterval(),previousEventIndependentUniquePlaybackInterval:d.getPreviousEventIndependentUniquePlaybackInterval(),previousLongestPlaybackInterval:d.getPreviousLongestPlaybackInterval()});break}},getStoredAssetRegisters:function(a){return o[a]},getClipNumber:function(a){return o[a].clipNumber},getMaxClipNumber:function(){return p},storeClipNumber:function(a,b){o[a].clipNumber=b,b>p&&(p=b)},setLabels:function(a){null!=a&&b.extend(k,a)},getLabels:function(){return k},setLabel:function(a,b){var c={};c[a]=b,x.setLabels(c)},getLabel:function(a){return k[a]},getAsset:function(){return d},addInternalErrorFlag:function(a){for(var b=0;b<w.length;++b)if(w[b]==a)return;w.push(a)},createLabels:function(c,e){var f=c||{},i=b.isEmpty(f.ns_st_pa)?x.getPlaybackTime():parseInt(f.ns_st_pa);return f.ns_st_pa=i+(isNaN(g)?0:e-g)+"",f.ns_st_pp=t+"",f.ns_st_sp=u+"",f.ns_st_bp=v+"",q||(f.ns_st_pb=null!=f.ns_st_pb?f.ns_st_pb:"1"),d.isPlaybackStarted()&&(f.ns_st_ppc=r+"",f.ns_st_psq=s+""),w.length>0&&(f.ns_st_ie=(f.ns_st_ie?f.ns_st_ie+";":"")+w.join(";")),b.extend(f,h,k),a.getPlaybackSession().getAsset().createLabels(f,e),f},incrementPlayCounter:function(){u++},incrementPauses:function(){t++},addPlaybackTime:function(a){if(!isNaN(g)){var b=x.getPlaybackTime();b+=a-g,x.setPlaybackTime(b),g=0/0}},addBufferingTime:function(a){if(!isNaN(e)){var b=x.getBufferingTime();b+=a-e,x.setBufferingTime(b),e=0/0}},getBufferingTime:function(){return v},setBufferingTime:function(a){v=a},getPlaybackTime:function(){return f},setBufferingTimestamp:function(a){e=a},getBufferingTimestamp:function(){return e},setPlaybackTime:function(a){f=a},setPlaybackTimestamp:function(a){g=a},getPlaybackTimestamp:function(){return g},getPauses:function(){return t},setPauses:function(a){t=a},isPlaybackSessionStarted:function(){return n},setPlaybackSessionStarted:function(a){n=a},getPlaybackCounter:function(){return r},incrementPlaybackCounter:function(){r++},setFirstEventSent:function(a){q=a},setPlaySequenceCounter:function(a){s=a},incrementPlaySequenceCounter:function(){s++},getPlaybackSessionID:function(){return h.ns_st_id},setAsset:function(c,d){a.getLogging().apiCall("setAsset",c,d),c=b.jsonObjectToStringDictionary(c);var e=a.getStateMachine().getCurrentState();if(e!=j.IDLE){a.getLogging().infoLog("Ending the current Clip. It was in state:",b.stateToString(e));var f={};a.getStaCore().newEvent(i.END,b.fixEventTime(f),f)}var g="",h=0;if(null!=c.ns_st_cn)g=c.ns_st_cn;else for(var k=0;k<l.STANDARD_METADATA_LABELS.length;k++)c[l.STANDARD_METADATA_LABELS[k]]&&(g+=l.STANDARD_METADATA_LABELS[k]+":"+c[l.STANDARD_METADATA_LABELS[k]]+";");var m=x,n=m.getAsset();n.isAssetStarted()?(m.hashExists(n.getHash())||(m.storeHash(n.getHash()),m.storeClipNumber(n.getHash(),n.getClipNumber())),m.storeAssetPlaybackCounters(),h=m.hashExists(g)?m.getClipNumber(g):b.exists(c.ns_st_cn)?parseInt(c.ns_st_cn):m.getMaxClipNumber()+1):h=m.hashExists(g)?m.getClipNumber(g):n.getClipNumber(),m.resetAsset(),n=m.getAsset(),n.setHash(g),n.setClipNumber(h),n.setLabels(c);var o=m.getStoredAssetRegisters(g);o&&(n.setAssetStarted(!0),n.setSegmentPlaybackCounter(o.segmentPlaybackCounter),n.setAssetLoadCounter(o.assetLoadCounter),n.setAssetPlaybackCounter(o.assetPlaybackCounter),n.setLowestPartNumberPlayed(o.lowestPartNumberPlayed),n.setSeeking(o.seeking),n.setSeekingTimeBeforeEnd(o.seekingTimeBeforeEnd),n.setSeekStartPosition(o.seekingStartPosition),n.setAssetPlaybackIntervals(o.segmentPlaybackIntervals),o.videoTrack&&n.setVideoTrack(o.videoTrack),o.audioTrack&&n.setAudioTrack(o.audioTrack),o.subtitleTrack&&n.setSubtitleTrack(o.subtitleTrack),o.cdn&&n.setCDN(o.cdn),n.setPlaySequenceCounter(o.playSequenceCounter),n.setPreviousUniquePlaybackInterval(o.previousUniquePlaybackInterval),n.setPreviousEventIndependentUniquePlaybackInterval(o.previousEventIndependentUniquePlaybackInterval),n.setPreviousLongestPlaybackInterval(o.previousLongestPlaybackInterval)),n.incrementAssetLoadCounter(),n.isAssetStarted()&&d&&m.incrementPlayCounter(),d&&(m.setPlaySequenceCounter(0),n.setPlaybackSessionLooping(!0)),!b.exists(c.ns_st_tp)&&b.exists(c.ns_st_ad)&&b.isNotEmpty(c.ns_st_ad)&&"0"!==c.ns_st_ad&&n.setInternalLabel("ns_st_tp","1")}}),c()}return a.resetPlaybackSession=function(a,b,c){for(var d=b.getAsset(),e=b.getLabels(),f={},g=0;c&&g<c.length;g++)e.hasOwnProperty(c[g])&&(f[c[g]]=e[c[g]]);a.getPlaybackSession().setLabels(f),m.resetAsset(d,a.getPlaybackSession().getAsset(),c)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getStaCore().getLiveEndpointURL();if(a.getAppCore()){if(a.getStaCore().isProperlyInitialized()){var e=a.getStaCore().getExports().et;if("function"==typeof a.getAppCore().getMeasurementDispatcher){var g=a.getAppCore().getMeasurementDispatcher();g.send(e.HIDDEN,c,d)}else{var h=a.getStaCore().getExports().am,i=h.newApplicationMeasurement(a.getAppCore(),e.HIDDEN,c,d);a.getAppCore().getQueue().offer(i)}}}else d&&a.getStaCore().getPlatformAPI().httpGet(a.getStaCore().prepareUrl(d,c))}var e,f,g=this,h=[];b.extend(this,{newEvent:function(a){for(var b=0;b<h.length;++b)h[b](a.eventLabels);d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},addMeasurementListener:function(a){"function"==typeof a&&h.push(a)},removeMeasurementListener:function(a){for(var b=0/0,c=0;c<h.length;++c)if(h[c]==a){b=c;break}isNaN(b)||h.splice(b,1)},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_hc=a.getHeartbeat().getCount()+"";var e=a.getStaCore().createLabels(i.HEARTBEAT,c,d);a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),g=0,j.resume()}function e(){null!=f&&(a.getStaCore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,j=this,k=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){k=a},getInterval:function(a){var b=0;if(null!=k)for(var c=0;c<k.length;c++){var d=k[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},getIntervals:function(){return k},resume:function(){e();var b=j.getInterval(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getStaCore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=j.getInterval(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()));g=b-(a.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-a.getPlaybackSession().getAsset().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);a.getStaCore().newPseudoEvent(i.KEEPALIVE,d,c),g.start()}function e(){null!=f&&(a.getStaCore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{start:function(){e(),f=a.getStaCore().getPlatformAPI().setTimeout(d,h)},stop:e,setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(){function a(){e=j.IDLE,d=null,c=0/0}var c,d,e,f=this;b.extend(f,{eventTypeToState:function(a){if(e==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(e==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(e==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(e==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(e==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(e==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(e==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(e==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(e==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(e==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(e==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(e==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(e==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return e},newEvent:function(a,b){var g=f.eventTypeToState(a);e!=g&&(d=e,e=g,c=b)},getPreviousState:function(){return d},getLastStateChangeTimestamp:function(){return c}}),a()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onBufferWhenSeekingOrPaused:function(b){a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onBufferStopOrOnPlayWhenBufferingDuringPlayback:function(b,c){var d=parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getHeartbeat().resume(),a.getKeepAlive().start()}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStop:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onPause:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){parseInt(c.ns_st_po),a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var d=a.getStaCore().createLabels(i.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(d.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(d.eventLabels),a.getEventManager().newEvent(d),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po),a.getStaCore().stopPausedOnBufferingTimer(),a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getStaCore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(i.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onPause:function(b,c){parseInt(c.ns_st_po),a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var d=a.getStaCore().createLabels(i.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(d.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(d.eventLabels),a.getEventManager().newEvent(d)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getStaCore().stopPausedOnBufferingTimer(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses(),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b){a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().setPlaybackSessionStarted(!0),a.getPlaybackSession().getAsset().setAssetStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().setSeekingTime(a.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addBufferingTime(c),a.getPlaybackSession().getAsset().addBufferingTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1));var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().isCollectingSeekingTime()||(a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPause:function(b){a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().addBufferingTime(b),a.getPlaybackSession().getAsset().addBufferingTime(b),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()?a.getPlaybackSession().getAsset().setSeekingTimestamp(b):a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().isSeeking()||(a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().setPlaybackSessionStarted(!0),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onBuffer:function(){a.getPlaybackSession().setBufferingTimestamp(eventTimestamp),a.getPlaybackSession().getAsset().setBufferingTimestamp(eventTimestamp)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(c),a.getPlaybackSession().getAsset().addPlaybackTime(c),a.getPlaybackSession().getAsset().addElapsedTime(c),a.getPlaybackSession().getAsset().addInterval(e);var f=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(f.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(f.eventLabels),a.getEventManager().newEvent(f),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onBuffer:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getStaCore().isPauseOnBufferingEnabled()&&a.getStaCore().startPausedOnBufferingTimer(b,c),a.getPlaybackSession().getAsset().incrementBufferCount(),a.getPlaybackSession().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().setBufferingTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getPlaybackSession().getAsset().incrementSeeks(),a.getPlaybackSession().getAsset().setSeeking(!0),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),a.getPlaybackSession().getAsset().setSeekStartPosition(d),a.getPlaybackSession().getAsset().setSeekingTimestamp(b),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(i.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getKeepAlive().stop(),a.getPlaybackSession().addPlaybackTime(b),a.getPlaybackSession().getAsset().addPlaybackTime(b),a.getPlaybackSession().getAsset().addInterval(d),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses();var e=a.getStaCore().createLabels(i.PAUSE,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPause:function(b){a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),(a.getPlaybackSession().getAsset().isPlaybackSessionLooping()||0==a.getPlaybackSession().getPlaybackCounter())&&(a.getPlaybackSession().incrementPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().setPlaybackStarted(!0),a.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==a.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||a.getPlaybackSession().getAsset().getPartNumber()<=a.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(a.getPlaybackSession().getAsset().setLowestPartNumberPlayed(a.getPlaybackSession().getAsset().getPartNumber()),a.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),a.getPlaybackSession().getAsset().setPlaySequenceCounter(0),a.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b){a.getPlaybackSession().incrementPauses(),a.getPlaybackSession().getAsset().incrementPauses(),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b)}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po),a.getStaCore().resetHeartbeat(),a.getKeepAlive().stop(),a.getPlaybackSession().getAsset().addElapsedTime(c);var e=a.getStaCore().createLabels(i.END,d,c);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e),a.getPlaybackSession().getAsset().isSeeking()&&a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(c-a.getPlaybackSession().getAsset().getSeekingTimestamp()),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().storeAssetPlaybackCounters(),a.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),a.getPlaybackSession().getAsset().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getStaCore().resetPlaybackSession()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaybackSession().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),a.getPlaybackSession().getAsset().incrementPlayCounter(),a.getPlaybackSession().getAsset().isSeeking()&&(a.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(a.getPlaybackSession().getAsset().addSeekingTime(b),a.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),a.getPlaybackSession().getAsset().addSeekingAmount(d),a.getPlaybackSession().getAsset().setSeeking(!1)),a.getPlaybackSession().getAsset().addElapsedTime(b),a.getPlaybackSession().getAsset().setElapsedTimestamp(b),a.getPlaybackSession().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackTimestamp(b),a.getPlaybackSession().getAsset().setPlaybackStartPosition(d),a.getStaCore().isLoadingTimeSent()||(c.ns_st_lt=a.getStaCore().getLoadTimeOffset()+b-a.getStaCore().getInitTimestamp()+"",a.getStaCore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().start();var e=a.getStaCore().createLabels(i.PLAY,c,b);a.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),a.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),a.getEventManager().newEvent(e)}})}}(),F=function(){return function(a){function d(){if(F=new G(eb),b.getNamespace().comScore?(fb=b.getNamespace().comScore.exports,F.setAppCore(fb.c())):F.setAppCore(null),a.publisherId){eb.setLabel("c2",a.publisherId);var d=a.secure;!d&&F.getAppCore()?d=F.getAppCore().isSecure():!d&&b.isBrowser()&&(d=b.isWebSecure());var e=(d?"https://sb":"http://b")+".scorecardresearch.com/p?c1=2";eb.setLiveEndpointURL(e)}a.liveEndpointURL&&eb.setLiveEndpointURL(a.liveEndpointURL),F.setKeepAlive(new q(F)),F.setHeartbeat(new p(F)),F.setEventManager(new o(F)),F.setStateMachine(new r),F.setLogging(new c(l.LOG_NAMESPACE,a.debug)),F.setPlaybackSession(new n(F)),H=new x(F),I=new y(F),J=new A(F),K=new B(F),L=new t(F),M=new v(F),N=new w(F),O=new u(F),P=new z(F),Q=new C(F),R=new D(F),S=new E(F),T=new s(F),U=!1,V=0,W=+new Date,Y=!0,$=!1,ab=[],a.systemClockJumpDetection&&eb.enableSystemClockJumpsDetection(parseInt(a.systemClockJumpDetectionInterval))}function e(a){var b=F.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function f(a,b,c){var d=F.getStateMachine().getCurrentState();a==i.AD_SKIP&&!c.hasOwnProperty("ns_st_ui")&&e(a)?c.ns_st_ui="skip":a==i.SEEK_START&&!c.hasOwnProperty("ns_st_ui")&&e(a)&&(c.ns_st_ui="seek"),d==j.IDLE?a==i.BUFFER?H.onBuffer(b,c):a==i.SEEK_START?H.onSeekStart(b,c):a==i.PLAY&&H.onPlay(b,c):d==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,c):a==i.SEEK_START?J.onSeekStart(b,c):a==i.PLAY?J.onPlay(b,c):a==i.BUFFER&&J.onBuffer(b,c):d==j.PLAYING?a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,c):a==i.BUFFER?K.onBuffer(b,c):a==i.SEEK_START?K.onSeekStart(b,c):a==i.PAUSE&&K.onPause(b,c):d==j.PAUSED?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,c):a==i.PLAY?I.onPlay(b,c):a==i.BUFFER?T.onBufferWhenSeekingOrPaused(b,c):a==i.SEEK_START&&T.onSeekStartWhenPausedOrBufferingDuringPause(b,c):d==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,c):a==i.BUFFER_STOP?L.onBufferStop(b,c):a==i.SEEK_START?L.onSeekStart(b,c):a==i.PAUSE?L.onPause(b,c):a==i.PLAY&&L.onPlay(b,c):d==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?M.onPauseOnBuffering(b,c):a==i.BUFFER_STOP?T.onBufferStopOrOnPlayWhenBufferingDuringPlayback(b,c):a==i.END||a==i.AD_SKIP?M.onEndOrAdSkip(b,c):a==i.SEEK_START?M.onSeekStart(b,c):a==i.PAUSE?M.onPause(b,c):a==i.PLAY&&T.onBufferStopOrOnPlayWhenBufferingDuringPlayback(b,c):d==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?N.onEndOrAdSkip(b,c):a==i.PAUSE?N.onPause(b,c):a==i.PLAY?N.onPlay(b,c):a==i.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,c):d==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?O.onEndAndSkip(b,c):a==i.PAUSE?O.onPause(b,c):a==i.PLAY?O.onPlay(b,c):a==i.SEEK_START?T.onSeekStartWhenPausedOrBufferingDuringPause(b,c):a==i.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,c):d==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?Q.onEndOrAdSkip(b,c):a==i.PAUSE?Q.onPause(b,c):a==i.PLAY?Q.onPlay(b,c):a==i.BUFFER&&T.onBufferWhenSeekingOrPaused(b,c):d==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?S.onEndOrAdSkip(b,c):a==i.PLAY?S.onPlay(b,c):a==i.BUFFER?T.onBufferWhenSeekingOrPaused(b,c):a==i.PAUSE&&T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,c):d==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?R.onPause(b,c):a==i.BUFFER?T.onBufferWhenSeekingOrPaused(b,c):a==i.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==i.END||a==i.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==i.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):d==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?P.onEndOrAdSkip(b,c):a==i.BUFFER_STOP?P.onBufferStop(b,c):a==i.SEEK_START?P.onSeekStart(b,c):a==i.PAUSE?P.onPause(b,c):a==i.PLAY&&P.onPlay(b,c):d==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?T.onBufferWhenSeekingOrPaused(b,c):a==i.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==i.PAUSE?T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,c):a==i.END||a==i.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,c):a==i.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,c)),e(a)&&F.getPlaybackSession().setFirstEventSent(!0)}function m(a,c){for(var d,e=kb.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(lb.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(lb.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(lb.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb=this,fb={},gb=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,hb=l.THROTTLING_DELAY,ib={},jb=!1;b.extend(eb,{getConfiguration:function(){return a||{}},enableSystemClockJumpsDetection:function(a){(a<l.SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL||!a)&&(a=l.SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL),b.onSystemClockJump(function(a){db=a,jb=!0},a)},createLabels:function(a,c,d){var e=!1;if(a==i.HEARTBEAT){var f=isNaN(X)?W:X;X=d,(f>d||jb)&&(e=!0,jb=!1,f>d?(F.getPlaybackSession().addInternalErrorFlag("1"),F.getLogging().infoLog("System clock jump detected","to the far past")):db?(F.getPlaybackSession().addInternalErrorFlag("3"),F.getLogging().infoLog("System clock jump detected","to the future")):(F.getPlaybackSession().addInternalErrorFlag("2"),F.getLogging().infoLog("System clock jump detected","to the near past")),d=f)}var g={};if("undefined"!=typeof document){var h=document;g.c7=h.URL,g.c8=h.title,g.c9=h.referrer}return g.ns_ts=+new Date+"",g.ns_st_ev=i.toString(a),g.ns_st_mp=l.DEFAULT_PLAYERNAME,g.ns_st_mv=l.STREAMINGANALYTICS_VERSION,g.ns_st_ub="0",g.ns_st_br="0",g.ns_st_pn="1",g.ns_st_tp="0",g.ns_st_it=k.toString(k.SINGLE_CLIP),g.ns_st_sv=l.STREAMINGANALYTICS_VERSION,g.ns_st_smv=l.MODEL_VERSION,g.ns_type="hidden",g.ns_st_ec=F.getEventManager().getEventCounter()+"",g.ns_st_ki=F.getKeepAlive().getInterval()+"",g.ns_st_po=F.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?F.getPlaybackSession().getAsset().getExpectedPlaybackPosition(d)+"":cb+"",cb=parseInt(g.ns_st_po),b.extend(g,eb.getLabels()),F.getPlaybackSession().createLabels(g,d),b.extend(g,c),e&&(F.getPlaybackSession().setPlaybackTimestamp(X-parseInt(g.ns_st_pt)),F.getPlaybackSession().getAsset().setPlaybackTimestamp(X-parseInt(g.ns_st_pt)),F.getPlaybackSession().getAsset().setElapsedTimestamp(X-parseInt(g.ns_st_et)),F.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&F.getPlaybackSession().getAsset().setBufferingTimestamp(X-parseInt(g.ns_st_bp))),{eventType:a,eventLabels:g}},newEvent:function(a,c,d,e){eb.stopDelayedTransitionTimer();var g=F.getStateMachine().getCurrentState(),h=F.getStateMachine().eventTypeToState(a);if(null==h||h==g)return void F.getLogging().infoLog("Ignored event:",i.toString(a),"during state",b.stateToString(g),d);if(!(!eb.isThrottlingEnabled()||g!=j.PLAYING&&g!=j.PAUSED||h!=j.PLAYING&&h!=j.PAUSED||e)){F.getLogging().infoLog("Throttled event:",i.toString(a),"during state",b.stateToString(g),d,eb.getThrottlingDelay(),"ms");var k=function(a,b,d){return function(){eb.newEvent(a,c,d,!0)}}(a,h,d);return void(_=F.getPlatformAPI().setTimeout(k,eb.getThrottlingDelay()))}var l=isNaN(X)?W:X;X=c;var m=!1;(l>c||jb)&&(m=!0,jb=!1,l>c?(F.getPlaybackSession().addInternalErrorFlag("1"),F.getLogging().infoLog("System clock jump detected","to the far past")):db?(F.getPlaybackSession().addInternalErrorFlag("3"),F.getLogging().infoLog("System clock jump detected","to the future")):(F.getPlaybackSession().addInternalErrorFlag("2"),F.getLogging().infoLog("System clock jump detected","to the near past")),c=l),d.ns_st_po||(d.ns_st_po=F.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?F.getStateMachine().getCurrentState()==j.IDLE?"0":F.getPlaybackSession().getAsset().getExpectedPlaybackPosition(c)+"":cb+""),cb=parseInt(d.ns_st_po),F.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(d.ns_st_po)),f(a,c,d);var n=0;isNaN(F.getStateMachine().getLastStateChangeTimestamp())||(n=c-F.getStateMachine().getLastStateChangeTimestamp()),F.getStateMachine().newEvent(a,c),m&&(h!=j.IDLE&&h!=j.PLAYBACK_NOT_STARTED&&h!=j.SEEKING_BEFORE_PLAYBACK&&h!=j.BUFFERING_BEFORE_PLAYBACK&&F.getPlaybackSession().getAsset().setElapsedTimestamp(X),h!=j.BUFFERING_BEFORE_PLAYBACK&&h!=j.BUFFERING_DURING_PAUSE&&h!=j.BUFFERING_DURING_PLAYBACK&&h!=j.BUFFERING_DURING_SEEKING&&h!=j.PAUSED_DURING_BUFFERING||(F.getPlaybackSession().setBufferingTimestamp(X),F.getPlaybackSession().getAsset().setBufferingTimestamp(X)),h!=j.PLAYING&&h!=j.BUFFERING_DURING_PLAYBACK||(F.getPlaybackSession().setPlaybackTimestamp(X),F.getPlaybackSession().getAsset().setPlaybackTimestamp(X)),h!=j.SEEKING_BEFORE_PLAYBACK&&h!=j.SEEKING_DURING_BUFFERING&&h!=j.SEEKING_DURING_PAUSE&&h!=j.SEEKING_DURING_PLAYBACK&&h!=j.BUFFERING_DURING_SEEKING||F.getPlaybackSession().getAsset().setSeekingTimestamp(X)),F.getLogging().log("Transition from",b.stateToString(g),"to",b.stateToString(h),"due to event:",i.toString(a));for(var o=0,p=ab.length;p>o;o++)ab[o](g,h,d,n)},newPseudoEvent:function(a,c,d){if((a==i.LOAD||a==i.ENGAGE)&&F.getStateMachine().getCurrentState()!=j.IDLE)return void F.getLogging().infoLog("Ignored pseudo-event:",i.toString(a),"during state",b.stateToString(F.getStateMachine().getCurrentState()),d);a==i.ERROR&&null==d.ns_st_er&&(d.ns_st_er=h.UNKNOWN_VALUE),a==i.TRANSFER&&null==d.ns_st_rp&&(d.ns_st_rp=h.UNKNOWN_VALUE);var e,f,g,k,l=!0,m=!1;switch(a){case i.BIT_RATE:e="ns_st_br",f="ns_st_pbr";break;case i.PLAYBACK_RATE:e="ns_st_rt",f="ns_st_prt";break;case i.VOLUME:e="ns_st_vo",f="ns_st_pvo";break;case i.WINDOW_STATE:e="ns_st_ws",f="ns_st_pws";break;case i.AUDIO:e="ns_st_at",f="ns_st_pat";break;case i.VIDEO:e="ns_st_vt",f="ns_st_pvt";break;case i.SUBS:e="ns_st_tt",f="ns_st_ptt";break;case i.CDN:e="ns_st_cdn",f="ns_st_pcdn";break;default:l=!1}if(l&&e in d)switch(k=d[e],a){case i.BIT_RATE:case i.VOLUME:case i.WINDOW_STATE:e in ib&&(g=ib[e],d[f]=g,m=k==g+""),ib[e]=d[e];break;case i.AUDIO:case i.VIDEO:case i.SUBS:case i.CDN:F.getPlaybackSession().getAsset().hasInternalLabel(e)&&(g=F.getPlaybackSession().getAsset().getInternalLabel(e),d[f]=g,m=k==g+""),F.getPlaybackSession().getAsset().setInternalLabel(e,d[e]);break;case i.PLAYBACK_RATE:g=F.getPlaybackSession().getAsset().getPlaybackRate(),d[f]=g+""}if(l&&F.getStateMachine().getCurrentState()!=j.PLAYING&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||l&&m)return a==i.PLAYBACK_RATE&&F.getPlaybackSession().getAsset().setPlaybackRate(parseInt(d.ns_st_rt)),void F.getLogging().infoLog("No measurement send for the pseudo-event:",i.toString(a),"during state",b.stateToString(F.getStateMachine().getCurrentState()),d);var n=isNaN(X)?W:X;X=c;var o=!1;(n>c||jb)&&(o=!0,jb=!1,n>c?(F.getPlaybackSession().addInternalErrorFlag("1"),F.getLogging().infoLog("System clock jump detected","to the far past")):db?(F.getPlaybackSession().addInternalErrorFlag("3"),F.getLogging().infoLog("System clock jump detected","to the future")):(F.getPlaybackSession().addInternalErrorFlag("2"),F.getLogging().infoLog("System clock jump detected","to the near past")),c=n),d.ns_st_po||(d.ns_st_po=F.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?F.getPlaybackSession().getAsset().getExpectedPlaybackPosition(c)+"":cb+""),cb=parseInt(d.ns_st_po),F.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(d.ns_st_po)),F.getStateMachine().getCurrentState()!=j.IDLE&&F.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&F.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(F.getPlaybackSession().getAsset().addElapsedTime(c),F.getPlaybackSession().getAsset().setElapsedTimestamp(c)),F.getStateMachine().getCurrentState()!=j.PLAYING&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(F.getPlaybackSession().addPlaybackTime(c),F.getPlaybackSession().setPlaybackTimestamp(c),F.getPlaybackSession().getAsset().addPlaybackTime(c),F.getPlaybackSession().getAsset().setPlaybackTimestamp(c),F.getPlaybackSession().getAsset().addInterval(parseInt(d.ns_st_po)),F.getPlaybackSession().getAsset().setPlaybackStartPosition(parseInt(d.ns_st_po))),F.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(F.getPlaybackSession().addBufferingTime(c),F.getPlaybackSession().setBufferingTimestamp(c),F.getPlaybackSession().getAsset().addBufferingTime(c),F.getPlaybackSession().getAsset().setBufferingTimestamp(c));var p=eb.createLabels(a,d,c);F.getPlaybackSession().getAsset().updateDeltaLabels(p.eventLabels),F.getPlaybackSession().getAsset().updateIndependentLabels(p.eventLabels),F.getEventManager().newEvent(p),a==i.PLAYBACK_RATE&&F.getPlaybackSession().getAsset().setPlaybackRate(parseInt(d.ns_st_rt)),o&&(F.getStateMachine().getCurrentState()!=j.PLAYING&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(F.getPlaybackSession().setPlaybackTimestamp(X),F.getPlaybackSession().getAsset().setPlaybackTimestamp(X)),F.getStateMachine().getCurrentState()!=j.IDLE&&F.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&F.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&F.getPlaybackSession().getAsset().setElapsedTimestamp(X),F.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING&&F.getStateMachine().getCurrentState()!=j.PAUSED_DURING_BUFFERING||(F.getPlaybackSession().setBufferingTimestamp(X),F.getPlaybackSession().getAsset().setBufferingTimestamp(X)),F.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.SEEKING_DURING_BUFFERING&&F.getStateMachine().getCurrentState()!=j.SEEKING_DURING_PAUSE&&F.getStateMachine().getCurrentState()!=j.SEEKING_DURING_PLAYBACK&&F.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||F.getPlaybackSession().getAsset().setSeekingTimestamp(X))},getState:function(){return F.getStateMachine().getCurrentState()},addListener:function(a){ab.push(a)},removeListener:function(a){ab.splice(b.indexOf(a,ab),1)},getLabel:function(a){return ib[a]},getLabels:function(){return ib},setLabel:function(a,b){null==b?delete ib[a]:ib[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&eb.setLabel(b,a[b])},getPlatformAPI:function(){return F.getAppCore()?F.getAppCore().getPlatformAPI():g},getExports:function(){return fb},isProperlyInitialized:function(){var a=F.getAppCore().getAppContext(),b=F.getAppCore().getSalt(),c=F.getAppCore().getPixelURL();return a&&c&&b},setThrottlingDelay:function(a){hb=a},getThrottlingDelay:function(){return hb},isThrottlingEnabled:function(){return $},setThrottlingEnabled:function(a){$=a},isLoadingTimeSent:function(){return U},setLoadingTimeSent:function(a){U=a},getLoadTimeOffset:function(){return V},setLoadTimeOffset:function(a){V=a},getInitTimestamp:function(){return W},setPauseOnBufferingInterval:function(a){gb=a},getPauseOnBufferingInterval:function(){return gb},isPauseOnBufferingEnabled:function(){return Y},setPauseOnBufferingEnabled:function(a){Y=a},startPausedOnBufferingTimer:function(a,c){eb.stopPausedOnBufferingTimer(),Z=eb.getPlatformAPI().setTimeout(function(){var a={},d=b.fixEventTime(a),e=parseInt(c.ns_st_po);a.ns_st_po=e+"",eb.newEvent(i.PAUSE_ON_BUFFERING,d,a)},gb)},stopPausedOnBufferingTimer:function(){null!=Z&&(eb.getPlatformAPI().clearTimeout(Z),Z=null)},stopDelayedTransitionTimer:function(){_&&(eb.getPlatformAPI().clearTimeout(_),_=null)},setLiveEndpointURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?eb.setLabel(h[0],b(h[1])):1==h.length&&eb.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return bb=a},getLiveEndpointURL:function(){return bb?bb:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?bb=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?bb=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getStaSM:function(){return F},resetPlaybackSession:function(a){var b=F.getPlaybackSession();F.setPlaybackSession(new n(F)),n.resetPlaybackSession(F,b,a)},resetHeartbeat:function(){F.getHeartbeat().pause();var a=F.getHeartbeat().getIntervals();F.setHeartbeat(new p(F)),F.getHeartbeat().setIntervals(a)}});var kb,lb;b.isBrowser()?(kb=window,lb=document):(kb={},lb={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(eb,{prepareUrl:m}),d()}}(),G=function(){return function(a){var c,d,e,f,g,h,i,j=this;b.extend(j,{getAppCore:function(){return c},getStaCore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaybackSession:function(){return h},getLogging:function(){return i},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaybackSession:function(a){h=a},setLogging:function(a){i=a}})}}(),H=function(){return function(a){function c(){a=b.extend({},a),f=new F(a),f.getStaSM().getLogging().log("New StreamingAnalytics instance with configuration",a)}function d(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:0/0,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.parseInteger(d,0)+""),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?f.newEvent(a,e,c):f.newPseudoEvent(a,e,c)}}function e(){h&&f.getStaSM().getStateMachine().getCurrentState()!=j.IDLE&&g.notifyEnd()}var f,g=this,h=!0;b.extend(this,{isProperlyInitialized:function(){return f.isProperlyInitialized()},reset:function(a){d(i.END);var b=f;b.getStaSM().getKeepAlive().stop(),b.getStaSM().getHeartbeat().pause(),f=new F(b.getConfiguration()),n.resetPlaybackSession(f.getStaSM(),b.getStaSM().getPlaybackSession(),a)},setPauseOnBufferingInterval:function(a){f.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return f.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){f.getStaSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return f.getStaSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){f.getStaSM().getHeartbeat().setIntervals(a)},notifyPlay:function(a,b){f.getStaSM().getLogging().apiCall("notifyPlay",a,b),d(i.PLAY,a,b)},notifyPause:function(a,b){f.getStaSM().getLogging().apiCall("notifyPause",a,b),d(i.PAUSE,a,b)},notifyEnd:function(a,b){f.getStaSM().getLogging().apiCall("notifyEnd",a,b),d(i.END,a,b)},notifyBufferStart:function(a,b){f.getStaSM().getLogging().apiCall("notifyBufferStart",a,b),d(i.BUFFER,a,b)},notifyBufferStop:function(a,b){f.getStaSM().getLogging().apiCall("notifyBufferStop",a,b),d(i.BUFFER_STOP,a,b)},notifyLoad:function(a,b){f.getStaSM().getLogging().apiCall("notifyLoad",a,b),d(i.LOAD,a,b)},notifyEngage:function(a,b){f.getStaSM().getLogging().apiCall("notifyEngage",a,b),d(i.ENGAGE,a,b)},notifySeekStart:function(a,b){f.getStaSM().getLogging().apiCall("notifySeekStart",a,b),d(i.SEEK_START,a,b)},notifySkipAd:function(a,b){f.getStaSM().getLogging().apiCall("notifySkipAd",a,b),d(i.AD_SKIP,a,b)},notifyCallToAction:function(a,b){f.getStaSM().getLogging().apiCall("notifyCallToAction",a,b),d(i.CTA,a,b)},notifyError:function(a,b){f.getStaSM().getLogging().apiCall("notifyError",a,b),d(i.ERROR,a,b)},notifyTransferPlayback:function(a,b){f.getStaSM().getLogging().apiCall("notifyTransferPlayback",a,b),d(i.TRANSFER,a,b)},notifyDrmFail:function(a,b){f.getStaSM().getLogging().apiCall("notifyDrmFail",a,b),d(i.DRM_FAILED,a,b)},notifyDrmApprove:function(a,b){f.getStaSM().getLogging().apiCall("notifyDrmApprove",a,b),d(i.DRM_APPROVED,a,b)},notifyDrmDeny:function(a,b){f.getStaSM().getLogging().apiCall("notifyDrmDeny",a,b),d(i.DRM_DENIED,a,b)},notifyChangeBitrate:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeBitrate",a,b,c),null!=a){var e=c||{};e.ns_st_br=a+"",d(i.BIT_RATE,e,b)}},notifyChangePlaybackRate:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangePlaybackRate",a,b,c),null!=a){var e=c||{};e.ns_st_rt=a+"",d(i.PLAYBACK_RATE,e,b)}},notifyChangeVolume:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeVolume",a,b,c),null!=a){var e=c||{};e.ns_st_vo=a+"",d(i.VOLUME,e,b)}},notifyChangeWindowState:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeWindowState",a,b,c),null!=a){var e=c||{};e.ns_st_ws=a+"",d(i.WINDOW_STATE,e,b)}},notifyChangeAudioTrack:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeAudioTrack",a,b,c),null!=a){var e=c||{};e.ns_st_at=a+"",d(i.AUDIO,e,b)}},notifyChangeVideoTrack:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeVideoTrack",a,b,c),null!=a){var e=c||{};e.ns_st_vt=a+"",d(i.VIDEO,e,b)}},notifyChangeSubtitleTrack:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeSubtitleTrack",a,b,c),null!=a){var e=c||{};e.ns_st_tt=a+"",d(i.SUBS,e,b)}},notifyChangeCdn:function(a,b,c){if(f.getStaSM().getLogging().apiCall("notifyChangeCdn",a,b,c),null!=a){var e=c||{};e.ns_st_cdn=a+"",d(i.CDN,e,b)}},notifyCustomEvent:function(a,b){f.getStaSM().getLogging().apiCall("notifyCustomEvent",a,b),d(i.CUSTOM,a,b)},getLabels:function(){return f.getLabels()},getState:function(){return f.getStaSM().getStateMachine().getCurrentState()},setLabels:function(a){f.setLabels(a)},getLabel:function(a){return f.getLabel(a)},setLabel:function(a,b){f.setLabel(a,b)},getLoadTimeOffset:function(){return f.getLoadTimeOffset()},setLoadTimeOffset:function(a){f.setLoadTimeOffset(a)},setLiveEndpointURL:function(a){return f.setLiveEndpointURL(a)},getLiveEndpointURL:function(){return f.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return f.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){f.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return f.isThrottlingEnabled()},setThrottlingEnabled:function(a){f.setThrottlingEnabled(a)},setThrottlingDelay:function(a){f.setThrottlingDelay(a)},getThrottlingDelay:function(){return f.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){f.getStaSM().getPlaybackSession().getAsset().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return f.getStaSM().getPlaybackSession().getAsset().getPlaybackIntervalMergeTolerance()},createPlaybackSession:function(a){f.getStaSM().getLogging().apiCall("createPlaybackSession",a),a=b.jsonObjectToStringDictionary(a);var c=f.getStaSM().getStateMachine().getCurrentState();c!=j.IDLE&&(f.getStaSM().getLogging().infoLog("Ending the current Clip. It was in state:",b.stateToString(c)),g.notifyEnd()),f.getStaSM().getPlaybackSession().isPlaybackSessionStarted()&&f.resetPlaybackSession(),f.getStaSM().getPlaybackSession().setLabels(a)},getVersion:function(){return l.STREAMINGANALYTICS_VERSION},addListener:function(a){f.addListener(a)},removeListener:function(a){f.removeListener(a)},addMeasurementListener:function(a){f.getStaSM().getEventManager().addMeasurementListener(a)},removeMeasurementListener:function(a){f.getStaSM().getEventManager().removeMeasurementListener(a)},getPlaybackSession:function(){return f.getStaSM().getPlaybackSession()},setExitEndEventEnabled:function(a){h=a},isExitEndEventEnabled:function(){return h},getPlatformAPI:function(){return f.getPlatformAPI()},_getLogHistory:function(){return f.getStaSM().getLogging().getLogHistory()}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",e),window.addEventListener("unload",e)):window.attachEvent&&(window.attachEvent("onbeforeunload",e),window.attachEvent("onunload",e))),c()}}();return H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H.Constants=l,H}(),a.ReducedRequirementsStreamingAnalytics=a.ReducedRequirementsStreamingAnalytics||function(){var d={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},e={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},f=a.StreamingAnalytics,g=a.StreamingAnalytics.InternalStates||null,h=a.StreamingAnalytics.ImplementationType||null,i=null!=a.StreamingAnalytics.InternalStates&&null!=a.StreamingAnalytics.ImplementationType,j=a.StreamingAnalytics.Constants,k=function(a){function k(){i&&(b.exists(a)&&(a.customerC2||a.publisherId)||b.getNamespace().comScore?t=new f(a):w.error("Cannot instantiate StreamingAnalytics","The property publisherId was not provided (or incorrectly provided) in the StreamingAnalytics configuration."),t&&t.setLabel("ns_st_it",h.toString(h.REDUCED)))}function l(a){for(var b in j.STANDARD_METADATA_LABELS)if(j.STANDARD_METADATA_LABELS.hasOwnProperty(b)&&!m(j.STANDARD_METADATA_LABELS[b],q,a))return!1;return!0}function m(a,c,d){return!!(b.exists(a)&&b.exists(c)&&b.exists(d)&&(c.hasOwnProperty(a)&&d.hasOwnProperty(a)&&c[a]===d[a]||!c.hasOwnProperty(a)&&!d.hasOwnProperty(a)))}function n(a){t.getPlaybackSession().setAsset(a),q=a,t.notifyPlay()}function o(a){var b=a||{};b.ns_st_ad="1",b.ns_st_an=++r+"",t.getPlaybackSession().setAsset(b),t.notifyPlay(),s=!1}function p(a,b){v==u.None&&(v=b),s&&v==b&&l(a)?(t.getPlaybackSession().getAsset().setLabels(a),t.getState()!=g.PLAYING&&t.notifyPlay()):n(a),s=!0,v=b}var q=null,r=0,s=!1,t=null,u={None:0,AudioContent:1,VideoContent:2},v=u.None,w=new c("TTSTA",(a||{}).debug);b.extend(this,{playVideoAdvertisement:function(a,c){if(t){w.apiCall("playVideoAdvertisement",a,c);var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:w.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),c!=e.LinearLive&&c!=e.BrandedOnDemandLive||(d.ns_st_li="1"),a&&b.extend(d,a),o(d)}},playAudioAdvertisement:function(a,c){if(t){w.apiCall("playAudioAdvertisement",a,c);var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:w.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),c!=e.LinearLive&&c!=e.BrandedOnDemandLive||(d.ns_st_li="1"),a&&b.extend(d,a),o(d)}},playVideoContentPart:function(a,c){if(t){w.apiCall("playVideoContentPart",a,c);var e={ns_st_ct:"vc"};c?e.ns_st_ct="vc"+c:w.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),c!=d.Live&&c!=d.UserGeneratedLive||(e.ns_st_li="1"),a&&b.extend(e,a),p(e,u.VideoContent)}},playAudioContentPart:function(a,c){if(t){w.apiCall("playAudioContentPart",a,c);var e={ns_st_ct:"ac"};c?e.ns_st_ct="ac"+c:w.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),c!=d.Live&&c!=d.UserGeneratedLive||(e.ns_st_li="1"),a&&b.extend(e,a),p(e,u.AudioContent)}},stop:function(){t&&(w.apiCall("stop"),t.notifyPause())}}),k()};return k.ContentType=d,k.AdType=e,k}(),a}),function(a,b){function c(){}function d(a,b){if(a){"object"==typeof a&&(a=[].slice.call(a));for(var c=0,d=a.length;d>c;c++)b.call(a,a[c],c)}}function e(a,c){var d=Object.prototype.toString.call(c).slice(8,-1);return c!==b&&null!==c&&d===a}function f(a){return e("Function",a)}function g(a){a=a||c,a._done||(a(),a._done=1)}function h(a){var b={};if("object"==typeof a)for(var c in a)a[c]&&(b={name:c,url:a[c]});else b=a.split("/"),b=b[b.length-1],c=b.indexOf("?"),b={name:-1!==c?b.substring(0,c):b,url:a};return(a=t[b.name])&&a.url===b.url?a:t[b.name]=b}function i(a){var b,a=a||t;for(b in a)if(a.hasOwnProperty(b)&&a[b].state!==z)return!1;return!0}function j(a,b){b=b||c,a.state===z?b():a.state===y?w.ready(a.name,b):a.state===x?a.onpreload.push(function(){j(a,b)}):(a.state=y,k(a,function(){a.state=z,b(),d(s[a.name],function(a){g(a)}),o&&i()&&d(s.ALL,function(a){g(a)})}))}function k(b,d){var e,d=d||c;/\.css[^\.]*$/.test(b.url)?(e=p.createElement("link"),e.type="text/"+(b.type||"css"),e.rel="stylesheet",e.href=b.url):(e=p.createElement("script"),e.type="text/"+(b.type||"javascript"),e.src=b.url),e.onload=e.onreadystatechange=function(b){b=b||a.event,("load"===b.type||/loaded|complete/.test(e.readyState)&&(!p.documentMode||9>p.documentMode))&&(e.onload=e.onreadystatechange=e.onerror=null,d())},e.onerror=function(){e.onload=e.onreadystatechange=e.onerror=null,d()},e.async=!1,e.defer=!1;var f=p.head||p.getElementsByTagName("head")[0];f.insertBefore(e,f.lastChild)}function l(){p.body?o||(o=!0,d(q,function(a){g(a)})):(a.clearTimeout(w.readyTimeout),w.readyTimeout=a.setTimeout(l,50))}function m(){p.addEventListener?(p.removeEventListener("DOMContentLoaded",m,!1),l()):"complete"===p.readyState&&(p.detachEvent("onreadystatechange",m),l())}var n,o,p=a.document,q=[],r=[],s={},t={},u="async"in p.createElement("script")||"MozAppearance"in p.documentElement.style||a.opera,v=a.head_conf&&a.head_conf.head||"head",w=a[v]=a[v]||function(){w.ready.apply(null,arguments)},x=1,y=3,z=4;if(w.load=u?function(){var a=arguments,b=a[a.length-1],c={};return f(b)||(b=null),d(a,function(d,e){d!==b&&(d=h(d),c[d.name]=d,j(d,b&&e===a.length-2?function(){i(c)&&g(b)}:null))}),w}:function(){var a=arguments,c=[].slice.call(a,1),e=c[0];return n?(e?(d(c,function(a){if(!f(a)){var c=h(a);c.state===b&&(c.state=x,c.onpreload=[],k({url:c.url,type:"cache"},function(){c.state=2,d(c.onpreload,function(a){a.call()})}))}}),j(h(a[0]),f(e)?e:function(){w.load.apply(null,c)})):j(h(a[0])),w):(r.push(function(){w.load.apply(null,a)}),w)},w.js=w.load,w.test=function(a,b,d,f){return a="object"==typeof a?a:{test:a,success:b?e("Array",b)?b:[b]:!1,failure:d?e("Array",d)?d:[d]:!1,callback:f||c},(b=!!a.test)&&a.success?(a.success.push(a.callback),w.load.apply(null,a.success)):!b&&a.failure?(a.failure.push(a.callback),w.load.apply(null,a.failure)):f(),w},w.ready=function(a,b){if(a===p)return o?g(b):q.push(b),w;if(f(a)&&(b=a,a="ALL"),"string"!=typeof a||!f(b))return w;var c=t[a];return c&&c.state===z||"ALL"===a&&i()&&o?(g(b),w):((c=s[a])?c.push(b):s[a]=[b],w)},w.ready(p,function(){i()&&d(s.ALL,function(a){g(a)}),w.feature&&w.feature("domloaded",!0)}),"complete"===p.readyState)l();else if(p.addEventListener)p.addEventListener("DOMContentLoaded",m,!1),a.addEventListener("load",l,!1);else{p.attachEvent("onreadystatechange",m),a.attachEvent("onload",l);var A=!1;try{A=null==a.frameElement&&p.documentElement}catch(B){}A&&A.doScroll&&function C(){if(!o){try{A.doScroll("left")}catch(b){return a.clearTimeout(w.readyTimeout),void(w.readyTimeout=a.setTimeout(C,50))}l()}}()}setTimeout(function(){n=!0,d(r,function(a){a()})},300)}(window),TAGX.Utils=function(){"use strict";var a=window.head,b={txpcn:"tagx-p"},c=function(a,b){var c=new RegExp(a+"=([il]{1}).([^&]+)").exec(b);if(c&&c.length>=3)switch(c[1]){case"i":return parseInt(c[2],10);case"l":return TAGX.$(c[2].split(".").slice(1)).map(function(a){return parseInt(a,10)})}return null};return b.Ops=function(){var a={};return a.and=function(){var a=Array.prototype.slice.call(arguments),b=0,c=this,d=function(c){var d=!1;return function(e){d||(d=!0,e?(b+=1,b===a.length&&c(!0)):c(!1))}};return function(b){var e;for(e=0;e<a.length;e+=1)a[e].call(c,d(b))}},a.or=function(){var a=Array.prototype.slice.call(arguments),b=0,c=this,d=function(c){var d=!1;return function(e){d||(d=!0,e?c(!0):(b+=1,b===a.length&&c(!1)))}};return function(b){var e;for(e=0;e<a.length;e+=1)a[e].call(c,d(b))}},a.not=function(a){var b=this;return function(c){var d=!1;a.call(b,function(a){d||(d=!0,c(!a))})}},a.eq=function(a,b,c){this.tagger.get(a,function(a){c(a===b)})},a.ne=function(a,b,c){this.tagger.get(a,function(a){c(a!==b)})},a.startsWith=function(a,b,c){this.tagger.get(a,function(a){"string"!=typeof a&&(a=(a||"").toString()),c(a.substring(0,b.length)===b)})},a.matches=function(a,b,c){this.tagger.get(a,function(a){if("string"!=typeof a)a=(a||"").toString();else if("string"!=typeof b)return void c(!1);c(-1!==a.search(new RegExp(b)))})},a.on=function(a,b,c){var d=this;this.tagger.get(a,function(a){"function"==typeof a&&a.call(d,b,c)})},a.at=function(a,b,c){var d;for(d=0;d<b.length;d++){if(null===a||"undefined"==typeof a)return c;if(a=Object.prototype.valueOf.call(a),!(b[d]in a))return c;a=a[b[d]]}return a},a}(),b.addMetaTag=function(a,b){var c,d=TAGX.$('[name="'+a+'"]');if(d.length>0&&(c=d[0].content),!c||""===c&&""!==b){var e=document.createElement("meta");e.id=a,e.name=a,e.content=b,document.getElementsByTagName("head").item(0).appendChild(e)}},b.getMetaTag=function(a){var b=TAGX.$('[name="'+a+'"]');return b.length>0?b[0].content:""},b.isEmptyValue=function(a){return"undefined"==typeof a||null===a||""===a},b.getValue=function(a,c,d){var e=arguments.length,f=a,g="",h=!1;return 2===e?h=c:3===e&&(g=c,h=d),b.isEmptyValue(f)?b.isEmptyValue(g)?h===!0?"null":"":g.toLowerCase?g.toLowerCase():g:"object"==typeof f?f instanceof Array?f.join("|").toLowerCase():b.stringifyJson(f):f.toLowerCase?f.toLowerCase():f},b.mapToQs=function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c+=(c?"&":"")+b+"="+encodeURIComponent(a[b]));return c},b.QsTomap=function(a){for(var b=(a?a:location.search).replace("?","").split("&"),c={},d=0;d<b.length;d++){var e=b[d];c[e.split("=")[0]]=e.split("=")[1]}return c},b.includeFile=function(b,c,d,e,f){if(-1!==b.indexOf("https"))if(e)null!==a&&a.js(b,function(){f&&""!==f&&TAGX.$(TAGX).trigger(f)});else{var g=document.createElement("script");g.setAttribute("type","text/javascript"),g.setAttribute("async",c===!0),g.setAttribute("src",b),d||(d="body"),document[d].appendChild(g)}},b.getCookie=function(a){var b=document.cookie?document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"):null;return b?decodeURI(b[2]):null},b.replaceQSValue=function(a,b,c){var d=new RegExp("([?|&])"+b+"=.*?(&|$)","i"),e=-1!==a.indexOf("?")?"&":"?";return a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c},b.jsonObjToDCSparams=function(a,b){if("object"==typeof a){var c,d=[],e=b||"DCSext.";for(c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&(d.push(e+""+c),d.push(a[c]));return d}return a},b.stringifyJson=JSON?JSON.stringify:function(a){var c=typeof a;if("object"!==c||null===a)return"string"===c&&(a='"'+a+'"'),String(a);var d,e,f=[],g=a&&a.constructor===Array;for(d in a)a.hasOwnProperty(d)===!0&&(e=a[d],c=typeof e,"string"===c?e='"'+e+'"':"object"===c&&null!==e&&(e=b.stringifyJson(e)),f.push((g?"":'"'+d+'":')+String(e)));return(g?"[":"{")+String(f)+(g?"]":"}")},b.getCanonicalUrl=function(){var a=location.href,b=TAGX.$("link[rel=canonical]");return 1===b.length&&"object"==typeof b[0]&&"string"==typeof b[0].href&&(a=b[0].href),a},b.copyObj=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},b.mergeObjects=function(a,c,d){var e;for(e in c)c.hasOwnProperty(e)&&(b.isEmptyValue(c[e])||!b.isEmptyValue(a[e])&&d===!0||(a[e]=c[e]))},b.trackClicks=function(){TAGX.$(document).on("mousedown",function(a){var c=TAGX.$(a.target),d={a:!0,button:!0,span:!0,input:!0};try{if("undefined"!=typeof d[a.target.tagName.toLowerCase()]){var e={eText:c.html(),offset:c.offset(),pDatumId:NYTD.pageEventTracker?NYTD.pageEventTracker.getDatumId():null};""!==a.target.id&&"undefined"!==a.target.id&&(e.eId=a.target.id),""!==a.target.className&&"undefined"!==a.target.className&&(e.eClasses=a.target.className);var f=b.stringifyJson(e),g=b.getCookie(b.txpcn);if(g){var h=new Date,i=h.setTime(h.getTime()+31536e6);document.cookie=b.txpcn+"="+b.replaceQSValue(g,"augRef",f)+"; path=/; domain=.nytimes.com; expires="+i}localStorage&&localStorage.setItem("augRef",f)}}catch(j){}})},b.wordCountSize=function(a){return 100>a?"BLURB_Under_100":400>a?"SUPER_SHORT_100_399":800>a?"SHORT_400_799":1200>a?"MEDIUM_800_1199":1600>a?"LONG_1200_1600":"HEAVE_Over_1600"},b.getMeterValue=function(a,d){var e,f,g,h;if(d="boolean"==typeof d?d:!0,("string"==typeof a||"object"==typeof a&&a instanceof Array)&&(e=b.getCookie("nyt-m"))){for(a="string"==typeof a?[a]:a,f={},g=0;g<a.length;g++){h=a[g];var i=c(h,e);null===i&&d||(f[h]=i)}return f}return null},b.sendGA=function(a){var c=b.Ops.at,d=c(TAGX,["config","GoogleAnalytics"]),e=c(d,["tracker"],"ga"),f=c(d,["createOptions","name"],"");""!==f&&(f+=".");var g=function(a){var d=b.copyObj({},c(a,["hit"],{})),e=c(a,["nonInteraction"]);"boolean"==typeof e&&(d.nonInteraction=e);var f=c(a,["customDimensions"],{}),g=0;for(var h in f)f.hasOwnProperty(h)&&(d["dimension"+g+"Key"]=h,d["dimension"+g+"Value"]=f[h],g++);var i=c(a,["customMetrics"],{}),j=0;for(var k in i)i.hasOwnProperty(k)&&(d["metric"+j+"Key"]=k,d["metric"+j+"Value"]=i[k],j++);return b.copyObj(d,c(a,["customDimensions"],{})),b.copyObj(d,c(a,["customMetrics"],{})),d};window.dataLayer=window.dataLayer||[],window.dataLayer.push({data:{hit:null}}),window.dataLayer.push({event:"gaEvent",data:{hit:g(a)}}),d&&"function"==typeof window[e]&&window[e](f+"send",g(a))},b.redactEmailAddressesFromQueryString=function(a){return a&&"string"==typeof a?a.split("&").map(function(a){return a.replace(/email=.+(@|%40).+\..+/,"email=email_block")}).join("&"):a},b.isObject=function(a){var b="object"==typeof a&&null!==a;return b&&!(a instanceof Array)},b.encodeString=function(a){for(var b=2166136261,c=b,d=0;d<a.length;++d)c^=a.charCodeAt(d),c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24);return c>>>0},b}(),TAGX.EventProxy=function(){"use strict";var a,b,c=function(){},d=TAGX.$(TAGX),e=TAGX.Utils,f=e.Ops.at,g=function(a){var b={};return b.assetUrl=a.assetURl?a.assetURl:e.getCanonicalUrl(),b.url=a.url?a.url:location.href,b.referrer=document.referrer,b.subject="module-interactions",delete a.url,delete a.assetURl,b.moduleData=TAGX.Utils.stringifyJson(a),b},h=function(){return!0},i=[],j=!0,k=function(){if(b&&window.clearInterval(b),i&&i.length>0)for(;a=i.shift();)a.eventName&&a.eventData&&TAGX.EventProxy.trigger(a.eventName,a.eventData,a.eventType?a.eventType:"")},l=function(a,b,c){return"boolean"==typeof a[b]?a[b]:c},m=function(a,b){return"function"==typeof a?a:"function"==typeof b?b:void 0},n=function(){this.whitelist=this.whitelist.concat(f(TAGX,["config","GTM","eventWhitelist"],[]))},o=function(a,b){window.console.log(e.copyObj({event:a},b))},p=function(){var a,b=f(TAGX,["config","GoogleAnalytics"]);b?(this.globalObj=f(b,["tracker"],"ga"),a=f(b,["createOptions","name"],""),""!==a&&(a+="."),this.trackerName=a,this.whitelist=this.whitelist.concat(f(b,["eventWhitelist"],[]))):this.enabled=!1},q=function(a){var b=e.copyObj({},f(a,["hit"],{})),c=f(a,["nonInteraction"]);"boolean"==typeof c&&(b.nonInteraction=c);var d=f(a,["customDimensions"],{}),g=0;for(var h in d)d.hasOwnProperty(h)&&(b["dimension"+g+"Key"]=h,b["dimension"+g+"Value"]=d[h],g++);var i=f(a,["customMetrics"],{}),j=0;for(var k in i)i.hasOwnProperty(k)&&(b["metric"+j+"Key"]=k,b["metric"+j+"Value"]=i[k],j++);return e.copyObj(b,f(a,["customDimensions"],{})),e.copyObj(b,f(a,["customMetrics"],{})),b},r=function(a,b){window.dataLayer=window.dataLayer||[],window.dataLayer.push({data:{hit:null}}),window.dataLayer.push({event:"gaEvent",data:{hit:q(b)}}),"function"==typeof window[this.globalObj]&&window[this.globalObj](this.trackerName+"send",q(b))},s=function(a,b,d,e,f){this.name=a,b=b||{},this.enabled=l(b,"enabled",!0),this.whitelist=b.whitelist||[],this.triggerFunc=m(d,c),this.whitelistFunc=m(f),this.initFunc=m(e,c)};s.prototype.appendWhitelist=function(a){this.whitelist=this.whitelist.concat(a)},s.prototype.setWhitelist=function(a){this.whitelist=a},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.init=function(){"function"==typeof this.initFunc&&this.initFunc()},s.prototype.isWhitelisted=function(a,b,c){return this.whitelist&&-1!==this.whitelist.indexOf(a)?!0:"function"==typeof this.whitelistFunc?this.whitelistFunc(a,b,c):!1},s.prototype.trigger=function(a,b,c){var d;this.enabled&&(d=this.isWhitelisted(a,b,c),d&&"function"==typeof this.triggerFunc&&(this.triggerFunc(a,b,c),b.consumed=b.consumed?b.consumed+1:1))};var t={GA:new s("GA",{whitelist:[]},r,p),GTM:new s("GTM",{whitelist:[]},o,n)},u=function(a,b,c){("undefined"==typeof t[a]||c===!0)&&(t[a]=new s(a,b))},v=function(a){delete t[a]},w=function(a){return t[a]},x=function(a,b,c){Object.keys(t).forEach(function(d){t[d]instanceof s&&t[d].trigger(a,b,c)}),!b.consumed},y=function(){return Object.keys(t)},z=function(){Object.keys(t).forEach(function(a){t[a]instanceof s&&t[a].init()})};return window.addEventListener("message",function(a){a&&a.origin&&/\.nytimes\.com(:[\d]+)?$/.test(a.origin)&&a.data&&"NYT:TAGX:EventProxy:trigger"===a.data.type&&window.TAGX.EventProxy.trigger.apply(window.TAGX.EventProxy,a.data.args)},!1),{on:function(a,b){d.on(a,function(a,c){b(c||a)})},one:function(a,b){d.one(a,function(a,c){b(c||a)})},off:function(a){d.off(a)},trigger:function(a,c,f){var l=window.dataLayer;if(h()===!1)return i.push({eventName:a,eventData:c,eventType:f}),void(j&&(j=!1,b=window.setInterval(function(){h()===!0&&k()},250)));a=a.replace(/\s+/g,"-"),c.proxyEventName=a,c.proxyEventType=f,x(a,c,f),d.trigger(a,c),l&&(l.push({eventData:null}),l.push({event:a,eventData:c}));var m,n,o,p,q,r;if("string"==typeof f?n=[f]:"object"==typeof f&&f instanceof Array&&(n=f),"object"==typeof n&&n instanceof Array)for(var s=0;s<n.length;s++){var t=n[s];0===t.indexOf("tagx-")?(m=e.copyObj({},c),m["et-event-name"]=t,d.trigger(t,m),l&&l.push({event:t,eventData:m})):(m=e.copyObj({},c),o=g(m),p="module-impression",r=m.action?m.action.toLowerCase():null,q=m.module?m.module.toLowerCase():null,f=t?t.toLowerCase():r,m.eventtimestamp=(new Date).getTime(),"impression"===f?(d.trigger(p,m),l&&l.push({event:p,eventData:o})):"pageview"===f||"page-view"===f?(o.subject="page",o.referrer=location.href,d.trigger("track-page-view",o),l&&l.push({event:"track-page-view",eventData:o})):"interaction"===f||null!==q?"page"===q?(p="page-interaction",d.trigger(p,m),l&&l.push({event:p,eventData:m})):(p="module-interaction",d.trigger(p,o),l&&l.push({event:p,eventData:o})):(o.subject="bi-proxy-data",p="bi-proxy-data",d.trigger(p,o),l&&l.push({event:p,eventData:o})))}},addAnalyticTarget:u,getAnalyticTarget:w,removeAnalyticTarget:v,listAnalyticsTargets:y,tagsLoaded:z}}(),TAGX.Globals={},TAGX.Globals.Dependency=function(a,b){"use strict";var c,d=this,e=!1,f=b.name||"",g="",h=function(){},i="function"==typeof b.getter?b.getter:h,j=b.eventHandler;this.getName=function(){return f},this.getValue=function(){return g},this.init=function(){g=i(),b.eventName&&"function"==typeof j&&(TAGX.EventProxy.on(b.eventName,function(a){c&&clearTimeout(c),j(a,d)}),"number"==typeof b.timeout&&(c=setTimeout(function(){c=0,TAGX.EventProxy.off(b.eventName),b.eventHandler({timeout_reached:!0},d)},b.timeout)))},this.fullfill=function(b){e||(e=!0,b&&(g=b),a&&"function"==typeof a.fire&&a.fire())},this.isFullfilled=function(){return e}},TAGX.GlobalTag=function(a){"use strict";var b,c=this,d=!1,e=[],f=[];this.hasTagInitialized=!1;var g=function(a){var b=typeof a;d?"function"===b?a():"string"===b&&TAGX.EventProxy.trigger(a,{}):("function"===b||"string"===b)&&f.push(a)},h=function(){for(;f.length>0;)g(f.pop())};return b=this.name=a.name||"unknown_global",this.instant=a.instant||!1,a&&a.dependencies instanceof Array&&(e=a.dependencies.filter(function(a){return a.rule?a.rule():!0}).map(function(a){return new TAGX.Globals.Dependency(this,a)}.bind(this))),this.fire=function(){this.tagFired()},this.init=function(a){this._postInit()},this._postInit=function(){this.hasTagInitialized=!0,e.map(function(a){a.init()})},this.hasAllDependenciesBeenFullfilled=function(){return e.reduce(function(a,b){return a&&b.isFullfilled()},!0)},this.getDependencyValues=function(){return e.reduce(function(a,b){var c=b.getName(),d=b.getValue();return c&&d&&(a[c]=d),a},{})},this.additionalEventData={},this.addTagData=function(a){return TAGX.Utils.copyObj(this,a||{})},this.addEventData=function(a){return TAGX.Utils.copyObj(this.additionalEventData,a||{})},this.addDependant=function(a){g(a)},this.tagFired=function(){d=!0,h()},this.datalayerIsReady=function(){},this.datalayerReady=TAGX.datalayerReady,this.datalayerReady!==!0&&TAGX.EventProxy.one("TAGX:dataLayer:ready",function(){c.datalayerReady=!0,a.notifyWhenDatalayerReady===!0&&c.hasTagInitialized&&c.datalayerIsReady()}),this},TAGX.globalMaps={"nyt-v5":["audioEvents","videoEvents","comscore","comscoreVideo"],nytv:["audioEvents","videoEvents","comscore","comscoreVideo"],nyt4:["audioEvents","videoEvents","comscore","comscoreVideo"],mobileWeb:["audioEvents","videoEvents","comscore","comscoreVideo"],blogs:["audioEvents","videoEvents","comscore","comscoreVideo"],nytcooking:["audioEvents","videoEvents","comscore","comscoreVideo"],MOPS:["audioEvents","facebook","pinterest","twitter","linkedin"],SEG:["pinterest","linkedin"],"nyt-search":["audioEvents","comscore"],"NYT-Watching":["audioEvents","comscore"],"nyt-watching":["audioEvents","comscore"],"nyt-international":["audioEvents","comscore"],"games-crosswords":["audioEvents","comscore"],"nyt-noSourceApp":["audioEvents"],"NYT-Well":["comscore"],"":["comscore"]},TAGX.GlobalsInit=function(){"use strict";var a,b,c,d=TAGX.Utils.getMetaTag("sourceApp"),e=TAGX.globalMaps[d]||[];if(e.length>0&&/^.{5}s/.test(TAGX.Utils.getCookie("nyt-purr")||"")&&(e=e.filter(function(a){return!/comscore/.test(a)})),e.length>0&&/^.{4}p/.test(TAGX.Utils.getCookie("nyt-purr")||"")?e=e.filter(function(a){return!/comscore|facebook|linkedin|pinterest|twitter/.test(a)}):e.length>0&&/^.{4}e/.test(TAGX.Utils.getCookie("nyt-purr")||"")&&(e=e.filter(function(a){return!/audioEvents|comscore|facebook|linkedin|pinterest|twitter|videoEvents/.test(a)})),e.length>0)for(a=0;a<e.length;a++)b=e[a],c=TAGX.Globals[b],c instanceof TAGX.GlobalTag&&(c.init(),c.instant&&(c.fire(),c.oneAndDone&&delete TAGX.Globals[b]))},TAGX.useGlobal=function(a){"use strict";var b=TAGX.Utils.getMetaTag("sourceApp"),c=TAGX.globalMaps,d=TAGX.Globals[a]&&TAGX.Globals[a]instanceof TAGX.GlobalTag,e=c[b]&&c[b].indexOf(a)>-1;return!(!d||!e)},TAGX.ScrollManager=function(){"use strict";var a,b={subs:[],currentScrollTop:window.scrollY},c={25:"25%",50:"50%",75:"75%",100:"100%"};return b.didIscroll=function(a){return b.currentScrollTop!==a?!0:!1},b.pageWasScrolled=function(a,c,d){if(b.subs&&b.subs.length>0)for(var e=0;e<b.subs.length;e+=1){var f=b.subs[e];f.functionToRun&&f.functionToRun instanceof Function&&(f.args=f.args?f.args:{},b.copyObj(f.args,{dir:a,howMuch:c,current:d,whichSub:e}),f.functionToRun(f.args))}},b.elementInViewport=function(a,c){if(!b.isElement(a))return!1;var d=a.getBoundingClientRect(),e=c?a.offsetHeight/2:0;return d.top>=0&&d.left>=0&&d.bottom-e<=window.innerHeight&&d.right<=window.innerWidth},b.isElement=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},b.isElementVisible=function(a){var c=a.element||TAGX.$(a.elementSelector)[0];b.elementInViewport(c,a.isImpression?!0:!1)&&("undefined"!=typeof a.whichSub&&b.removeSub(a.whichSub),a.callback(!0))},b.percentageGoals=function(a){var d=parseInt(window.scrollY/(b.getDocHeight()-window.innerHeight)*100);d>=a.milestones[0]&&a.callback(!0,c[a.milestones.shift()]),0===a.milestones.length&&"undefined"!=typeof a.whichSub&&b.removeSub(a.whichSub)},b.trackVisible=function(a,c){b.addSubs({functionToRun:b.isElementVisible,args:{callback:c,element:TAGX.$(a[0])[0],elementSelector:a[0]}})},b.trackImpression=function(a,c){b.addSubs({functionToRun:b.isElementVisible,args:{callback:c,element:TAGX.$(a[0])[0],elementSelector:a[0],isImpression:!0}})},b.trackScrollMilestones=function(a){b.addSubs({functionToRun:b.percentageGoals,args:{callback:a,milestones:Object.keys(c)}})},b.addSubs=function(a){b.isWatching||b.initWatch(),b.subs.push(a)},b.removeSub=function(a){b.subs.splice(a,1),b.subs&&0===b.subs.length&&b.stopWatching()},b.copyObj=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},b.getDocHeight=function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},b.isWatching=!1,b.initWatch=function(){a=setInterval(function(){var a=window.scrollY;if(b.didIscroll(a)){var c=b.currentScrollTop<a?"down":"up",d=c===Math.abs(b.currentScrollTop-a);b.currentScrollTop=a,b.pageWasScrolled(c,d,a)}},250),b.isWatching=!0},b.stopWatching=function(){a&&(clearInterval(a),b.isWatching=!1)},b}(),TAGX.Globals.audioEvents=new TAGX.GlobalTag({name:"audio-events",instant:!1}),TAGX.Globals.audioEvents.init=function(){TAGX.EventProxy.on("tagx-event-audio",function(a){TAGX.Globals.audioEvents.fire({eventData:a})})},TAGX.Globals.audioEvents.fire=function(a){var b=TAGX.config?TAGX.config.GoogleAnalytics:null,c=a.eventData;if(b&&b.id&&c){var d="Audio "+TAGX.Utils.getMetaTag("PT").toLowerCase(),e=decodeURIComponent(c.mData?c.mData.videoName||"":""),f={dimension85:c.mData&&c.mData.series?c.mData.series:"null"},g=function(a){return TAGX.Utils.copyObj(a,f)},h={"audio-inview":[d,"in view",e,f],"user-play-audio":[d,"play",e,g({metric34:1,nonInteraction:!1})],"audio-complete":[d,"viewed:100%",e,g({metric38:1,nonInteraction:!1})],"audio-pause":[d,"pause",e,g({nonInteraction:!1})],"audio-resume":[d,"resume",e,g({nonInteraction:!1})],"percent-25-heard":[d,"viewed: 25%",e,g({metric35:1,nonInteraction:!1})],"percent-50-heard":[d,"viewed: 50%",e,g({metric36:1,nonInteraction:!1})],"percent-75-heard":[d,"viewed: 75%",e,g({metric37:1,nonInteraction:!1})],"audio-error":[d,"media error",e,g({nonInteraction:!1})]},i=h[c.eventName];if(!i)return;var j=b.tracker||"ga",k=b.createOptions&&b.createOptions.name?b.createOptions.name+".":"",l=i.slice(0);l.unshift(k+"send","event"),window[j].apply(window,l)}},function(a,b){"use strict";var c=a.Globals.comscoreVideo=new a.GlobalTag({name:"comscoreVideo",instant:!1});c.init=function(){c.streamingAnalytics=new b.ReducedRequirementsStreamingAnalytics({publisherId:"3005403"}),a.EventProxy.on("tagx-event-video",a.Globals.comscoreVideo.fire)},c.stop=function(){c.streamingAnalytics.stop()},c.play=function(a,d){var e=b.ReducedRequirementsStreamingAnalytics.ContentType,f=e.ShortFormOnDemand;d&&(f=e.Live),c.streamingAnalytics.playVideoContentPart(a,f)},c.playAdvertisement=function(a){var d=b.ReducedRequirementsStreamingAnalytics.AdType;c.streamingAnalytics.playVideoContentPart({ns_st_cl:a.videoDuration},d.LinearOnDemandMidRoll)},c.fire=function(a){var b="live"===a.mData.videoDeliveryMethod,d=c.generateMetaData(a);return c.isPlayAction(a.eventName)?c.play(d,b):c.isPauseAction(a.eventName)?c.stop():c.isAdStart(a.eventName)?c.playAdvertisement(a):c.isAdStop(a.eventName)?c.stop():void 0},c.isPlayAction=function(a){return"auto-play-start"===a||"user-play"===a||"resume"===a},c.isPauseAction=function(a){return"pause"===a||"video-complete"===a},c.isAdStart=function(a){return"ad-start"===a},c.isAdStop=function(a){return"ad-pause"===a||"ad-complete"===a},c.generateMetaData=function(a){var b=a||{},c=b.mData||{};return{ns_st_ci:b.contentId||"*null",ns_st_cl:c.videoDuration||"*null",ns_st_pu:c.videoFranchise||"*null",ns_st_pr:decodeURIComponent(c?c.videoName||"*null":"*null"),ns_st_tpr:"*null",ns_st_ep:"*null",ns_st_tep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ge:c.videoType||"*null",ns_st_ia:1,ns_st_ddt:"*null",ns_st_tdt:"*null",ns_st_st:"*null",c3:b.contentCollection,c4:"*null",c6:"*null",ns_st_ce:"*null"}},c.setEventListeners=function(){for(var b=["auto-play-start","user-play","resume","pause","video-complete","ad-start","ad-pause","ad-complete"],c=b.length-1;c>=0;c--)a.EventProxy.on(b[c],a.Globals.comscoreVideo.fire)}}(window.TAGX,window.ns_),TAGX.Globals.comscore=new TAGX.GlobalTag({name:"comscore",instant:!0}),TAGX.Globals.comscore.mappings={business:"business","business - global":"global","Business Day - Dealbook":"dealbook","business - economy":"economy","business - energy-environment":"energy_environment","business - media":"media","business - smallbusiness":"smallbusiness","your-money":"your_money","Business Day - Economy":"economix","Business - Media and Advertising":"mediadecoder","Business Day - Small Business":"boss","Business Day - Your Money":"bucks","Business - Markets":"markets","Autos - wheels":"wheels","Science - Environment":"green",technology:"technology","technology - personaltech":"personaltech","Technology - bits":"bits","Technology - Personal Tech":"gadgetwise","Technology - pogue":"pogue","General - open":"open",style:"style",fashion:"fashion",dining:"dining",garden:"garden","fashion - weddings":"weddings","t-magazine":"t_magazine","T:Style - tmagazine":"t_style","Style - Dining":"dinersjournal","Style - Fashion":"runway","Style - parenting":"parenting",arts:"arts","arts - design":"design",books:"books","arts - dance":"dance",movies:"movies","arts - music":"music","arts - television":"television",theater:"theater","arts - video-games":"video_games","Arts - Event Search":"event_search","Arts - artsbeat":"artsbeat","Movies - carpetbagger":"carpetbagger",health:"health","health - research":"research","health - nutrition":"nutrition","health - policy":"policy","health - views":"views","Health - Health Guide":"health_guide","Health - well":"well","Health - newoldage":"newoldage","Health - consults":"consults",science:"science","science - earth":"earth","science - space":"space","Science - Environment":"green","Science - scientistatwork":"scientistatwork","Opinion - dotearth":"dotearth"},TAGX.Globals.comscore.setConfig=function(){"use strict";this.config=["c1=2","c2=3005403"];var a,b=[],c=TAGX.Utils.getCanonicalUrl(),d=TAGX.Utils.getMetaTag("CG"),e=TAGX.Utils.getMetaTag("SCG");d&&b.push(d),e&&b.push(e),a=this.mappings[b.join(" - ")],-1!==c.indexOf("markets.on.nytimes.com")&&(-1!==c.indexOf("portfolio")&&(a="portfolio"),-1!==c.indexOf("screener")&&(a="screener"),-1!==c.indexOf("analysis_tools")&&(a="analysis_tools")),a&&(this.config.push("comscorekw="+a),"object"==typeof window._comscore[0]&&(window._comscore[0].comscorekw=a))},TAGX.Globals.comscore.addListeners=function(){"use strict";if(!this.listenersOn){var a,b=!0,c=function(){var a,b,c,d,e,f,g,h=1,i=(Date.now(),function(){a=TAGX.ScrollManager.currentScrollTop,b=TAGX.ScrollManager.getDocHeight(),c=window.innerHeight,d=window.innerWidth<768,e=d?4*c:2*c,f=Math.floor(a/e)+1}),j=function(){(new Image).src="//www.nytimes.com/svc/comscore/pvc.html",TAGX.Globals.comscore.fire()},k=function(){i(),f!==h&&(j(),h=f)},l=function(){clearTimeout(g),g=setTimeout(k,500)};i(),TAGX.ScrollManager.addSubs({functionToRun:l,args:{}})};a="article-multimedia-blogs-feed-oak-post",a.indexOf(TAGX.Utils.getMetaTag("PT").toLowerCase())>-1&&c(),document.location.pathname.match("/slideshow")&&TAGX.$(TAGX).on("tagx-comscore",function(){return b?void(b=!1):void TAGX.Globals.comscore.fire()}),document.location.pathname.match("/search")&&(window.onpopstate=function(a){a.state||TAGX.Globals.comscore.fire()}),this.listenersOn=!0}},TAGX.Globals.comscore.init=function(){"use strict";window._comscore=window._comscore||[],window._comscore.push({c1:"2",c2:"3005403"}),this.setConfig(),TAGX.Utils.includeFile("https://sb.scorecardresearch.com/beacon.js",!1,"body",!0,"loaded:beacon.js")},TAGX.Globals.comscore.fire=function(){"use strict";return this.listenersOn?(this.setConfig(),void udm_("https://sb.scorecardresearch.com/b?"+this.config.join("&"))):void this.addListeners()},TAGX.Globals.etLiInclude=new TAGX.GlobalTag({name:"eventtracker-include",instant:!0}),TAGX.Globals.facebook=new TAGX.GlobalTag({name:"facebook",instant:!1,notifyWhenDatalayerReady:!0,dependencies:[{name:"mc",getter:function(){var a=TAGX.Utils.getMeterValue("v");return"undefined"!=typeof a&&null!==a?a.v||"":""},eventName:"nytd:meter:viewedCountUpdated",eventHandler:function(a,b){b.fullfill(a&&a.v||"")},timeout:5e3}]}),TAGX.Globals.facebook.init=function(){!function(a,b,c,d,e,f,g){a.fbq||(e=a.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},a._fbq||(a._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],f=b.createElement(c),f.async=!0,f.src=d,g=b.getElementsByTagName(c)[0],g.parentNode.insertBefore(f,g))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init",this.pixelId||"592202027582499"),this._postInit()},TAGX.Globals.facebook.datalayerIsReady=function(){this.addTagData({eventName:"PageView"})},TAGX.Globals.facebook.fire=function(){var a,b,c,d,e,f;if(this.hasAllDependenciesBeenFullfilled()&&this.datalayerReady){c={ad:parseInt(TAGX.data.get("TAGX.L.adv")),articleId:TAGX.Utils.getMetaTag("articleid"),fbk:localStorage.getItem("kxsegs")||"",pScore:TAGX.data.get("propensity.p"),c1Score:TAGX.data.get("propensity.c1"),c2Score:TAGX.data.get("propensity.c2"),c3Score:TAGX.data.get("propensity.c3"),sourceApp:TAGX.Utils.getMetaTag("sourceApp"),watSegs:TAGX.data.get("user.watSegs"),fbBrowser:/\/FBIOS/i.test(navigator.userAgent),content_ids:[TAGX.Utils.encodeString(window.location.pathname)],content_type:"product",content_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path"),userAgent:navigator.userAgent,referrer:TAGX.data.get("referrer.url"),pageType:TAGX.data.get("presentation.pageType")},d=TAGX.data.get("user.type"),d&&"anon"!==d&&(c.userType=d,c.retentionRiskSegment=TAGX.data.get("user.retentionSegment"),c.bundleCoreDigi=TAGX.data.get("user.subscriberInfo.coreDigiBundle"),c.bundleCoreHD=TAGX.data.get("user.subscriberInfo.coreHDBundle")),e=TAGX.data.get("agentID"),e&&(c.agentID=e),f=TAGX.data.get("propensity.engagementLevel"),"number"==typeof f&&f>0&&(c.engagementLevel=TAGX.data.get("propensity.engagementLevel")),a=this.getDependencyValues(),b=TAGX.Utils.copyObj(c,a),b=TAGX.Utils.copyObj(b,this.additionalEventData),b=TAGX.Utils.copyObj(b,safelyCollectKeyweeEvent());var g=this.eventName||"PageView";fbq(trackMethod(g),g,b),this.tagFired(),this.resetEventName()}},TAGX.Globals.facebook.resetEventName=function(){this.eventName=null},TAGX.Globals.linkedin=new TAGX.GlobalTag({name:"linkedin",instant:!0,oneAndDone:!0}),TAGX.Globals.linkedin.fire=function(){window._linkedin_data_partner_id="40524";var a=document.getElementsByTagName("script")[0],b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",a.parentNode.insertBefore(b,a),this.tagFired()},TAGX.Globals.pinterest=new TAGX.GlobalTag({name:"pinterest",instant:!1,notifyWhenDatalayerReady:!0}),TAGX.Globals.pinterest.init=function(){!function(a){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var b=window.pintrk;b.queue=[],b.version="3.0";var c=document.createElement("script");c.async=!0,c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}("https://s.pinimg.com/ct/core.js"),pintrk("load","2612709798038"),pintrk("page"),delete pintrk.tagId,pintrk("load","2614963538652"),pintrk("page",{page_name:TAGX.Utils.getMetaTag("headline"),page_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path")}),this._postInit()},TAGX.Globals.pinterest.datalayerIsReady=function(){this.fire()},TAGX.Globals.pinterest.fire=function(){if(this.hasAllDependenciesBeenFullfilled()&&this.datalayerReady){var a={ad:parseInt(TAGX.data.get("TAGX.L.adv")),articleId:TAGX.Utils.getMetaTag("articleid"),fbk:localStorage.getItem("kxsegs")||"",pScore:TAGX.data.get("propensity.p"),aScore:TAGX.data.get("propensity.a"),sourceApp:TAGX.Utils.getMetaTag("sourceApp"),watSegs:TAGX.data.get("user.watSegs"),fbBrowser:/\/FBIOS/i.test(navigator.userAgent),content_ids:[TAGX.Utils.encodeString(window.location.pathname)],content_type:"product",content_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path"),userAgent:navigator.userAgent,value:0,currency:"USD"};a=TAGX.Utils.copyObj(a,this.getDependencyValues()||{}),a=TAGX.Utils.copyObj(a,this.additionalEventData||{});var b=["lead"];a.value>0&&b.indexOf(this.eventName)<0&&(this.eventName="checkout"),pintrk("track",this.eventName||"pagevisit",a),this.tagFired()}},TAGX.Globals.pinterest.addToCart=function(){pintrk("track","addtocart")},TAGX.Globals.twitter=new TAGX.GlobalTag({name:"twitter",instant:!0,oneAndDone:!0}),TAGX.Globals.twitter.init=function(){!function(a,b,c,d,e,f){a.twq||(d=a.twq=function(){d.exe?d.exe.apply(d,arguments):d.queue.push(arguments)},d.version="1.1",d.queue=[],e=b.createElement(c),e.async=!0,e.src="//static.ads-twitter.com/uwt.js",f=b.getElementsByTagName(c)[0],f.parentNode.insertBefore(e,f))}(window,document,"script"),twq("init","nuqgp"),this._postInit()},TAGX.Globals.twitter.fire=function(){twq("track","PageView"),this.tagFired()},TAGX.Globals.videoEvents=new TAGX.GlobalTag({name:"video-events",instant:!1}),TAGX.Globals.videoEvents.init=function(){TAGX.$(TAGX).on("tagx-event-video",function(a){TAGX.Globals.videoEvents.fire({eventData:a})})},TAGX.Globals.videoEvents.fire=function(a){var b=TAGX.config?TAGX.config.GoogleAnalytics:null,c=a.eventData;if(b&&b.id&&c){var d=("live"===c.mData.videoDeliveryMethod?"Live | ":"Video | ")+(c.version||""),e=decodeURIComponent(c.mData?c.mData.videoName||"":""),f={dimension141:c.mData.videoPrimaryPlaylistId||"null",dimension142:c.mData.videoPrimaryPlaylistName||"null",dimension138:c.mData.videoFranchise||"null",dimension139:c.mData.videoSection||"null",dimension123:c.contentId||"null",dimension124:c.mData.adDuration||"null",dimension163:c.mData.videoType||"null"},g={"percent-25-viewed":1,"percent-50-viewed":1,"percent-75-viewed":1,"video-complete":1,"user-play":1,"auto-play-next":1,"auto-play-start":1},h=TAGX.Utils.copyObj({"ad-start":1,"ad-complete":1,"skip-ad":1,"player-load":1,"video-load":1},g);if(h.hasOwnProperty(c.eventName)&&(f.dimension125=c.mData.adPosition),g.hasOwnProperty(c.eventName)){var i=function(){var a=[1,2,3,4,5,10,20,30,40],b=4;return function(c){var d=a.reduce(function(d,e,f){if("string"==typeof d)return d;var g=30*d,h=30*e;return 0!==g&&(g+=1),c>=g&&h>=c?b>=f?g+"-"+h+" seconds":f===b+1?g+" seconds to "+h/60+" minutes":Math.floor(g/60)+" minutes to "+h/60+" minutes":f===a.length-1?"more than "+h/60+" minutes":e},0);return d}}();f.dimension126=c.mData.videoDuration,f.dimension127=i(c.mData.videoDuration)}var j=function(a){return TAGX.Utils.copyObj(a,f)},k={"ad-complete":[d,"ad complete",e,f],"ad-pause":[d,"ad pause",e,f],"ad-resume":[d,"ad resume",e,f],"ad-start":[d,"ad start",e,f],"auto-play-next":[d,"autoplay next",e,j({metric32:1})],"auto-play-start":[d,"autoplay start",e,j({metric31:1})],"exit-fullscreen":[d,"exit fullscreen",e,f],"go-fullscreen":[d,"go fullscreen",e,f],"hd-off":[d,"hd off",e,f],"hd-on":[d,"hd on",e,f],pause:[d,"pause",e,f],"percent-25-viewed":[d,"viewed: 25%",e,j({metric24:1})],"percent-50-viewed":[d,"viewed: 50%",e,j({metric25:1})],"percent-75-viewed":[d,"viewed: 75%",e,j({metric26:1})],"3-seconds-viewed":[d,"3-seconds-viewed",e,j({metric42:1})],"30-seconds-viewed":[d,"30-seconds-viewed",e,j({metric43:1})],"360-drag-start":[d,"360-drag-start",e,j({metric58:1})],"360-drag-stop":[d,"360-drag-stop",e,j({metric59:1})],"360-compass-click":[d,"360-compass-click",e,j({metric60:1})],resume:[d,"resume",e,f],"share-embed":[d,"share: embed",e,j({metric4:1})],"share-facebook":[d,"share: facebook",e,j({metric4:1})],"share-twitter":[d,"share: twitter",e,j({metric4:1})],"skip-ad":[d,"ad skip",e,f],"user-play":[d,"user play",e,j({metric1:1})],"video-complete":[d,"viewed:100%",e,j({metric3:1})],"video-load":[d,"video load",e,f],"media-error":[d,"media-error",e,j({nonInteraction:!0})],"cherry-api-request-error":[d,"cherry-api-request-error",e,j({nonInteraction:!0})],"fw-admanager-load-error":[d,"fw-admanager-load-error",e,j({nonInteraction:!0})],"qos-library-load-failure":[d,"qos-library-load-failure",e,j({nonInteraction:!0})],"rendition-not-found":[d,"rendition-not-found",e,j({nonInteraction:!0})],"player-load":[d,"player load",e,j({nonInteraction:!0})],"imax-countdown-pause":[d,"imax-countdown-pause",e,j({nonInteraction:!1})],"imax-countdown-complete":[d,"imax-countdown-complete",e,j({nonInteraction:!1})]},l=k[c.eventName];if(!l)return;var m=b.tracker||"ga",n=b.createOptions&&b.createOptions.name?b.createOptions.name+".":"",o=l.slice(0);o.unshift(n+"send","event"),window[m].apply(window,o)}"object"==typeof c&&(this.fireFacebookPixel(c.eventName,e),this.etEvent(c))},TAGX.Globals.videoEvents.fireFacebookPixel=function(a,b){var c=["auto-play-next","auto-play-start","percent-25-viewed","percent-50-viewed","percent-75-viewed","user-play"].indexOf(a)>-1;if(c){var d={videoTitle:b},e="videoPlay";a.indexOf("play")>-1&&(d.playType=a.indexOf("user")>-1?"manual":a.replace("auto-play-","")),a.indexOf("viewed")>-1&&(e="videoViewed",d.milestone=a.replace(/\D/g,"")),TAGX.Globals.facebook.addTagData({eventName:e}),TAGX.Globals.facebook.addEventData(d),TAGX.Globals.facebook.fire()}},TAGX.Globals.videoEvents.etEvent=function(a){a=a||{};var b=a.mData||{},c=TAGX.Utils.copyObj({subject:"video-nytv",reqOrigin:"tagx",videoId:a.contentId,event:a.eventName,url:location.href,referrer:document.referrer,sourceApp:TAGX.Utils.getMetaTag("sourceApp")},b);NYTD&&NYTD.EventTracker&&(new NYTD.EventTracker).track(c)},TAGX.Ops=TAGX.Utils.Ops,function(){"use strict";var a="GTM-WF9QCL2",b="prod",c={"GTM-WF9QCL2":{environment:{dev:"&gtm_auth=Fp4R_D_6VITV0mcgcnAllg&gtm_preview=env-26",stg:"&gtm_auth=2OYi_i3OrmihRzhBD3aNjA&gtm_preview=env-25",prod:"&gtm_auth=28ykelszAvyta5q5YGRVOg&gtm_preview=env-53"}},"GTM-W497R4T":{environment:{dev:"&gtm_auth=lS5a8mIBCd-it7Zw1dVyQA&gtm_preview=env-8",stg:"&gtm_auth=ZDSWnE3pyz4LeGVbEbctlA&gtm_preview=env-7",prod:"&gtm_auth=OukvtoPH5NWW5GJEQuyMDA&gtm_preview=env-5"}},"GTM-TQS5DX3":{environment:{dev:"&gtm_auth=-OeOozCKknzn6xWEiZyVAw&gtm_preview=env-8",stg:"&gtm_auth=JFuuNSE8tP8ntxAdHC88aQ&gtm_preview=env-7",prod:"&gtm_auth=BxlVOowD_jvqTyNZ6sqMEA&gtm_preview=env-5"}},"GTM-5FQC2Q6":{environment:{dev:"&gtm_auth=XGwCXyHod19Tpm8Y9XpOkg&gtm_preview=env-8",stg:"&gtm_auth=bETFf1tJOBO-OFz76dVnRw&gtm_preview=env-7",prod:"&gtm_auth=DyMl56JJEuAAdIQqYEzq1w&gtm_preview=env-6"}},"GTM-PWGSKCP":{environment:{dev:"&gtm_auth=J_LvxkvwsVMfpjWqTcQBNA&gtm_preview=env-78",stg:"&gtm_auth=qeK11m-OfQ7XflPIT9gvvg&gtm_preview=env-80",prod:"&gtm_auth=9V0d3w6WmeX7FsDZjpNdkA&gtm_preview=env-81"}},"GTM-WV45RD":{environment:{dev:"&gtm_auth=FW9USmjLRF6HUvnIsF6jbA&gtm_preview=env-191",stg:"&gtm_auth=oUzQwB8alb7LuaGyUmNemQ&gtm_preview=env-192",prod:"&gtm_auth=Pq5EB1YGWLHKPT262NMvkQ&gtm_preview=env-193"}}},d={nyt4:"GTM-WF9QCL2","nyt-v5":"GTM-WF9QCL2","seg-pip":"GTM-TQS5DX3",SEG:"GTM-5FQC2Q6",nytcooking:"GTM-WV45RD"},e=function(b){var e=d[b];return e&&"object"==typeof c[e]?e:a};window.TAGX.Utils.getGTMContainerId=function(a){return e(a)},window.TAGX.Utils.getGTMContainerEnv=function(a,d){d=d||b;var f=e(a);return c[f].environment[d]||c[f].environment[b]}}(),function(){"use strict";var a=window.TAGX,b=function(){return document.location.host.indexOf(".dev.")>-1?"dev":document.location.host.indexOf(".stg.")>-1||document.location.host.indexOf(".stage.")>-1?"stg":"prod"},c=b(),d=a.Utils.getMetaTag("sourceApp"),e=window.TAGX.Utils.getGTMContainerId(d),f=a.Utils.getGTMContainerEnv(d,c);!function(a,b,c,d,e,f){a[d]=a[d]||[],a[d].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=b.getElementsByTagName(c)[0],h=b.createElement(c),i="dataLayer"!==d?"&l="+d:"";h.async=!0,h.src="https://www.googletagmanager.com/gtm.js?id="+e+i+f+"&gtm_cookies_win=x",g.parentNode.insertBefore(h,g)}(window,document,"script","dataLayer",e,f),function(){const $___old_8f1436f4fa26f4ee={}.constructor.getOwnPropertyDescriptor(window,"XMLHttpRequest"),$___old_bdbcb5709e62a48c={}.constructor.getOwnPropertyDescriptor(window,"XMLHttpRequest");try{if($___old_8f1436f4fa26f4ee)({}).constructor.defineProperty(window,"XMLHttpRequest",$___mock_dd2c7e7e2c9ba860.XMLHttpRequest);if($___old_bdbcb5709e62a48c)({}).constructor.defineProperty(window,"XMLHttpRequest",$___mock_dd2c7e7e2c9ba860.XMLHttpRequest);return function(){function b(){var b=f.responseText?JSON.parse(f.responseText):{user:{},asset:{},session:{},version:""};!function(){var c={agentID:a.Utils.getCookie("nyt-a"),cookies:{"nyt-a":a.Utils.getCookie("nyt-a")},TAGX:{L:b.user.tracking},user:b.user,propensity:b.user.propensity},d=function(a,b,c){if(c.length<1)return b;var e=c.shift();return d(a,a(b,e),c)},e=function(a,b){return d(function(a,c){try{return void 0===a[c]?b===!0?""===c?a:(a[c]={},a[c]):"":(b===!0&&"object"!=typeof a[c]&&(a[c]={}),a[c])}catch(d){return""}},c,a.split("."))};a.data={get:e,set:function(a,b){var c=a.split("."),d=c.pop();e(c.join("."),!0)[d]=b}}}(),window.dataLayer.push({event:"pageDataReady",application:{name:d,environment:c},referrer:{url:document.referrer},asset:b.asset,user:b.user,version:b.version,session:b.session}),"function"!=typeof a.GlobalsInit||/^out/.test(a.Utils.getCookie("NYT-T")||"")||a.GlobalsInit(),a.EventProxy.trigger("TAGX:dataLayer:ready",{proxyEventName:"tagxDataLayerReady"}),a.taggerReady=!0}var e={host:"prod"===c?"a.nytimes.com":"a.dev.nytimes.com",referrer:document.referrer,assetUrl:function(){var a=document.querySelector("link[rel=canonical]");return a?a.href:document.location.href}()},f=new XMLHttpRequest;f.withCredentials=!0,f.open("GET","https://"+e.host+"/svc/nyt/data-layer?assetUrl="+encodeURIComponent(e.assetUrl)+"&jkcb="+Date.now(),!0),f.onload=b,f.addEventListener("error",function(){b(),window.dataLayer.push({event:"impression",eventData:{trigger:"module",type:"error"},module:{name:"JKidd API Error",label:f.statusText?f.status+":"+f.statusText:f.status}})}),f.send()}.apply(this,arguments)}finally{if($___old_8f1436f4fa26f4ee)({}).constructor.defineProperty(window,"XMLHttpRequest",$___old_8f1436f4fa26f4ee);if($___old_bdbcb5709e62a48c)({}).constructor.defineProperty(window,"XMLHttpRequest",$___old_bdbcb5709e62a48c)}}()}()})()}
